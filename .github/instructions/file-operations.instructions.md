---
description: "文件创建、修改、删除的强制规则"
applyTo: "**"
---

# 文件操作规范

**规则类型**: 🔴 强制规则  
**强制级别**: 🔴 严格执行  
**适用范围**: 所有文件操作

## 核心原则

### 三大核心原则

1. **先查后建** - 创建前必须搜索，避免重复
2. **明确位置** - 文件必须放在正确的目录
3. **规范命名** - 文件名必须清晰、具体、符合规范

### 适用范围

此规则适用于：
- ✅ 创建任何新文件（代码、文档、配置等）
- ✅ 移动现有文件到新位置
- ✅ 重命名现有文件
- ✅ 复制文件到新位置
- ✅ 删除文件前的验证

## 📋 创建文件前的检查清单

### Step 1: 搜索是否已存在类似文件

**🚨 AI创建任何文件前必须先执行此步骤！**

**目的**: 避免重复创建，避免文件混淆，避免编号冲突

**🔴 强制自检（AI必须执行）**：

在调用任何文件创建工具之前，AI必须回答：
- [ ] 我刚才执行了搜索了吗？
- [ ] 我看到搜索结果了吗？
- [ ] 我确认没有重复文件了吗？

**如果任何一项是"否" → 立即停止，先搜索！**

**AI违规记录**：
- 如果发现自己跳过了搜索 → 立即删除刚创建的文件
- 重新执行：搜索 → 确认 → 创建

**必须回答的问题**:
- [ ] 是否有相同功能的文件？
- [ ] 是否有类似主题的文件？
- [ ] 新内容是否可以补充到现有文件？
- [ ] 如果已存在，为什么还要创建新文件？

**决策逻辑**:
```
如果找到类似文件：
   内容相同 → ❌ 不创建，使用现有文件
   内容互补 → ⚠️ 补充到现有文件，不新建
   内容重叠 → ⚠️ 合并到现有文件
   完全不同 → ✅ 可以创建新文件

如果未找到类似文件：
   ✅ 继续下一步检查
```

### Step 2: 确定正确的目录位置

**目的**: 确保文件放在正确的位置，保持项目结构清晰

**必须回答的问题**:
- [ ] 这是文档还是代码？
- [ ] 应该放在哪个主目录？
- [ ] 应该放在哪个子目录？
- [ ] 完整的绝对路径是什么？

**禁止的位置**:
- ❌ 项目根目录（除了明确允许的文件）
- ❌ 文档主目录的根目录（必须放在分类子目录）
- ❌ 随意创建新的顶层目录

### Step 3: 确认文件名符合规范

**目的**: 文件名清晰、统一、易于理解

**文档类型命名**:
- **规范类**: `[主题]规范.md`
- **说明类**: `[主题]说明.md`
- **指南类**: `[主题]指南.md`
- **记录类**: `YYYY-MM-DD_[描述].md`
- **报告类**: `YYYY-MM-DD_[主题]报告.md`

**必须回答的问题**:
- [ ] 文件名是否清晰具体？
- [ ] 是否避免了禁止的关键词？
- [ ] 是否会与现有文件混淆？
- [ ] 是否符合命名类型规范？

**禁止的文件名**:
- ❌ 模糊名称: `文档.md`, `说明.md`, `笔记.md`
- ❌ 临时名称: `临时.md`, `test.md`, `新建文档.md`
- ❌ 包含空格: `我的 文档.md`
- ❌ 随意命名: `aaa.md`, `xxx.py`

**允许的文件名**:
- ✅ 清晰具体: `用户认证功能说明.md`
- ✅ 符合类型: `2025-11-30_版本发布记录.md`
- ✅ 标准名称: `README.md`, `.gitignore`

### Step 4: 检查是否需要创建新目录

**允许创建新目录的情况**:
- ✅ 项目配置中明确定义的目录结构
- ✅ 代码按模块划分的子目录
- ✅ 文档按主题划分的子目录

**禁止创建的目录**:
- ❌ 在项目根目录创建新的顶层目录
- ❌ 创建临时目录（除非添加到 .gitignore）
- ❌ 创建深层嵌套目录（>4层）

### Step 5: 准备更新项目索引

**创建文件后必须更新**:

1. **在文档目录创建文档**: 更新对应 README.md 的索引
2. **创建重要代码文件**: 更新对应目录的 README.md
3. **创建新的子目录**: 在新目录中创建 README.md
4. **修改文件引用**: 更新所有相关引用和链接

## 🚫 严格禁止的操作

### 绝对不允许的操作

1. ❌ **跳过检查直接创建文件**
2. ❌ **在禁止的位置创建文件**
3. ❌ **使用禁止的文件名**
4. ❌ **创建文件后不更新索引**
5. ❌ **随意创建目录**

## ✅ AI自检清单

每次文件操作后必须检查：

- [ ] 搜索过类似文件了吗？
- [ ] 确认文件位置正确吗？
- [ ] 文件名符合规范吗？
- [ ] 需要创建的目录合理吗？
- [ ] README.md已更新吗？
- [ ] 所有引用已更新吗？
- [ ] 遵守了所有禁止规则吗？

**AI必须主动执行所有检查，不等待提醒！** 🎯
