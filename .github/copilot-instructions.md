# AI 核心工作原则

> 本文件整合了项目的核心规则和工作原则，适用于 GitHub Copilot、VS Code 和其他 AI 编程助手。

## 🔴 最高优先级规则

### 1. 禁止创建临时文档

**AI创建文件前路径检查**：

在创建任何 `.md` 文件之前，AI 必须检查：
- [ ] 目标路径是 `.cursor/rules/` 或 `.windsurf/rules/` 吗？
- [ ] 如果是 → 这是什么类型的文件？
  - 规则文件（NN-规则名.md） ✅ 允许
  - 临时/分析/报告文档 ❌ 禁止！
- [ ] 文件名包含"临时"、"分析"、"报告"、"检查"吗？
- [ ] 如果包含 → 必须放到 `项目文档/2-开发记录/`

**如果发现自己正要在 rules/ 创建临时文档**：
1. ⏸️ 立即停止
2. 🔄 改为：放到 `项目文档/2-开发记录/`
3. ❌ 绝对不在 rules/ 创建临时文档

**核心原则**：
- **严禁**在规则目录创建任何临时/分析文档
- 临时文档放 `项目文档/2-开发记录/`
- 分析报告放 `项目文档/2-开发记录/`

---

### 2. 规则目录必须100%通用

**允许的内容**：
- ✅ `rules/` 目录（规则文件）
- ✅ `README.md`（规则系统说明）

**绝对禁止**：
- ❌ **禁止**在规则目录创建任何其他文件
- ❌ **禁止**在规则目录创建任何其他子目录
- ❌ **禁止**项目特定配置文件（放项目根目录）

**原则**：
- 规则目录必须可以直接复制到任何项目
- 100%通用，0%项目特定内容

---

### 3. 严格目录控制

- **只能**创建架构模板定义的目录
- **禁止**随意新增目录或改变目录结构
- 参考项目配置文档了解目录结构

---

### 4. 规则自检机制 ⭐

每次操作后**必须**立即自检：

**自检流程**：
1. ✅ 检查是否创建了规范外的文件/目录
2. ✅ 检查文件是否放在正确位置
3. ✅ 检查是否违反命名规范
4. ✅ 检查是否需要同步文档
5. ✅ 发现违规立即纠正

**自检清单**：
- [ ] 文件位置正确？
- [ ] 文件命名符合规范？
- [ ] README 已更新？
- [ ] 索引已同步？
- [ ] 目录结构符合模板？

---

### 5. 文档同步

- 修改文件后**必须**更新相关索引
- 保持 README 和实际内容一致
- 文件变动时立即更新目录索引

---

### 6. README 维护

- 每个目录的 README 必须保持最新
- 文件变动时立即更新 README
- 保持索引的准确性和完整性

---

## 🚫 禁止过度文档化

### 绝对禁止

- ❌ **禁止**自动创建"分析报告"、"完成报告"、"总结文档"
- ❌ **禁止**在用户没要求时创建文档
- ❌ **禁止**写长篇分析浪费时间和 token

### 只在以下情况创建文档

1. ✅ 用户**明确要求**创建文档
2. ✅ 记录**关键决策**（简短记录）
3. ✅ **规则要求**必须创建的文档

### 默认行为

- ✅ 直接回答问题
- ✅ 直接解决问题
- ✅ 简洁、高效
- ✅ 节省时间和成本

### 判断标准

**问自己**：用户要求创建这个文档了吗？
- 是 → 创建
- 否 → 不创建，直接解决问题

**记住**：用户的时间和费用很宝贵，不要浪费！

---

## 📋 优先级顺序

1. 🔴 核心原则 - 最高优先级
2. 🔴 严格目录控制 - 不可违反
3. 🔴 规则自检 - 每次操作后执行
4. 🔴 文档同步 - 变更后必须同步
5. 🟡 其他强制规则
6. 🟢 参考文档

---

## ⚡ AI执行要求

### 🔴 创建文件前的强制检查（必须执行）

**在使用任何文件创建工具前，AI 必须先执行以下检查**：

#### 检查1：目标目录是否允许？
```
检查目标路径是否在以下禁止列表：
- ❌ .cursor/（除了 README.md）
- ❌ .cursor/rules/（除了 NN-规则名.md）
- ❌ .windsurf/（除了 README.md）
- ❌ .windsurf/rules/（除了 NN-规则名.md）
- ❌ 项目文档/根目录（必须放在子分类目录）

如果在禁止列表：
  1. 立即停止
  2. 确定正确位置
  3. 使用正确路径创建
```

#### 检查2：文件类型判断
```
问自己：
- 这是临时文件/脚本吗？ → temp/
- 这是项目配置文件吗？ → 项目根目录/
- 这是规则文件吗？ → rules/
- 这是文档吗？ → 项目文档/[分类目录]/
```

#### 检查3：规则目录特殊验证
```
如果目标路径包含规则目录：
  if 文件名 == "README.md" → 允许
  elif 路径包含 "rules/" AND 文件名匹配 "NN-*.md" → 允许
  else → 禁止！必须放到 temp/ 或项目根目录
```

**违反检查的后果**：
- ❌ 立即停止文件创建
- ❌ 报告违规
- ✅ 重新确定正确位置
- ✅ 使用正确路径创建

---

### 操作流程

**操作前**
- 检查是否符合架构模板
- 确认文件位置和命名

**操作中**
- 遵守所有规则
- 不创建规范外的内容

**操作后（最关键）**
- **立即执行自检清单**
- 发现问题立即纠正
- 完成所有同步工作

---

**AI 必须主动自检，不等待提醒！** 🎯

---

## 📚 详细规则参考

本文件提供核心原则概览。详细规则请参考：

- 文件操作规范
- 目录管理规范
- 文件命名规范
- 变更同步规则
- README 管理规范
- 测试组织规范
- Emoji 文档风格规范
- 知识库管理规范
- 项目结构与配置
- Git 操作规范
- 命令执行规范

---

> 💡 **注意**：本规则系统同时支持 Cursor、Windsurf 和 VS Code Copilot。不同编辑器可能使用不同的规则目录（`.cursor/rules/`、`.windsurf/rules/` 或 `.github/instructions/`），但核心原则保持一致。
