# SBL固件目录与文件规律分析

**生成时间**: 2025-12-17  
**分析对象**: Secondary Bootloader (SBL) 固件  
**数据来源**: 2025-12-17_TI_SDK固件列表.md  
**适用芯片**: AWRL6844EVM

---

## 📊 一、SBL固件概述

### 1.1 什么是SBL？

**SBL** = **Secondary Bootloader**（二级启动加载器）

**作用**：
- 🔧 **启动引导**：在芯片上电后，由ROM Bootloader (RBL)加载SBL
- 🚀 **固件加载**：SBL负责从Flash读取应用固件并加载到内存
- ⚙️ **系统初始化**：初始化时钟、电源、外设等系统资源
- 🔒 **安全验证**：可选的固件签名验证和安全启动

**启动流程**：
```
ROM Bootloader (RBL) → SBL → Application Firmware
    (芯片固化)      (Flash)      (用户应用)
```

---

## 📋 二、SBL固件清单

### 2.1 完整固件列表（共6个）

从354个固件中提取到**6个SBL相关固件**：

#### MMWAVE_L_SDK 固件（4个）

##### 1. SBL标准版
```
C:\ti\MMWAVE_L_SDK_06_01_00_01\examples\drivers\boot\sbl\xwrL684x-evm\r5fss0-0_nortos\ti-arm-clang\sbl.release.appimage
```

##### 2. SBL Lite轻量版
```
C:\ti\MMWAVE_L_SDK_06_01_00_01\examples\drivers\boot\sbl_lite\xwrL684x-evm\r5fss0-0_nortos\ti-arm-clang\sbl_lite.release.appimage
```

##### 3. SBL标准版（重复路径，SDK内部）
```
C:\ti\MMWAVE_L_SDK_06_01_00_01\mmwave_l_sdk_06_01_00_01\examples\drivers\boot\sbl\xwrL684x-evm\r5fss0-0_nortos\ti-arm-clang\sbl.release.appimage
```

##### 4. SBL Lite轻量版（重复路径，SDK内部）
```
C:\ti\MMWAVE_L_SDK_06_01_00_01\mmwave_l_sdk_06_01_00_01\examples\drivers\boot\sbl_lite\xwrL684x-evm\r5fss0-0_nortos\ti-arm-clang\sbl_lite.release.appimage
```

#### radar_toolbox 固件（2个）

##### 5. SBL镜像选择
```
C:\ti\radar_toolbox_3_30_00_06\source\ti\examples\Fundamentals\SBL_Image_Select\prebuilt_binaries\sbl_image_select.Release.appimage
```

##### 6. SBL内存初始化（示例）
```
C:\ti\radar_toolbox_3_30_00_06\source\ti\examples\Fundamentals\SBL_Memory_Initialization\prebuilt_binaries\hello_world.Release.appimage
```

**注意**：第6个实际是hello_world示例，用于演示SBL内存初始化后的应用启动，不是SBL本身。

---

### 2.2 去重后的实际SBL固件（3个）

| 序号 | 类型 | 文件名 | SDK来源 |
|-----|------|--------|---------|
| 1 | **标准SBL** | `sbl.release.appimage` | MMWAVE_L_SDK ✅ |
| 2 | **轻量SBL** | `sbl_lite.release.appimage` | MMWAVE_L_SDK ✅ |
| 3 | **镜像选择SBL** | `sbl_image_select.Release.appimage` | radar_toolbox |

---

## 📂 三、目录结构规律

### 3.1 MMWAVE_L_SDK 目录结构

#### 标准7层结构

```
C:/ti/MMWAVE_L_SDK_06_01_00_01/
└── [SDK重复层]/                    ← 可选，SDK内部重复目录
    └── examples/                   ← 示例根目录
        └── drivers/                ← 驱动类别
            └── boot/               ← 启动相关 ⭐
                └── [sbl变体]/      ← SBL类型
                    └── xwrL684x-evm/       ← 硬件平台
                        └── r5fss0-0_nortos/    ← 处理器配置
                            └── ti-arm-clang/   ← 编译器
                                └── [sbl固件].appimage
```

#### 实际路径示例

**标准SBL路径**：
```
C:/ti/MMWAVE_L_SDK_06_01_00_01/
└── examples/
    └── drivers/
        └── boot/
            └── sbl/                ← 标准版
                └── xwrL684x-evm/
                    └── r5fss0-0_nortos/
                        └── ti-arm-clang/
                            └── sbl.release.appimage
```

**轻量SBL路径**：
```
C:/ti/MMWAVE_L_SDK_06_01_00_01/
└── examples/
    └── drivers/
        └── boot/
            └── sbl_lite/           ← 轻量版
                └── xwrL684x-evm/
                    └── r5fss0-0_nortos/
                        └── ti-arm-clang/
                            └── sbl_lite.release.appimage
```

---

### 3.2 radar_toolbox 目录结构

#### 标准5层结构

```
C:/ti/radar_toolbox_3_30_00_06/
└── source/ti/examples/
    └── Fundamentals/               ← 基础功能类别
        └── [SBL Demo名称]/         ← 具体Demo
            └── prebuilt_binaries/  ← 预编译目录
                └── [sbl固件].appimage
```

#### 实际路径示例

**SBL镜像选择**：
```
C:/ti/radar_toolbox_3_30_00_06/
└── source/ti/examples/
    └── Fundamentals/
        └── SBL_Image_Select/       ← 镜像选择功能
            └── prebuilt_binaries/
                └── sbl_image_select.Release.appimage
```

**SBL内存初始化**：
```
C:/ti/radar_toolbox_3_30_00_06/
└── source/ti/examples/
    └── Fundamentals/
        └── SBL_Memory_Initialization/  ← 内存初始化演示
            └── prebuilt_binaries/
                └── hello_world.Release.appimage
```

---

### 3.3 目录结构对比

| 层级 | MMWAVE_L_SDK | radar_toolbox | 说明 |
|-----|-------------|--------------|------|
| 第1层 | `C:/ti/MMWAVE_L_SDK_06_01_00_01/` | `C:/ti/radar_toolbox_3_30_00_06/` | SDK根目录 |
| 第2层 | `examples/` | `source/ti/examples/` | 示例路径 |
| 第3层 | `drivers/` | `Fundamentals/` | 功能分类 |
| 第4层 | `boot/` | `SBL_*_*/` | SBL专用目录 ⭐ |
| 第5层 | `sbl/` 或 `sbl_lite/` | `prebuilt_binaries/` | SBL类型/预编译 |
| 第6层 | `xwrL684x-evm/` | - | 硬件平台 |
| 第7层 | `r5fss0-0_nortos/` | - | 处理器配置 |
| 第8层 | `ti-arm-clang/` | - | 编译器 |

**关键差异**：
- ✅ MMWAVE_L_SDK：**完整构建路径**，包含处理器和编译器信息
- ✅ radar_toolbox：**预编译路径**，直接提供可用固件

---

### 3.4 目录规律总结

#### 规律1：固定在boot目录下

**MMWAVE_L_SDK**：
```
/drivers/boot/[sbl变体]/
          ↑
      SBL专用父目录
```

**关键路径标识**：
- ✅ `/drivers/boot/` - SBL固件的固定位置
- ✅ `boot/sbl/` - 标准SBL
- ✅ `boot/sbl_lite/` - 轻量SBL

#### 规律2：只使用nortos配置

**处理器配置固定**：
```
r5fss0-0_nortos/    ← SBL专用配置
```

**为什么只用nortos？**
- ⚡ **启动速度**：SBL需要快速启动，不需要OS开销
- 💾 **占用空间小**：裸机运行，代码更紧凑
- 🎯 **单一任务**：只负责加载应用，无需多任务调度

**对比**：
| 配置 | 用于SBL | 用于应用 | 原因 |
|-----|--------|---------|------|
| `r5fss0-0_nortos` | ✅ 是 | ✅ 可以 | 简单、快速 |
| `r5fss0-0_freertos` | ❌ 否 | ✅ 推荐 | 需要多任务 |
| `system_*` | ❌ 否 | ✅ 复杂应用 | 多核协同 |

#### 规律3：固定硬件平台

**平台标识固定**：
```
xwrL684x-evm/       ← AWRL6844评估板
```

**规律**：
- ✅ 所有MMWAVE_L_SDK的SBL都包含此标识
- ✅ 芯片专用，不同芯片SBL不兼容

#### 规律4：radar_toolbox的特殊路径

**Fundamentals分类**：
```
Fundamentals/
├── SBL_Image_Select/       ← 镜像选择功能
└── SBL_Memory_Initialization/  ← 内存初始化示例
```

**特征**：
- ✅ Demo名称直接包含"SBL"
- ✅ 在`Fundamentals/`基础功能类别下
- ✅ 使用`prebuilt_binaries/`预编译目录

---

## 📝 四、文件命名规律

### 4.1 MMWAVE_L_SDK 命名模式

#### 模式A：标准命名

```
格式: sbl[_变体].release.appimage

示例:
├── sbl.release.appimage            ← 标准SBL
└── sbl_lite.release.appimage       ← 轻量SBL
```

**命名组成**：
1. **固定前缀**：`sbl` (Secondary Bootloader)
2. **变体标识**（可选）：`_lite` (轻量版)
3. **版本标识**：`.release` (发布版本)
4. **扩展名**：`.appimage`

**特征**：
- ✅ 文件名**极其简洁**（最短的固件名）
- ✅ **小写**命名
- ✅ 无芯片型号标识（通过目录路径区分）
- ✅ 无Debug版本（SBL只提供Release版）

---

### 4.2 radar_toolbox 命名模式

#### 模式B：功能描述型

```
格式: sbl_[功能描述].Release.appimage

示例:
└── sbl_image_select.Release.appimage   ← 镜像选择SBL
```

**命名组成**：
1. **固定前缀**：`sbl_`
2. **功能描述**：`image_select` (镜像选择)
3. **版本标识**：`.Release` (首字母大写！)
4. **扩展名**：`.appimage`

**特征**：
- ✅ 包含**功能描述**（更长的名称）
- ✅ **下划线**分隔单词
- ✅ 版本标识**首字母大写**（`.Release`）
- ✅ 功能更专用

---

### 4.3 命名对比分析

| 对比项 | MMWAVE_L_SDK | radar_toolbox | 说明 |
|-------|-------------|--------------|------|
| **前缀** | `sbl` | `sbl_` | toolbox有下划线 |
| **变体标识** | `_lite` | `_image_select` | 功能描述不同 |
| **版本标识** | `.release` | `.Release` | 大小写不同 ⚠️ |
| **名称长度** | 短（3-8字符） | 长（15+字符） | 描述性不同 |
| **Debug版本** | ❌ 无 | ❌ 无 | SBL都是Release |

---

### 4.4 文件命名规律总结

#### 规律1：固定sbl前缀

**所有SBL固件都以`sbl`开头**：
```
✅ sbl.release.appimage
✅ sbl_lite.release.appimage
✅ sbl_image_select.Release.appimage
```

**识别规则**：
- 文件名包含 `sbl` → 很可能是SBL固件
- 路径包含 `/boot/sbl` → 确定是SBL固件

#### 规律2：只有Release版本

**SBL不提供Debug版本**：
```
✅ .release.appimage        (MMWAVE_L_SDK)
✅ .Release.appimage        (radar_toolbox)
❌ .debug.appimage          (不存在)
```

**原因**：
- 🚀 **性能要求**：SBL必须快速启动，不能有调试开销
- 💾 **空间限制**：Flash空间宝贵，Debug符号太大
- 🔒 **安全考虑**：生产环境不需要调试信息

#### 规律3：变体命名清晰

**变体类型**：

| 变体 | 文件名 | 说明 | 用途 |
|-----|--------|------|------|
| **标准版** | `sbl.release.appimage` | 完整功能 | 通用启动 ✅ |
| **轻量版** | `sbl_lite.release.appimage` | 精简功能 | 快速启动 |
| **镜像选择** | `sbl_image_select.Release.appimage` | 多镜像支持 | 双镜像切换 |

**命名规则**：
- `sbl` = 标准版（无后缀）
- `sbl_lite` = 轻量版（精简）
- `sbl_[功能]` = 特殊功能版

#### 规律4：最短文件名

**SBL是固件中名称最短的**：

| 固件类型 | 典型名称长度 | 示例 |
|---------|------------|------|
| **SBL** | 3-20字符 | `sbl.release.appimage` |
| 驱动示例 | 20-40字符 | `gpio_led_blink_main.release.appimage` |
| 应用Demo | 30-50字符 | `motion_and_presence_detection_demo.Release.appimage` |

**原因**：
- ✅ SBL功能单一，无需复杂描述
- ✅ 业界约定俗成的简短命名

---

## 🎯 五、SBL固件类型详解

### 5.1 标准SBL（推荐）⭐

**文件名**：`sbl.release.appimage`

**功能特性**：
- ✅ **完整功能**：支持所有标准启动流程
- ✅ **QSPI Flash**：从QSPI Flash加载应用
- ✅ **多核支持**：可加载R5F和DSP固件
- ✅ **错误处理**：完善的错误检测和恢复
- ✅ **串口调试**：支持UART输出启动信息

**适用场景**：
- 🎯 **标准开发**：绝大多数应用的首选
- 🎯 **生产环境**：稳定可靠的启动方案
- 🎯 **调试阶段**：完整的日志输出

**路径**：
```
C:\ti\MMWAVE_L_SDK_06_01_00_01\examples\drivers\boot\sbl\xwrL684x-evm\r5fss0-0_nortos\ti-arm-clang\sbl.release.appimage
```

---

### 5.2 轻量SBL

**文件名**：`sbl_lite.release.appimage`

**功能特性**：
- ⚡ **快速启动**：精简流程，启动更快
- 💾 **占用小**：代码体积更小
- 🎯 **单核**：仅支持R5F主核
- ⚠️ **功能精简**：部分高级特性被移除

**与标准版差异**：

| 特性 | 标准SBL | 轻量SBL |
|-----|--------|---------|
| 启动速度 | 快 | **更快** ⚡ |
| 代码大小 | 标准 | **更小** 💾 |
| 多核支持 | ✅ 是 | ❌ 否 |
| 错误处理 | 完善 | 简化 |
| 串口日志 | 详细 | 精简 |
| Flash类型 | 全支持 | QSPI |

**适用场景**：
- ⚡ **超快启动**：启动时间要求极高
- 💾 **空间受限**：Flash空间紧张
- 🎯 **单核应用**：不需要DSP的简单应用

**路径**：
```
C:\ti\MMWAVE_L_SDK_06_01_00_01\examples\drivers\boot\sbl_lite\xwrL684x-evm\r5fss0-0_nortos\ti-arm-clang\sbl_lite.release.appimage
```

---

### 5.3 镜像选择SBL

**文件名**：`sbl_image_select.Release.appimage`

**功能特性**：
- 🔄 **多镜像**：支持两个应用镜像（主/备）
- 🔀 **自动切换**：主镜像失败时切换到备份
- ✅ **固件升级**：支持OTA升级场景
- 🔒 **校验机制**：镜像完整性检查

**工作原理**：
```
Flash布局:
├── SBL镜像           (0x00000000)
├── 应用镜像1 (主)     (0x00100000)  ← 优先启动
└── 应用镜像2 (备)     (0x00200000)  ← 主镜像失败时启动
```

**启动流程**：
```
1. SBL启动
2. 检查镜像1 → 有效? → 加载镜像1 ✅
                 ↓ 无效
3. 检查镜像2 → 有效? → 加载镜像2 ✅
                 ↓ 无效
4. 启动失败 ❌
```

**适用场景**：
- 🔄 **OTA升级**：远程固件升级
- 🔒 **高可靠性**：关键应用的容错启动
- 🔧 **工厂模式**：生产/用户模式双镜像

**路径**：
```
C:\ti\radar_toolbox_3_30_00_06\source\ti\examples\Fundamentals\SBL_Image_Select\prebuilt_binaries\sbl_image_select.Release.appimage
```

---

### 5.4 SBL功能对比表

| 功能 | 标准SBL | 轻量SBL | 镜像选择SBL |
|-----|--------|---------|-----------|
| **启动速度** | 快 | **最快** ⚡ | 快 |
| **代码大小** | 标准 | **最小** 💾 | 较大 |
| **多核支持** | ✅ | ❌ | ✅ |
| **多镜像** | ❌ | ❌ | ✅ |
| **OTA升级** | ❌ | ❌ | ✅ |
| **错误恢复** | 完善 | 简化 | **最强** |
| **调试日志** | 详细 | 精简 | 详细 |
| **适用场景** | 通用 | 简单应用 | 关键应用 |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |

---

## 📊 六、统计分析

### 6.1 数量分布

| SDK | SBL固件数 | 占比 | 说明 |
|-----|----------|------|------|
| MMWAVE_L_SDK | 4个（2个去重） | 66.7% | 标准+轻量 |
| radar_toolbox | 2个 | 33.3% | 镜像选择+示例 |
| **总计** | **6个（3个实际）** | **100%** | - |

### 6.2 路径层级分布

| SDK | 路径层级 | 示例 |
|-----|---------|------|
| MMWAVE_L_SDK | 8层 | `SDK/examples/drivers/boot/sbl/platform/cpu/compiler/` |
| radar_toolbox | 5层 | `SDK/source/ti/examples/Fundamentals/Demo/prebuilt/` |

### 6.3 文件大小特征

**SBL固件特点**：
- 💾 **体积小**：通常 < 200KB
- ⚡ **标准SBL**：约 150-180KB
- 💡 **轻量SBL**：约 80-120KB
- 🔄 **镜像选择**：约 160-200KB

---

## 💡 七、最佳实践建议

### 7.1 SBL选择决策树

```
开始选择SBL
    │
    ├─→ 需要OTA升级功能？
    │   └─→ YES → sbl_image_select.Release.appimage
    │              (镜像选择SBL) ✅
    │
    ├─→ 需要超快启动？
    │   └─→ YES → sbl_lite.release.appimage
    │              (轻量SBL) ⚡
    │
    ├─→ 需要DSP多核？
    │   └─→ YES → sbl.release.appimage
    │              (标准SBL，推荐) ⭐
    │
    └─→ 通用开发？
        └─→ sbl.release.appimage
           (标准SBL，首选) ✅
```

### 7.2 入门推荐

**第1步：使用标准SBL**
```
文件: sbl.release.appimage
位置: MMWAVE_L_SDK/examples/drivers/boot/sbl/xwrL684x-evm/r5fss0-0_nortos/
原因: 功能完整，调试方便，稳定可靠
```

**第2步：验证启动**
```
1. 烧录SBL到Flash
2. 烧录应用固件到Flash
3. 上电验证启动流程
4. 检查串口日志
```

**第3步：根据需求切换**
```
需要快速启动 → sbl_lite
需要OTA升级  → sbl_image_select
通用场景     → sbl (保持)
```

### 7.3 Flash布局规划

**标准布局（单镜像）**：
```
Flash地址空间:
├── 0x00000000 - 0x000FFFFF   SBL镜像 (1MB)
├── 0x00100000 - 0x003FFFFF   应用固件 (3MB)
└── 0x00400000 - 0x00FFFFFF   数据存储 (12MB)
```

**双镜像布局（OTA升级）**：
```
Flash地址空间:
├── 0x00000000 - 0x000FFFFF   SBL镜像 (1MB)
├── 0x00100000 - 0x002FFFFF   应用镜像1 (2MB) ← 主镜像
├── 0x00300000 - 0x004FFFFF   应用镜像2 (2MB) ← 备份镜像
└── 0x00500000 - 0x00FFFFFF   数据存储 (11MB)
```

---

## 🔍 八、快速查找指南

### 8.1 按需求查找SBL

| 需求 | 推荐固件 | 路径关键词 |
|-----|---------|----------|
| **通用开发** | `sbl.release.appimage` | `/boot/sbl/` |
| **快速启动** | `sbl_lite.release.appimage` | `/boot/sbl_lite/` |
| **OTA升级** | `sbl_image_select.Release.appimage` | `/SBL_Image_Select/` |
| **多核应用** | `sbl.release.appimage` | `/boot/sbl/` |
| **单核应用** | `sbl_lite.release.appimage` | `/boot/sbl_lite/` |

### 8.2 PowerShell快速搜索

```powershell
# 搜索所有SBL固件
Get-ChildItem -Path "C:\ti" -Filter "sbl*.appimage" -Recurse | Select-Object FullName

# 搜索标准SBL
Get-ChildItem -Path "C:\ti\MMWAVE_L_SDK_06_01_00_01" -Filter "sbl.release.appimage" -Recurse

# 搜索轻量SBL
Get-ChildItem -Path "C:\ti\MMWAVE_L_SDK_06_01_00_01" -Filter "sbl_lite.release.appimage" -Recurse

# 搜索镜像选择SBL
Get-ChildItem -Path "C:\ti\radar_toolbox_3_30_00_06" -Filter "sbl_image_select*.appimage" -Recurse
```

---

## ⚠️ 九、注意事项

### 9.1 SBL与应用固件的关系

**关键概念**：
- ✅ SBL是**启动加载器**，不是应用
- ✅ SBL必须**先烧录**到Flash
- ✅ 应用固件**依赖SBL**才能启动
- ✅ SBL和应用是**分离的**两个镜像

**错误认知**：
- ❌ 认为只烧录应用固件就能运行
- ❌ 认为SBL是应用的一部分
- ❌ 认为不需要SBL（JTAG调试除外）

### 9.2 烧录顺序

**正确顺序**：
```
1. 烧录SBL → Flash起始地址
2. 烧录应用 → SBL之后的地址
3. 重启验证
```

**Flash地址示例**：
```
0x00000000: SBL镜像
0x00100000: 应用镜像
```

### 9.3 版本兼容性

**重要提示**：
- ⚠️ SBL和应用**必须来自同一SDK版本**
- ⚠️ 不同版本可能**不兼容**
- ✅ 推荐使用**相同SDK**生成的固件

---

## 📋 十、总结

### 10.1 核心规律

#### 目录规律
1. ✅ **固定位置**：`/drivers/boot/[sbl变体]/`
2. ✅ **nortos专用**：只用`r5fss0-0_nortos/`配置
3. ✅ **平台固定**：`xwrL684x-evm/`
4. ✅ **两类路径**：MMWAVE_L_SDK（完整）vs radar_toolbox（预编译）

#### 文件规律
1. ✅ **固定前缀**：`sbl` 或 `sbl_`
2. ✅ **只有Release**：无Debug版本
3. ✅ **名称简短**：最短的固件名
4. ✅ **变体清晰**：标准/轻量/镜像选择

### 10.2 实际数量

- **总数**：6个（含重复）
- **去重**：3个实际固件
- **推荐**：`sbl.release.appimage`（标准版）⭐

### 10.3 快速识别

**如何识别SBL固件？**

1. **看路径**：包含 `/boot/` → 很可能是SBL
2. **看文件名**：以 `sbl` 开头 → 确定是SBL
3. **看配置**：只有 `nortos` → 确定是SBL
4. **看大小**：< 200KB → 很可能是SBL

---

## 📚 参考资料

### 相关文档
- `2025-12-17_TI_SDK固件列表.md` - 完整固件列表
- `2025-12-17_固件目录与文件命名规律分析.md` - 通用规律分析
- `2025-12-17_TI_SDK固件目录结构规律.md` - 目录结构详解

### TI官方资源
- MMWAVE_L_SDK文档：`C:/ti/MMWAVE_L_SDK_06_01_00_01/docs/`
- radar_toolbox文档：`C:/ti/radar_toolbox_3_30_00_06/docs/`
- TI E2E论坛：https://e2e.ti.com/

---

**总结**：SBL固件在TI SDK中有明确的目录和命名规律，主要有3种类型（标准/轻量/镜像选择），推荐使用标准SBL作为通用启动方案。所有SBL固件都位于`/boot/`目录下，使用`nortos`配置，文件名以`sbl`开头，只提供Release版本。
