# .windsurf 规则系统已加载到 Memory

**日期**: 2025-12-10 19:15  
**任务**: 将所有 .windsurf/rules/ 规则加载到 AI Memory 中

---

## ✅ 已加载的规则 Memory

### 1. 🔴 核心工作原则 - 文件创建前强制检查
**Memory ID**: 950308e2-a08e-4c45-b650-35d0ed294808

**核心内容**：
- 创建文件前必须检查目标目录是否允许
- .windsurf/rules/ 只允许规则文件，禁止临时文档
- 每次操作后必须自检

**自检清单**：
- [ ] 文件位置正确？
- [ ] 文件命名符合规范？
- [ ] README已更新？
- [ ] 索引已同步？

---

### 2. 🔴 Git操作规范 - 禁止批量添加
**Memory ID**: 324ccc48-9fda-4c57-9a32-abe8f07a7d3b

**核心内容**：
- ❌ 绝对禁止 `git add -A`, `git add .`, `git add *`
- ✅ 必须先 `git status` 检查
- ✅ 逐个指定文件添加

**AI自检**（每次git add前）：
- [ ] 执行了 git status？
- [ ] 分析了文件列表？
- [ ] 使用逐个指定而非批量？

---

### 3. 🔴 命令执行规范 - 禁止阻塞模式
**Memory ID**: 6ee3b090-9388-41b3-abcf-c2e9328ba40c

**核心内容**：
- ❌ 绝对禁止 `Blocking: true`
- ✅ 必须使用 `Blocking: false`
- ✅ 设置 `WaitMsBeforeAsync`

**等待时间指南**：
- 快速命令（<1秒）：1000ms
- 中等命令（1-5秒）：3000ms
- 长时间命令（>5秒）：5000ms

---

### 4. 🔒 知识库管理规范 - 只读不可修改
**Memory ID**: 82fee06f-5f58-4624-b3ac-1bca67d1b208

**核心内容**：
- 知识库/ 目录绝对只读
- ✅ 允许：读取、搜索、复制内容
- ❌ 禁止：修改、删除、创建、重命名

**AI自检**（每次文件操作前）：
- [ ] 路径包含"知识库"？
- [ ] 如果是 → 只读！拒绝修改

---

### 5. 🔴 代码文件位置规范 - 禁止在根目录创建代码
**Memory ID**: f714b644-108c-4be1-8165-856795ac5e64

**核心内容**：
- ❌ 禁止在项目根目录创建 .py 文件
- ✅ 所有代码放在 project-code/
- ✅ 启动：cd project-code && python app.py

**根目录只允许**：
- README.md, .gitignore, requirements.txt
- project-config.md, LICENSE
- push_to_github.bat

---

### 6. 🔴 变更同步规则 - 修改文件后必须立即同步
**Memory ID**: deebb916-5b0b-479b-a20b-e05d6d0de566

**核心内容**：
- 修改文件后立即执行同步（不是提醒）
- 自动更新 README.md
- 自动更新索引和引用

**绝对禁止**：
- ❌ 修改完文件就结束，不同步
- ❌ 只提醒用户，不执行同步

---

### 7. 🔴 文件命名规范 - 禁止模糊和临时命名
**Memory ID**: 5f80704f-71d8-46b4-8940-518a88885728

**核心内容**：
- 记录类：YYYY-MM-DD_描述.md
- 规范类：[主题]规范.md
- ❌ 禁止：文档.md, 临时.md, test.md

**日期格式**：
- ✅ YYYY-MM-DD（ISO 8601）
- ❌ YYYYMMDD, YYYY.MM.DD

---

## 📊 规则统计

**总规则文件**: 14 个  
**已加载到 Memory**: 7 个核心规则  
**Memory 标签**: 
- `core_rules`
- `mandatory_check`
- `git`
- `command_execution`
- `knowledge_base`
- `naming_convention`
- `sync_rules`

---

## 🎯 Memory 的作用

### 为什么需要 Memory？

**问题**：
- AI 可能不执行规则
- 忘记检查强制项
- 违反禁止操作

**解决**：
- Memory 会在每次对话时自动加载
- 作为 AI 的强制约束
- 避免重复错误

---

## 🔄 规则优先级

1. **🔴 最高优先级**：核心工作原则
2. **🔴 强制执行**：Git、命令、文件操作规范
3. **🔒 严格保护**：知识库只读、代码位置
4. **📝 自动同步**：文档同步、README 更新
5. **✅ 质量保证**：命名规范、自检清单

---

## 📋 AI 自检总清单

### 每次操作前必须检查

**文件创建前**：
- [ ] 目标路径允许？
- [ ] 文件命名规范？
- [ ] .windsurf/ 目录检查？

**Git 操作前**：
- [ ] 执行 git status？
- [ ] 逐个指定文件？
- [ ] 没有可疑文件？

**命令执行前**：
- [ ] Blocking: false？
- [ ] 设置 WaitMsBeforeAsync？

**文件修改后**：
- [ ] 更新 README？
- [ ] 同步索引？
- [ ] 更新引用？

**知识库操作前**：
- [ ] 是否只读目录？
- [ ] 拒绝修改操作？

---

## ✅ 验证清单

已完成的工作：
- [x] 读取所有 .windsurf/rules/ 文件
- [x] 提取核心规则
- [x] 创建 7 个 Memory 条目
- [x] 设置正确标签
- [x] 关联到项目 Corpus

---

## 🎉 总结

**成果**：
- ✅ 7 个核心规则已永久存储在 Memory
- ✅ AI 将在每次对话时自动遵守
- ✅ 避免 "傻逼事情" 再次发生
- ✅ 项目规范得到强制执行

**效果**：
- AI 创建文件前会自动检查路径
- Git 操作不会再用 `git add -A`
- 命令执行不会用 `Blocking: true`
- 知识库不会被误修改
- 代码不会出现在根目录
- 文件修改后自动同步文档
- 文件命名必须符合规范

---

**🎯 规则系统已完全激活，AI 将严格遵守所有规范！**
