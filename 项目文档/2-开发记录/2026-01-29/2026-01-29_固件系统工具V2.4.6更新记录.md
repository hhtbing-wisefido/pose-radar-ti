# 2026-01-29 开发记录 - 固件系统工具 V2.4.6 更新

## 📝 任务描述
- 修复扫描文件后，应用固件和SBL固件列表不显示文件的问题。
- 优化工具的退出行为，确保运行后能正常退出回命令行。
- 对相关工具（`flash_tool.py`, `radar_test_gui.py`）进行版本更新和可移植性优化。

## ✅ 已完成工作
1. **核心 Bug 修复**:
   - 修复了 `tab_firmware_manager.py` 中的 `update_filter_options` 函数。
   - 原因是更新过滤器下拉框时触发了 `<<ComboboxSelected>>` 事件，导致在列表填充过程中又被其自身的过滤器逻辑清空。
   - 解决方案：在执行 `.current(0)` 更新前，临时使用 `.unbind('<<ComboboxSelected>>')` 解除事件绑定，并在更新完成后重新绑定。

2. **版本更新 (V2.4.6)**:
   - 更新 `flash_tool.py` 版本至 `v2.4.6`。
   - 更新 `tab_firmware_manager.py` 版本至 `v1.4.1`。
   - 同步更新构建日期为 `2026-01-29`。

3. **可移植性与稳定性优化**:
   - `tab_flash.py`: 优化了烧录工具路径检测逻辑，支持 `sys.frozen` 环境（EXE模式）。
   - `radar_test_gui.py`: 
     - 改进了后台启动逻辑，支持分身模式与普通模式的 EXE 兼容。
     - 禁用了 PyInstaller 的自动临时目录清理警告（修复了退出时的报警）。
     - 统一了代码缩进与空白符格式。

4. **GitHub 同步**:
   - 将所有相关修复和优化推送至 master 分支。

## 🔍 验证结果
- **扫描测试**: 执行 `python flash_tool.py` 并点击扫描，应用固件树状图正确显示了 200+ 个文件，SBL 固件树状图显示了 6 个文件。
- **UI 过滤器测试**: 切换类别和子类别过滤器，列表能够正常更新，不再出现文件消失的情况。
- **退出测试**: 程序关闭后能够及时释放进程，命令行窗口正常返回。

## 📌 后续计划
- 继续观察大规模固件扫描时的 UI 响应速度。
- 考虑加入固件扫描结果的持久化缓存。
