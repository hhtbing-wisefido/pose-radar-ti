# 🔬 AWRL6844 雷达配置文件深度分析

## 📋 目录

- [配置文件格式结构](#配置文件格式结构)
- [命令分类与详解](#命令分类与详解)
- [TI官方标准配置](#ti官方标准配置)
- [命令执行顺序](#命令执行顺序)
- [参数调优指南](#参数调优指南)

---

## 📐 配置文件格式结构

### 基本格式

```
% 注释行（以%开头的行会被忽略）
命令名称 参数1 参数2 参数3 ...
```

### 文件结构层次

```
┌─────────────────────────────────────────┐
│  1. 传感器控制命令                        │
│     └─ sensorStop                        │
├─────────────────────────────────────────┤
│  2. 基础硬件配置                          │
│     ├─ channelCfg (天线配置)             │
│     ├─ chirpComnCfg (Chirp公共参数)      │
│     ├─ chirpTimingCfg (时序配置)         │
│     └─ adcDataDitherCfg (ADC抖动)        │
├─────────────────────────────────────────┤
│  3. 帧配置                                │
│     ├─ frameCfg (帧结构参数)             │
│     └─ gpAdcMeasConfig (ADC测量)         │
├─────────────────────────────────────────┤
│  4. 信号处理配置                          │
│     ├─ cfarProcCfg (CFAR检测)            │
│     ├─ cfarFovCfg (视场范围)             │
│     ├─ aoaProcCfg (到达角处理)           │
│     ├─ aoaFovCfg (到达角视场)            │
│     └─ clutterRemoval (杂波去除)         │
├─────────────────────────────────────────┤
│  5. 校准配置                              │
│     ├─ factoryCalibCfg (工厂校准)        │
│     └─ runtimeCalibCfg (运行时校准)      │
├─────────────────────────────────────────┤
│  6. 输出与监控                            │
│     ├─ guiMonitor (GUI监控输出)          │
│     ├─ adcDataSource (数据源)            │
│     └─ adcLogging (数据记录)             │
├─────────────────────────────────────────┤
│  7. 系统配置                              │
│     ├─ antGeometryBoard (天线几何)       │
│     └─ lowPowerCfg (低功耗)              │
├─────────────────────────────────────────┤
│  8. 启动命令                              │
│     └─ sensorStart                       │
└─────────────────────────────────────────┘
```

---

## 🎯 命令分类与详解

**共计20种不同命令，实际配置中有22行**（`cfarProcCfg`和`cfarFovCfg`各使用2次）

### 1️⃣ 传感器控制命令（2条）

#### 命令1：`sensorStop`
```
sensorStop <subFrameIdx>
```
**作用**：停止雷达传感器运行

**参数**：
- `subFrameIdx`：子帧索引（0 = 停止所有子帧）

**使用场景**：
- ✅ 配置参数前必须先停止传感器
- ✅ 切换配置模式
- ✅ 调试和测试时暂停数据采集

**示例**：
```
sensorStop 0
```

---

#### 命令2：`sensorStart`
```
sensorStart <subFrameIdx> <reserved1> <reserved2> <reserved3>
```
**作用**：启动雷达传感器开始采集数据

**参数**：
- `subFrameIdx`：子帧索引（0 = 启动所有子帧）
- `reserved1-3`：预留参数（通常设为0）

**使用场景**：
- ✅ 完成所有配置后启动传感器
- ✅ 开始数据采集和处理

**示例**：
```
sensorStart 0 0 0 0
```

---

### 2️⃣ 基础硬件配置（4条）

#### 命令3：`channelCfg`
```
channelCfg <rxChannelEn> <txChannelEn> <cascading>
```
**作用**：配置雷达的收发天线通道

**参数**：
- `rxChannelEn`：接收天线使能掩码（位掩码）
  - AWRL6844: 4个RX天线，`153` = `0b10011001` = RX0,3,4,7使能
- `txChannelEn`：发射天线使能掩码
  - AWRL6844: 4个TX天线，`255` = `0b11111111` = 全部使能（TX0-3）
- `cascading`：级联模式（0 = 单芯片）

**配置示例**：
```
channelCfg 153 255 0
```
- **153** (0x99) = RX0, RX3, RX4, RX7 启用 → 4RX配置
- **255** (0xFF) = TX0-TX3全部启用 → 4TX配置
- **结果**：4TX4RX MIMO配置，16个虚拟天线

**重要性**：⭐⭐⭐⭐⭐
- 决定雷达的角度分辨率和FOV
- 影响虚拟天线阵列配置
- 必须与芯片硬件匹配

---

#### 命令4：`chirpComnCfg`
```
chirpComnCfg <startIdx> <endIdx> <profileId> <startFreq> <freqSlope> <idleTime> <adcStartTime>
```
**作用**：配置Chirp（线性调频信号）的公共参数

**参数详解**：
- `startIdx`：起始Chirp索引（8）
- `endIdx`：结束Chirp索引（0）
- `profileId`：配置文件ID（0）
- `startFreq`：起始频率，单位GHz（256 → 77GHz频段）
- `freqSlope`：频率斜率，单位MHz/μs（1）
- `idleTime`：空闲时间，单位μs（13.1）
- `adcStartTime`：ADC采样开始时间，单位μs（3）

**示例**：
```
chirpComnCfg 8 0 0 256 1 13.1 3
```

**关键概念**：
- **Chirp**：一次线性调频扫描（FMCW雷达的基本单位）
- **频率斜率**：决定距离分辨率
- **空闲时间**：影响最大检测距离

**重要性**：⭐⭐⭐⭐⭐
- 核心参数，决定雷达基本性能
- 影响距离分辨率和最大探测距离

---

#### 命令5：`chirpTimingCfg`
```
chirpTimingCfg <chirpStartIdx> <chirpEndIdx> <loopStartIdx> <loopEndIdx> <numLoops>
```
**作用**：配置Chirp的时序和循环参数

**参数**：
- `chirpStartIdx`：起始Chirp索引（6）
- `chirpEndIdx`：结束Chirp索引（63）
- `loopStartIdx`：起始循环索引（0）
- `loopEndIdx`：结束循环索引（160）
- `numLoops`：循环次数（58）

**示例**：
```
chirpTimingCfg 6 63 0 160 58
```

**重要性**：⭐⭐⭐⭐
- 决定帧内Chirp数量
- 影响速度分辨率（多普勒分辨率）

---

#### 命令6：`adcDataDitherCfg`
```
adcDataDitherCfg <enable>
```
**作用**：启用/禁用ADC数据抖动功能

**参数**：
- `enable`：使能标志（0=禁用, 1=启用）

**用途**：
- 减少ADC量化噪声
- 改善动态范围
- 提高信噪比

**示例**：
```
adcDataDitherCfg 1
```

**重要性**：⭐⭐⭐
- 提升信号质量
- 建议启用

---

### 3️⃣ 帧配置（2条）

#### 命令7：`frameCfg`
```
frameCfg <chirpStartIdx> <chirpEndIdx> <numLoops> <numFrames> <framePeriodicity> <triggerSelect>
```
**作用**：配置帧结构参数

**参数详解**：
- `chirpStartIdx`：帧内起始Chirp索引（64）
- `chirpEndIdx`：帧内结束Chirp索引（0）
- `numLoops`：每帧循环次数（1358）
- `numFrames`：连续帧数（1 = 持续运行）
- `framePeriodicity`：帧周期，单位ms（100 = 10Hz帧率）
- `triggerSelect`：触发模式（0 = 软件触发）

**示例**：
```
frameCfg 64 0 1358 1 100 0
```
- **帧率**：10 FPS（每100ms一帧）
- **持续运行**：numFrames=1表示无限循环
- **软件触发**：由sensorStart命令触发

**关键计算**：
- 帧率 = 1000 / framePeriodicity (Hz)
- 速度分辨率 ∝ numLoops

**重要性**：⭐⭐⭐⭐⭐
- 决定雷达刷新率
- 影响数据吞吐量
- 关键性能参数

---

#### 命令8：`gpAdcMeasConfig`
```
gpAdcMeasConfig <enable> <numSamples>
```
**作用**：配置通用ADC测量参数

**参数**：
- `enable`：使能标志（0=禁用）
- `numSamples`：采样数量（0=默认）

**示例**：
```
gpAdcMeasConfig 0 0
```

**重要性**：⭐⭐
- 辅助功能，通常禁用

---

### 4️⃣ 信号处理配置（5条）

**注意**：`cfarProcCfg`和`cfarFovCfg`在实际配置中各使用2次（分别用于Range和Doppler维度）

#### 命令9：`cfarProcCfg`
```
cfarProcCfg <subFrameIdx> <procDirection> <averageMode> <winLen> <guardLen> <div> <cycleLength> <threshold>
```
**作用**：配置CFAR（恒虚警率）目标检测处理器

**参数详解**：
- `subFrameIdx`：子帧索引（0/1 = Range/Doppler维度）
- `procDirection`：处理方向（2 = 两侧）
- `averageMode`：平均模式
  - Range维度：`8` = CASO-CFAR
  - Doppler维度：`4` = CAGO-CFAR
- `winLen`：窗口长度（8/4）
- `guardLen`：保护长度（4/2）
- `div`：除数因子（3/2）
- `cycleLength`：循环长度（0/1）
- `threshold`：检测阈值，dB（9.0）

**两个维度配置**：
```
cfarProcCfg 0 2 8 4 3 0 9.0 0    # Range维度（距离）- 第1次使用
cfarProcCfg 1 2 4 2 2 1 9.0 0    # Doppler维度（速度）- 第2次使用
```

**CFAR算法类型**：
- **CASO-CFAR** (8)：距离维度，单元平均最小
- **CAGO-CFAR** (4)：多普勒维度，单元平均最大

**阈值调整**：
- 阈值越高 → 虚警越少，但漏检越多
- 阈值越低 → 检测灵敏度高，但虚警增加
- 典型值：6-12 dB

**重要性**：⭐⭐⭐⭐⭐
- 核心检测算法
- 直接影响目标检测性能
- 需要根据应用场景调优

---

#### 命令10：`cfarFovCfg`
```
cfarFovCfg <subFrameIdx> <min> <max>
```
**作用**：配置CFAR的视场范围限制

**参数**：
- `subFrameIdx`：子帧索引
  - 0 = Range维度（距离）
  - 1 = Doppler维度（速度）
- `min`：最小值
- `max`：最大值

**示例**：
```
cfarFovCfg 0 0.25 9.0        # 距离范围：0.25m - 9.0m（第1次使用）
cfarFovCfg 1 -20.16 20.16    # 速度范围：-20.16 ~ +20.16 m/s（第2次使用）
```

**用途**：
- 限制检测范围，减少计算量
- 过滤无关区域的虚警
- 优化性能

**重要性**：⭐⭐⭐⭐
- 定义有效检测区域
- 影响系统性能和功耗

---

#### 命令11：`aoaProcCfg`
```
aoaProcCfg <fftSize1> <fftSize2>
```
**作用**：配置AoA（到达角）处理的FFT尺寸

**参数**：
- `fftSize1`：方位角FFT点数（64）
- `fftSize2`：俯仰角FFT点数（64）

**示例**：
```
aoaProcCfg 64 64
```

**FFT点数影响**：
- 更大的FFT → 更高的角度分辨率
- 但增加计算复杂度和延迟
- 常用值：32, 64, 128

**重要性**：⭐⭐⭐⭐
- 决定角度分辨率
- 影响目标定位精度

---

#### 命令12：`aoaFovCfg`
```
aoaFovCfg <minAzimuth> <maxAzimuth> <minElevation> <maxElevation>
```
**作用**：配置角度视场范围

**参数**：
- `minAzimuth`：最小方位角，度（-60°）
- `maxAzimuth`：最大方位角，度（+60°）
- `minElevation`：最小俯仰角，度（-60°）
- `maxElevation`：最大俯仰角，度（+60°）

**示例**：
```
aoaFovCfg -60 60 -60 60
```
- 方位角范围：120°（±60°）
- 俯仰角范围：120°（±60°）

**典型配置**：
- 广角场景：±60° ~ ±80°
- 窄角场景：±15° ~ ±30°

**重要性**：⭐⭐⭐⭐
- 定义空间覆盖范围
- 影响目标检测能力

---

#### 命令13：`clutterRemoval`
```
clutterRemoval <enable>
```
**作用**：启用/禁用静态杂波去除

**参数**：
- `enable`：使能标志（0=禁用, 1=启用）

**原理**：
- 通过高通滤波器去除零多普勒分量
- 消除静态物体反射（墙壁、家具等）
- 提高动态目标检测能力

**示例**：
```
clutterRemoval 0    # 禁用（保留所有目标）
clutterRemoval 1    # 启用（只检测运动目标）
```

**应用场景**：
- ✅ 人员检测（运动目标）→ 启用
- ❌ 距离测量（包括静态）→ 禁用

**重要性**：⭐⭐⭐⭐
- 显著提升动态目标检测
- 减少虚警

---

### 5️⃣ 校准配置（2条）

#### 命令14：`factoryCalibCfg`
```
factoryCalibCfg <enable> <reserved1> <reserved2> <reserved3> <flashOffset>
```
**作用**：配置工厂校准参数

**参数**：
- `enable`：使能标志（1=启用）
- `reserved1-3`：预留参数（0, 44, 2）
- `flashOffset`：Flash存储偏移地址（0x1ff000）

**示例**：
```
factoryCalibCfg 1 0 44 2 0x1ff000
```

**用途**：
- 加载出厂校准数据
- 补偿硬件差异
- 提高测量精度

**重要性**：⭐⭐⭐⭐
- 必须启用以保证性能
- 使用固定参数

---

#### 命令15：`runtimeCalibCfg`
```
runtimeCalibCfg <enable>
```
**作用**：启用运行时校准

**参数**：
- `enable`：使能标志（1=启用）

**示例**：
```
runtimeCalibCfg 1
```

**功能**：
- 实时补偿温度漂移
- 自适应校准
- 保持长期稳定性

**重要性**：⭐⭐⭐⭐
- 建议始终启用
- 提升长时间运行稳定性

---

### 6️⃣ 输出与监控（3条）

#### 命令16：`guiMonitor`
```
guiMonitor <subFrameIdx> <detectObj> <logMagRange> <noiseProfile> <rangeAzimuthHeatMap> <rangeDopplerHeatMap>
```
**作用**：配置GUI可视化输出内容

**参数**：
- `subFrameIdx`：子帧索引（1=所有）
- `detectObj`：检测目标列表（1=输出）
- `logMagRange`：对数幅度-距离图（1=输出）
- `noiseProfile`：噪声轮廓（0=不输出）
- `rangeAzimuthHeatMap`：距离-方位角热图（0=不输出）
- `rangeDopplerHeatMap`：距离-多普勒热图（1=输出）

**示例**：
```
guiMonitor 1 1 0 0 0 1
```
- 输出检测目标
- 输出距离-多普勒热图

**数据类型**：
- **检测目标**：位置、速度、强度
- **热图**：二维能量分布
- **噪声轮廓**：噪声基底

**重要性**：⭐⭐⭐⭐
- 控制数据输出内容
- 影响数据吞吐量

---

#### 命令17：`adcDataSource`
```
adcDataSource <mode> <filename>
```
**作用**：配置ADC数据源

**参数**：
- `mode`：数据源模式
  - 0 = 实时ADC数据
  - 1 = 从文件读取
- `filename`：文件名（mode=1时有效）

**示例**：
```
adcDataSource 0 adc_test_data_0001.bin
```
- 使用实时ADC数据（忽略文件名）

**重要性**：⭐⭐
- 调试和回放功能
- 通常使用实时数据（mode=0）

---

#### 命令18：`adcLogging`
```
adcLogging <enable>
```
**作用**：启用/禁用ADC数据记录

**参数**：
- `enable`：使能标志（0=禁用, 1=启用）

**示例**：
```
adcLogging 0
```

**用途**：
- 记录原始ADC数据用于离线分析
- 数据量巨大，通常禁用

**重要性**：⭐⭐
- 调试专用功能

---

### 7️⃣ 系统配置（2条）

#### 命令19：`antGeometryBoard`
```
antGeometryBoard <boardType>
```
**作用**：指定雷达板型号和天线几何配置

**参数**：
- `boardType`：板型号字符串

**支持的板型**：
- `xWRL6844EVM` - AWRL6844评估板
- `xWRL6432EVM` - AWRL6432评估板
- `custom` - 自定义配置

**示例**：
```
antGeometryBoard xWRL6844EVM
```

**作用**：
- 加载对应的天线位置参数
- 影响AoA计算精度
- 必须与硬件匹配

**重要性**：⭐⭐⭐⭐⭐
- 必须正确配置
- 影响角度测量准确性

---

#### 命令20：`lowPowerCfg`
```
lowPowerCfg <enable>
```
**作用**：启用低功耗模式

**参数**：
- `enable`：使能标志（0=禁用, 1=启用）

**示例**：
```
lowPowerCfg 1
```

**功能**：
- 在帧间隙降低功耗
- 关闭不必要的模块
- 延长电池寿命

**权衡**：
- ✅ 降低功耗
- ❌ 可能增加启动延迟

**重要性**：⭐⭐⭐
- 电池供电应用建议启用

---

## 📊 TI官方标准配置

### 6844_profile_4T4R_tdm.cfg

**配置统计**：
- **20种不同命令**
- **22行命令**（`cfarProcCfg`×2 + `cfarFovCfg`×2）
- **适用场景**：人员检测、姿态识别、距离-速度-角度测量

```bash
% AWRL6844 标准4T4R TDM MIMO配置
% 适用场景：人员检测、姿态识别、距离-速度-角度测量

命令1:  sensorStop 0                                    # 停止传感器
命令3:  channelCfg 153 255 0                           # 4TX4RX配置
命令4:  chirpComnCfg 8 0 0 256 1 13.1 3               # Chirp基本参数
命令5:  chirpTimingCfg 6 63 0 160 58                  # Chirp时序
命令6:  adcDataDitherCfg 1                            # 启用ADC抖动
命令7:  frameCfg 64 0 1358 1 100 0                    # 帧配置：10Hz
命令8:  gpAdcMeasConfig 0 0                           # 禁用GP ADC
命令16: guiMonitor 1 1 0 0 0 1                        # 输出目标+热图
命令9:  cfarProcCfg 0 2 8 4 3 0 9.0 0                # Range CFAR（第1次）
命令9:  cfarProcCfg 1 2 4 2 2 1 9.0 0                # Doppler CFAR（第2次）
命令10: cfarFovCfg 0 0.25 9.0                         # 距离范围：0.25-9m（第1次）
命令10: cfarFovCfg 1 -20.16 20.16                     # 速度范围：±20m/s（第2次）
命令11: aoaProcCfg 64 64                              # 角度FFT：64点
命令12: aoaFovCfg -60 60 -60 60                       # 角度范围：±60°
命令13: clutterRemoval 0                              # 禁用杂波去除
命令14: factoryCalibCfg 1 0 44 2 0x1ff000            # 工厂校准
命令15: runtimeCalibCfg 1                             # 运行时校准
命令19: antGeometryBoard xWRL6844EVM                  # 板型配置
命令17: adcDataSource 0 adc_test_data_0001.bin       # 实时数据
命令18: adcLogging 0                                  # 禁用数据记录
命令20: lowPowerCfg 1                                 # 低功耗模式
命令2:  sensorStart 0 0 0 0                           # 启动传感器
```

### 性能指标

| 参数 | 值 | 说明 |
|------|-----|------|
| **帧率** | 10 FPS | 实时性能 |
| **距离范围** | 0.25 - 9.0 m | 有效检测距离 |
| **距离分辨率** | ~4 cm | 取决于带宽 |
| **速度范围** | ±20.16 m/s | 约±72 km/h |
| **速度分辨率** | ~0.1 m/s | 取决于chirp数量 |
| **角度范围** | ±60° | 方位角和俯仰角 |
| **角度分辨率** | ~15° | 取决于天线配置 |
| **虚拟天线** | 16 (4TX×4RX) | MIMO配置 |

---

## 🔄 命令执行顺序

### 必须遵守的顺序规则

```
命令1: sensorStop          ← 必须首先执行
   ↓
命令3-6: 硬件配置命令
   - channelCfg
   - chirpComnCfg
   - chirpTimingCfg
   - adcDataDitherCfg
   ↓
命令7-8: 帧配置
   - frameCfg
   - gpAdcMeasConfig
   ↓
命令9-13: 信号处理配置
   - cfarProcCfg (x2)
   - cfarFovCfg (x2)
   - aoaProcCfg
   - aoaFovCfg
   - clutterRemoval
   ↓
命令14-15: 校准配置
   - factoryCalibCfg
   - runtimeCalibCfg
   ↓
命令19-20: 系统配置
   - antGeometryBoard
   - lowPowerCfg
   ↓
命令16-18: 输出配置
   - guiMonitor
   - adcDataSource
   - adcLogging
   ↓
命令2: sensorStart         ← 必须最后执行
```

### ⚠️ 注意事项

1. **必须先停止再配置**
   - 在运行状态下修改配置会导致错误
   - 每次修改配置前都要执行 `sensorStop`

2. **配置的依赖关系**
   - `frameCfg` 依赖于 `chirpComnCfg` 和 `chirpTimingCfg`
   - `cfarFovCfg` 依赖于 `cfarProcCfg`
   - `aoaFovCfg` 依赖于 `aoaProcCfg`

3. **校准必须在启动前**
   - 校准配置必须在 `sensorStart` 之前
   - 建议使用默认值不要随意修改

---

## 🎛️ 参数调优指南

### 距离性能调优

#### 增大检测距离
```
修改命令10 cfarFovCfg：
cfarFovCfg 0 0.25 15.0    # 扩展到15米
```

#### 提高距离分辨率
```
修改命令4 chirpComnCfg 的频率斜率：
freqSlope: 1 → 2 (MHz/μs)
```

---

### 速度性能调优

#### 扩展速度范围
```
修改命令7 frameCfg 的帧周期：
framePeriodicity: 100 → 50 (ms)  # 提高帧率
```

#### 提高速度分辨率
```
修改命令7 frameCfg 的循环数：
numLoops: 1358 → 2000  # 增加循环
```

---

### 角度性能调优

#### 提高角度分辨率
```
修改命令11 aoaProcCfg：
aoaProcCfg 128 128    # 增加FFT点数
```

#### 调整角度范围
```
修改命令12 aoaFovCfg：
aoaFovCfg -45 45 -30 30    # 缩小视场，提高精度
```

---

### 检测灵敏度调优

#### 提高灵敏度（检测更小/远目标）
```
修改命令9 cfarProcCfg 的阈值：
threshold: 9.0 → 6.0 (dB)  # 降低阈值
```
⚠️ 副作用：虚警增加

#### 降低虚警率
```
修改命令9 cfarProcCfg 的阈值：
threshold: 9.0 → 12.0 (dB)  # 提高阈值
```
⚠️ 副作用：可能漏检小目标

---

### 动态目标优化

#### 只检测运动目标
```
命令13: clutterRemoval 1    # 启用杂波去除
```
适用场景：
- ✅ 人员检测
- ✅ 车辆检测
- ❌ 距离测量

#### 检测所有目标（包括静止）
```
命令13: clutterRemoval 0    # 禁用杂波去除
```

---

### 功耗优化

#### 降低功耗
```
命令20: lowPowerCfg 1              # 启用低功耗
命令7:  framePeriodicity: 100 → 200  # 降低帧率
```

#### 高性能模式
```
命令20: lowPowerCfg 0              # 禁用低功耗
命令7:  framePeriodicity: 100 → 50   # 提高帧率
```

---

## 🔍 常见配置场景

### 场景1：人员跌倒检测
```
% 特点：近距离、高帧率、运动检测
命令7:  frameCfg 64 0 1358 1 50 0           # 20Hz帧率
命令10: cfarFovCfg 0 0.5 5.0                # 0.5-5米范围
命令13: clutterRemoval 1                    # 只检测运动
命令12: aoaFovCfg -30 30 -20 20            # 窄视场
```

### 场景2：房间占用检测
```
% 特点：大范围、低功耗、静止检测
命令7:  frameCfg 64 0 1358 1 200 0          # 5Hz帧率
命令10: cfarFovCfg 0 1.0 10.0               # 1-10米范围
命令13: clutterRemoval 0                    # 检测所有目标
命令20: lowPowerCfg 1                       # 低功耗
```

### 场景3：手势识别
```
% 特点：近距离、高分辨率、高帧率
命令7:  frameCfg 64 0 2000 1 33 0           # 30Hz帧率
命令10: cfarFovCfg 0 0.2 1.5                # 0.2-1.5米
命令11: aoaProcCfg 128 128                  # 高角度分辨率
```

### 场景4：车辆检测
```
% 特点：远距离、高速度、大视场
命令7:  frameCfg 64 0 1358 1 100 0          # 10Hz帧率
命令10: cfarFovCfg 0 1.0 50.0               # 1-50米
命令10: cfarFovCfg 1 -50.0 50.0             # ±50m/s (±180km/h)
命令12: aoaFovCfg -80 80 -30 30             # 大方位角
```

---

## 📈 性能权衡表

| 参数增加 | 好处 | 代价 |
|---------|------|------|
| **帧率** ↑ | 响应快、跟踪流畅 | 功耗↑、数据量↑ |
| **Chirp数量** ↑ | 速度分辨率↑ | 帧时间↑、功耗↑ |
| **带宽** ↑ | 距离分辨率↑ | 功耗↑、干扰风险↑ |
| **FFT点数** ↑ | 角度分辨率↑ | 计算量↑、延迟↑ |
| **CFAR阈值** ↓ | 灵敏度↑ | 虚警↑ |
| **视场范围** ↑ | 覆盖广 | 计算量↑、功耗↑ |

---

## 📝 配置文件模板

### 最小启动配置
```
命令1:  sensorStop 0
命令3:  channelCfg 153 255 0
命令4:  chirpComnCfg 8 0 0 256 1 13.1 3
命令5:  chirpTimingCfg 6 63 0 160 58
命令7:  frameCfg 64 0 1358 1 100 0
命令19: antGeometryBoard xWRL6844EVM
命令2:  sensorStart 0 0 0 0
```

### 完整标准配置
```
% 参考上面的 TI官方标准配置
```

---

## ⚙️ 调试技巧

### 1. 验证配置是否正确
- 发送配置后检查每条命令的响应
- 正常响应：`Done`
- 错误响应：`Error: <错误描述>`

### 2. 数据输出调试
```
命令16: guiMonitor 1 1 1 1 1 1    # 输出所有数据类型
```

### 3. 逐步增加复杂度
1. 先用最小配置启动（命令1,3-5,7,19,2）
2. 逐步添加信号处理命令（命令9-13）
3. 最后调整性能参数

### 4. 常见错误排查
| 错误现象 | 可能原因 | 解决方法 |
|---------|---------|---------|
| 无数据输出 | 命令16 `guiMonitor`未配置 | 启用至少一项输出 |
| LED不闪烁 | 未发送命令2 `sensorStart` | 检查命令顺序 |
| 距离/速度异常 | 参数配置错误 | 使用标准配置验证 |
| 高虚警率 | 命令9 CFAR阈值过低 | 提高阈值到10-12dB |

---

## 📚 参考资料

1. **TI官方文档**
   - AWRL6844 Technical Reference Manual
   - mmWave SDK User Guide
   - mmWave Demo Visualizer Guide

2. **配置文件位置**
   - SDK安装目录：`C:\ti\MMWAVE_L_SDK_06_01_00_01\mmwave_l_sdk_06_01_00_01\tools\visualizer\tmp\`
   - 示例配置：`6844_profile_*.cfg`

3. **相关工具**
   - mmWave Studio - 配置生成和测试
   - mmWave Visualizer - 实时数据可视化
   - CCS (Code Composer Studio) - 固件开发调试

---

## 🔗 总结

### 核心要点

1. **配置顺序很重要** - 必须按照固定顺序执行命令
2. **参数相互关联** - 修改一个参数可能影响其他性能
3. **从标准配置开始** - 先用TI官方配置，再逐步调优
4. **性能权衡** - 没有完美配置，需要根据应用场景权衡
5. **充分测试** - 配置修改后必须测试验证

### 快速配置checklist

- [ ] 确定应用场景（人员检测/车辆检测/手势识别等）
- [ ] 选择合适的基础配置模板
- [ ] 调整检测范围（距离、速度、角度）
- [ ] 设置合适的帧率（响应速度 vs 功耗）
- [ ] 配置CFAR参数（灵敏度 vs 虚警）
- [ ] 启用必要的信号处理（杂波去除、校准等）
- [ ] 测试验证性能指标
- [ ] 根据实际表现微调参数

---

**最后更新**：2025-12-24
**适用固件**：AWRL6844 mmwave_demo SDK 06.01.00.01
**文档版本**：v1.0
