# 🎛️ 雷达配置参数测试GUI工具使用说明

## 工具功能

1. **可视化测试界面** - 方便手动测试各种配置组合
2. **预设组合库** - 自动生成1-7命令的所有组合（共1716个）
3. **实时数据显示** - 显示CLI响应和雷达数据输出
4. **LED状态确认** - 可勾选确认LED是否闪烁
5. **分类日志保存** - 每次测试可保存独立日志文件

---

## 界面布局

```
┌─────────────────────────────────────────────────────────┐
│  串口连接 [COM4] [1250000] [连接] ● 未连接              │
├──────────────┬──────────────┬────────────────────────────┤
│ 预设测试组合 │ 当前测试配置 │ CLI响应 / 雷达数据输出    │
│              │              │                            │
│ 1716个组合   │ 测试名称     │ 实时显示命令响应           │
│ 按命令数分类 │ 命令编辑器   │ 显示数据量和速率           │
│              │              │                            │
│ [加载选中]   │ [开始测试]   │ 数据输出：XXX bytes, XX B/s│
│ [导出组合]   │ [停止雷达]   │                            │
│              │ [保存日志]   │                            │
│              │ ☐ LED闪烁    │                            │
└──────────────┴──────────────┴────────────────────────────┘
```

---

## 使用流程

### 步骤1：连接设备

1. 插入AWRL6844-EVM并上电
2. 在"串口连接"区域选择 **COM4**
3. 波特率选择 **1250000**
4. 点击 **"连接"** 按钮
5. 状态变为 "● 已连接 COM4"（绿色）

### 步骤2：选择测试组合

#### 方法A：使用预设组合（推荐）

1. 在左侧"预设测试组合"列表中选择一个组合
   - 例如：`3命令: channelCfg, frameCfg, antGeometryBoard`
2. 点击 **"加载选中组合"** 按钮
3. 组合会自动加载到"当前测试配置"

#### 方法B：手动输入

1. 直接在"当前测试配置"的命令编辑器中输入命令
2. 每行一条命令

#### 方法C：从文件加载

1. 点击 **"从文件加载"** 按钮
2. 选择 `.cfg` 配置文件

### 步骤3：运行测试

1. 确认"测试名称"（如：`3cmd_143520`）
2. 点击 **"▶ 开始测试"** 按钮
3. **观察设备**：
   - 👀 看板子上的LED是否闪烁
   - 📊 看"雷达数据输出"窗口是否有数据
   - 📈 看"数据量"和"速率"是否增加

### 步骤4：记录结果

1. **如果LED闪烁** → 勾选 "☐ LED闪烁" 选项
2. 点击 **"💾 保存日志"** 按钮
3. 选择保存位置和文件名
   - 建议分类保存：
     - `test_logs/1cmd/` - 1命令测试
     - `test_logs/2cmd/` - 2命令测试
     - `test_logs/3cmd/` - 3命令测试
     - ...

### 步骤5：继续下一个测试

1. 点击 **"⏹ 停止雷达"** 按钮
2. 从列表选择下一个组合
3. 重复步骤2-4

---

## 预设组合说明

### 组合总数：1716个

| 命令数 | 组合数 | 说明           |
| ------ | ------ | -------------- |
| 1命令  | 13     | C(13,1) = 13   |
| 2命令  | 78     | C(13,2) = 78   |
| 3命令  | 286    | C(13,3) = 286  |
| 4命令  | 715    | C(13,4) = 715  |
| 5命令  | 1287   | C(13,5) = 1287 |
| 6命令  | 1716   | C(13,6) = 1716 |
| 7命令  | 1716   | C(13,7) = 1716 |

**总计**: 13 + 78 + 286 + 715 + 1287 + 1716 + 1716 = **5821个组合**

### 命令池（13个核心命令）

| 命令             | 描述                     | 类别     |
| ---------------- | ------------------------ | -------- |
| channelCfg       | 天线通道配置 (4TX4RX)    | 基础配置 |
| chirpComnCfg     | Chirp公共参数            | 基础配置 |
| chirpTimingCfg   | Chirp时序配置            | 基础配置 |
| frameCfg         | 帧配置 (64chirps, 100ms) | 基础配置 |
| antGeometryBoard | 板级天线几何             | 基础配置 |
| runtimeCalibCfg  | 运行时校准               | 校准配置 |
| factoryCalibCfg  | 工厂校准                 | 校准配置 |
| adcDataDitherCfg | ADC数据抖动              | ADC配置  |
| apllFreqShiftEn  | APLL频率偏移             | 高级配置 |
| guiMonitor       | GUI监控输出              | 输出配置 |
| clutterRemoval   | 杂波去除                 | 信号处理 |
| lowPowerCfg      | 低功耗模式               | 电源配置 |
| adcLogging       | ADC日志记录              | 输出配置 |

---

## 测试日志格式

每个测试会保存为JSON文件，包含：

```json
{
  "name": "3cmd_143520",
  "commands": [
    "channelCfg 153 255 0",
    "frameCfg 64 0 1358 1 100 0",
    "antGeometryBoard xWRL6844EVM"
  ],
  "start_time": "2025-12-23T20:35:20",
  "end_time": "2025-12-23T20:35:45",
  "led_status": false,
  "data_bytes": "0 bytes",
  "cli_output": "..."
}
```

---

## 数据分析提示

### 判断测试成功的标准

1. **LED闪烁** ✅ - 最直观的指标
2. **数据输出 > 1000 bytes** ✅ - 有持续的数据流
3. **数据速率 > 100 B/s** ✅ - 数据传输稳定
4. **CLI无Error信息** ✅ - 配置加载成功

### 成功配置的特征

- ✅ LED持续闪烁（不是只闪一次）
- ✅ 数据输出窗口有持续的十六进制数据
- ✅ 数据量每秒增加
- ✅ CLI响应中无"Error"/"failed"/"Exception"

### 失败配置的特征

- ❌ LED不闪烁或只闪一次就停
- ❌ 数据输出窗口空白或数据很少
- ❌ 数据量不增长
- ❌ CLI响应包含错误信息

---

## 推荐测试策略

### 策略1：渐进式测试（推荐新手）

1. **先测试1命令** - 13个组合，很快完成
2. **再测试2命令** - 78个组合，找出可能的组合
3. **重点测试3-5命令** - 286+715+1287=2288个组合
4. **如果找到成功配置，停止测试更多命令**

### 策略2：关键命令优先

根据之前的经验，优先测试包含以下命令的组合：

- channelCfg
- chirpComnCfg
- chirpTimingCfg
- frameCfg
- antGeometryBoard

### 策略3：分批测试

- **第1批**: 1-3命令（377个组合）
- **第2批**: 4命令（715个组合）
- **第3批**: 5命令（1287个组合）
- **第4批**: 6-7命令（按需测试）

---

## 导出功能

### 导出所有组合

1. 点击 **"导出所有组合"** 按钮
2. 保存为JSON文件
3. 可以分享给团队或用于自动化测试

### 导出格式

```json
[
  {
    "name": "1命令: channelCfg",
    "keys": ["channelCfg"],
    "count": 1
  },
  {
    "name": "2命令: channelCfg, frameCfg",
    "keys": ["channelCfg", "frameCfg"],
    "count": 2
  },
  ...
]
```

---

## 快捷操作

- **Ctrl+C** (CLI输出) - 复制CLI响应
- **Ctrl+C** (数据输出) - 复制雷达数据
- **清空按钮** - 清空输出窗口
- **双击组合列表** - 快速查看组合详情

---

## 故障排除

### 问题1：无法连接COM4

- 检查设备是否上电
- 检查USB线是否连接
- 点击"刷新端口"重新扫描

### 问题2：连接后无响应

- 波特率是否设置为1250000
- 尝试断开重连
- 检查设备固件是否正常

### 问题3：测试后无数据输出

- 这可能是正常的（配置失败）
- 记录测试结果并继续下一个

### 问题4：LED闪烁但无数据

- 可能是数据端口设置问题
- 检查是否连接正确的端口（COM4为数据端口）

---

## 测试建议

1. **每测试10-20个组合保存一次日志**
2. **按命令数分类保存**（方便后续分析）
3. **记录LED闪烁情况**（最可靠的成功指标）
4. **如果找到成功配置，多测试几次验证**
5. **成功配置可以尝试删减命令，找最小配置**

---

## 数据收集完成后

将所有测试日志发送给AI分析，AI可以：

1. 统计成功率
2. 找出最小成功配置
3. 分析关键命令
4. 生成测试报告

---

**工具版本**: v1.0
**创建日期**: 2025-12-23
**适用设备**: AWRL6844-EVM
**测试固件**: mmwave_demo.release.appimage
