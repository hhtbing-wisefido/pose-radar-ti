# 🔍 支持Flash配置读取的AWRL6844固件详细资料

> **最后更新**: 2025-12-20  
> **文档目的**: 列出支持从Flash读取配置参数的固件及其配套配置文件

---

## 📋 什么是Flash配置读取？

### 功能说明

大多数TI mmWave雷达Demo固件通过**UART CLI实时配置**，每次启动都需要PC发送配置命令。

**Flash配置读取**功能允许：
- ✅ 将雷达配置参数存储到Flash存储器
- ✅ 将环境校准数据存储到Flash
- ✅ 雷达启动时自动从Flash加载配置
- ✅ **独立部署模式**（无需PC即可运行）

### 应用场景

| 场景 | 说明 |
|------|------|
| **生产部署** | 设备出厂前烧录配置，客户现场无需配置 |
| **背景校准** | 保存环境噪声基线，跨电源周期保持 |
| **嵌入式系统** | 无PC环境下的独立雷达系统 |
| **快速启动** | 避免每次启动都发送配置命令 |

---

## ⭐ 支持Flash配置读取的AWRL6844固件

### 1️⃣ InCabin Demo（车内检测）✅ 主要推荐

#### 📊 基本信息

| 项目 | 内容 |
|------|------|
| **固件名称** | AWRL6844 InCabin Sensing Demo |
| **固件文件** | `demo_in_cabin_sensing_6844_system.release.appimage` |
| **支持型号** | AWRL6844 |
| **应用场景** | 车内乘员检测、生命体征监测、儿童遗留检测 |
| **SDK来源** | Radar Toolbox 3.30.00.06 |

#### 📂 固件路径

```
C:\ti\radar_toolbox_3_30_00_06\source\ti\examples\
└── Automotive_InCabin_Security_and_Safety\AWRL6844_InCabin_Demos\
    ├── prebuilt_binaries\
    │   └── demo_in_cabin_sensing_6844_system.release.appimage ✅ 固件
    └── docs\
        └── AWRL6844_InCabin_Demos_User_Guide.html
```

**知识库路径**：
```
D:\7.项目资料\Ti雷达项目\知识库\雷达模块\RADAR-TOOLBOX\radar_toolbox_3_30_00_06\
└── source\ti\examples\Automotive_InCabin_Security_and_Safety\AWRL6844_InCabin_Demos\
```

#### 🔧 Flash配置功能

##### 支持的Flash操作

| 功能 | 说明 |
|------|------|
| **校准数据存储** | 环境噪声基线、背景场景数据 |
| **配置参数持久化** | 检测阈值、算法参数 |
| **独立部署模式** | 烧录后可脱离PC独立运行 |
| **跨电源周期保持** | 断电后数据不丢失 |

##### Flash相关CLI命令

**⚠️ 待验证**：需要查看固件文档确认具体CLI命令

```bash
# 示例命令格式（需验证）
flashWrite <address> <size> <data>
flashRead <address> <size>
saveCalibration
loadCalibration
```

#### 📝 配套配置文件

##### GUI工具配置文件

```
C:\ti\radar_toolbox_3_30_00_06\tools\visualizers\AWRL6844_Incabin_GUI\
└── src\chirpConfigs6844\
    ├── cpd.cfg                          ✅ 儿童存在检测配置
    ├── sbr.cfg                          ✅ 安全带提醒配置
    ├── intrusion_detection.cfg          ✅ 入侵检测配置
    └── intrusion_detection_LP.cfg       ✅ 入侵检测低功耗配置
```

##### 标准Demo配置文件

```
C:\ti\radar_toolbox_3_30_00_06\tools\
├── Adc_Data_Capture_Tool_DCA1000_CLI\chirp_configs\
│   └── xWRL6844_4T4R_tdm.cfg           ✅ 4T4R TDM配置
└── mmwave_data_recorder\src\cfg\
    └── 6844_profile_4T4R_tdm.cfg       ✅ 数据记录器配置
```

#### 📖 使用指南

##### 1. 烧录固件

```bash
# 使用UniFlash或项目烧录工具
# 烧录 demo_in_cabin_sensing_6844_system.release.appimage
```

##### 2. 配置雷达（首次）

通过UART CLI发送配置命令（使用上述.cfg文件）

##### 3. 保存配置到Flash

```bash
# 使用固件提供的CLI命令保存配置
# 具体命令需参考固件文档
```

##### 4. 验证独立运行

- 断开PC连接
- 重新上电
- 雷达应自动从Flash加载配置并开始工作

#### 📚 相关文档

| 文档 | 路径 |
|------|------|
| **用户指南** | `AWRL6844_InCabin_Demos\docs\AWRL6844_InCabin_Demos_User_Guide.html` |
| **Flash操作说明** | 需在用户指南中查找 |
| **CLI命令参考** | 需在用户指南中查找 |

---

## ⚠️ 不支持AWRL6844的Flash配置固件（参考）

### Parking Garage Sensor（仅xWR68xx）

虽然此固件支持Flash配置读取功能，但**不适用于AWRL6844**。

#### 基本信息

| 项目 | 内容 |
|------|------|
| **固件名称** | Parking Garage Sensor |
| **固件文件** | `parking_garage_sensor_68xx_demo_isk.bin` (⚠️ .bin格式) |
| **支持型号** | AWR6843 / xWR68xx系列 ❌ 不支持AWRL6844 |
| **固件格式** | `.bin` (AWRL6844使用`.appimage`) |

#### Flash配置文件（仅供参考）

```
知识库/雷达模块/RADAR-TOOLBOX/radar_toolbox_3_30_00_06/source/ti/examples/
└── Industrial_and_Personal_Electronics/Parking_Garage_Sensor/
    └── chirp_configs/
        ├── parking_garage_sensor_68xx_ISK_setFlashRecord.cfg  📝 写入Flash配置
        └── parking_garage_sensor_68xx_ISK_getFlashRecord.cfg  📝 读取Flash配置
```

#### Flash CLI命令示例（参考）

```bash
# 保存配置到Flash（仅xWR68xx）
setFlashRecord <record_type> <data>

# 从Flash读取配置（仅xWR68xx）
getFlashRecord <record_type>
```

**说明**：这些命令仅供参考AWRL6844可能的实现方式，具体命令需查看InCabin Demo文档。

---

## 🔍 如何确认固件支持Flash配置？

### 检查方法

1. **查看用户指南** - 搜索"Flash"、"persistent"、"calibration"关键词
2. **检查CLI命令列表** - 查找flash相关命令
3. **查看配置文件目录** - 是否有`*flash*.cfg`或`*Flash*.cfg`文件
4. **查看源码** - 搜索`flash`、`QSPI`相关API调用

### 待验证的固件

以下固件**可能**支持Flash配置，需要进一步验证：

| 固件 | 路径 | 待验证内容 |
|------|------|-----------|
| mmWave Demo | `MMWAVE_L_SDK_06_01_00_01\examples\mmw_demo` | 是否支持Flash配置 |
| CAN Integration | `radar_toolbox_3_30_00_06\...\CAN_Integration` | 是否支持Flash配置 |

---

## 📝 配置文件格式说明

### .cfg文件结构

TI mmWave雷达配置文件是文本格式，包含一系列CLI命令：

```cfg
% 示例配置文件结构
sensorStop
flushCfg

% 通道配置
channelCfg 15 7 0

% Chirp配置
profileCfg 0 60 7 0 23.42 0 0 70 1 256 5209 0 0 158

% 帧配置
frameCfg 0 0 16 0 100 1 0

% 启动传感器
sensorStart
```

### 关键配置命令

| 命令 | 功能 |
|------|------|
| `sensorStop` | 停止传感器 |
| `flushCfg` | 清除当前配置 |
| `channelCfg` | 配置TX/RX通道 |
| `profileCfg` | 配置Chirp参数 |
| `frameCfg` | 配置帧参数 |
| `sensorStart` | 启动传感器 |

### Flash相关命令（推测）

基于xWR68xx的实现，AWRL6844可能使用类似命令：

```bash
# 保存配置到Flash
saveConfig [slot_id]

# 从Flash加载配置
loadConfig [slot_id]

# 保存校准数据
saveCalibration

# 加载校准数据
loadCalibration

# Flash擦除
eraseFlash [address] [size]
```

**⚠️ 注意**：这些命令需要在InCabin Demo文档中验证。

---

## 🎯 推荐工作流程

### 开发阶段

1. **使用UART CLI配置** - 快速测试和调试
2. **通过GUI工具验证** - 使用配套的可视化工具
3. **记录最优配置** - 保存为.cfg文件

### 部署阶段

1. **烧录固件** - 使用UniFlash烧录支持Flash的固件
2. **配置参数** - 通过UART发送配置
3. **保存到Flash** - 使用saveConfig命令
4. **验证** - 断电重启，确认自动加载

### 生产阶段

1. **批量烧录** - 固件 + Flash配置一起烧录
2. **出厂测试** - 验证独立运行功能
3. **现场部署** - 设备可直接工作，无需配置

---

## 📚 相关资源

### 官方文档

| 文档 | 位置 |
|------|------|
| **InCabin Demo用户指南** | `radar_toolbox_3_30_00_06\...\AWRL6844_InCabin_Demos\docs\` |
| **Flash编程指南** | 需在TI官网搜索 |
| **QSPI Flash驱动** | `MMWAVE_L_SDK\...\drivers\qspi\` |

### 工具

| 工具 | 用途 |
|------|------|
| **UniFlash** | 固件和Flash数据烧录 |
| **InCabin GUI** | 可视化配置和测试 |
| **UART终端** | CLI命令交互（Tera Term、PuTTY等） |

### 知识库文档

```
知识库/雷达模块/RADAR-TOOLBOX/radar_toolbox_3_30_00_06/
├── source/ti/examples/Automotive_InCabin_Security_and_Safety/
│   └── AWRL6844_InCabin_Demos/
└── tools/visualizers/AWRL6844_Incabin_GUI/
```

---

## ❓ 待研究问题

### 需要进一步确认

- [ ] InCabin Demo的具体Flash CLI命令
- [ ] Flash存储区域的地址映射
- [ ] Flash数据格式和结构
- [ ] 是否支持多配置槽位
- [ ] 校准数据的存储位置和格式
- [ ] 如何通过UniFlash预烧录配置

### 研究方法

1. 阅读`AWRL6844_InCabin_Demos_User_Guide.html`
2. 查看固件源码（如果可用）
3. 实际硬件测试
4. 联系TI技术支持

---

## 📞 获取帮助

如需更多信息：
- 📖 查看知识库中的InCabin Demo文档
- 🌐 访问TI E2E论坛
- 📧 联系TI技术支持
- 🔬 实际硬件测试验证

---

**文档状态**: 🚧 部分待验证  
**下一步**: 实际测试InCabin Demo的Flash配置功能 🎯
