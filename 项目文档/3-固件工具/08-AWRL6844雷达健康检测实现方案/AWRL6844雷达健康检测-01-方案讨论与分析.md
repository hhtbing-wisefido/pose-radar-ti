# 📋 AWRL6844雷达健康检测-01-方案讨论与分析

> **目标**: 分析AWRL6844实现雷达健康检测的可选方案
> **创建日期**: 2026-01-05
> **状态**: ✅ 已完成

---

## 1.1 项目目标

### 1.1.1 功能需求

基于评估报告，AWRL6844雷达健康检测模块需实现：

| 功能 | 描述 | 优先级 |
|------|------|--------|
| **人存检测** | 检测监测区域是否有人 | P0 必需 |
| **姿态检测** | 识别5类姿态（站/坐/躺/走/跌倒） | P0 必需 |
| **跌倒检测** | 实时检测跌倒事件并触发告警 | P0 必需 |

### 1.1.2 性能指标

| 指标 | 目标值 |
|------|--------|
| 人存检测率 | ≥98% |
| 姿态分类准确率 | ≥90% |
| 跌倒检测率 | ≥95% |
| 跌倒误报率 | <5% |
| 响应时间 | <500ms |
| 检测距离 | 0.5m - 6m |

### 1.1.3 硬件平台

| 项目 | 规格 |
|------|------|
| 芯片 | AWRL6844 |
| 天线 | 4TX 4RX（16虚拟天线） |
| 开发板 | AWRL6844-EVM |
| 频段 | 60GHz |

---

## 1.2 可选实现方案

经过分析，有 **3种可行方案**：

---

### 方案A：基于 InCabin Demo 扩展 ⭐推荐

```
┌─────────────────────────────────────────────────────────────────┐
│  方案A：基于 AWRL6844_InCabin_Demos 扩展                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  基础工程: AWRL6844_InCabin_Demos (Radar Toolbox)               │
│                                                                 │
│  已有功能（直接可用）:                                           │
│  ├── ✅ 人存检测 (occupancyClassifier)                          │
│  ├── ✅ CNN分类器 (cnn_classifier.lib)                          │
│  ├── ✅ 入侵检测 (intrusionDetection)                           │
│  ├── ✅ Capon 2D波束成形 (高精度AoA)                             │
│  ├── ✅ 完整点云处理链                                           │
│  └── ✅ 预编译固件 (1MB appimage)                                │
│                                                                 │
│  需要添加:                                                       │
│  ├── 🔧 姿态分类逻辑 (参考xWRL6432 pose.c)                       │
│  ├── 🔧 跌倒检测判断 (状态机)                                    │
│  ├── 🔧 特征提取适配 (22维特征向量)                              │
│  └── 🔧 TLV输出格式                                             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

| 评估项 | 评分 | 说明 |
|--------|------|------|
| 架构匹配 | ⭐⭐⭐⭐⭐ | 原生AWRL6844，无需适配 |
| 人存检测 | ⭐⭐⭐⭐⭐ | 已有occupancyClassifier |
| CNN复用 | ⭐⭐⭐⭐⭐ | cnn_classifier直接可用 |
| 工作量 | ⭐⭐⭐⭐⭐ | 只需添加姿态/跌倒逻辑 |
| 风险 | ⭐⭐⭐⭐⭐ | 低风险，基础稳定 |
| **预计工期** | **7.5天** | |

---

### 方案B：基于 SDK mmwave_demo 开发

```
┌─────────────────────────────────────────────────────────────────┐
│  方案B：基于 MMWAVE_L_SDK mmwave_demo 开发                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  基础工程: mmwave_demo (SDK自带基础Demo)                         │
│                                                                 │
│  已有功能:                                                       │
│  ├── ✅ 基础点云检测                                             │
│  ├── ✅ CFAR检测                                                 │
│  ├── ✅ 校准代码                                                 │
│  └── ✅ CLI框架                                                  │
│                                                                 │
│  需要添加:                                                       │
│  ├── 🔧 人存检测算法                                            │
│  ├── 🔧 CNN分类器集成                                           │
│  ├── 🔧 姿态分类逻辑                                            │
│  ├── 🔧 跌倒检测逻辑                                            │
│  └── 🔧 特征提取全部实现                                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

| 评估项 | 评分 | 说明 |
|--------|------|------|
| 架构匹配 | ⭐⭐⭐⭐⭐ | 原生AWRL6844 |
| 人存检测 | ⭐⭐⭐ | 需自行实现 |
| CNN复用 | ⭐⭐⭐ | 需手动集成库 |
| 工作量 | ⭐⭐⭐ | 需添加大量代码 |
| 风险 | ⭐⭐⭐ | 中等 |
| **预计工期** | **10天** | |

---

### 方案C：移植 xWRL6432 代码

```
┌─────────────────────────────────────────────────────────────────┐
│  方案C：直接移植 xWRL6432 Pose & Fall Detection                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  源代码: 知识库\Pose_And_Fall_Detection\src\xWRL6432\           │
│                                                                 │
│  可复用的算法逻辑:                                               │
│  ├── ✅ pose.c/pose.h (姿态分类)                                 │
│  ├── ✅ motion_detect.c (运动检测)                               │
│  └── ✅ 特征提取逻辑                                             │
│                                                                 │
│  需要大量适配:                                                   │
│  ├── 🔧 M4F → R5F 架构迁移                                       │
│  ├── 🔧 linker.cmd 完全重写                                      │
│  ├── 🔧 syscfg 配置重写                                          │
│  ├── 🔧 ADC格式适配 (IQ交织→分离)                                │
│  ├── 🔧 相位校正新增                                             │
│  ├── 🔧 人存检测需自行添加                                       │
│  └── 🔧 模型库重编译（风险高）                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

| 评估项 | 评分 | 说明 |
|--------|------|------|
| 架构匹配 | ⭐ | M4F→R5F，需大量适配 |
| 人存检测 | ⭐⭐ | xWRL6432无此功能 |
| CNN复用 | ⭐⭐ | 模型库需重编译 |
| 工作量 | ⭐⭐ | 架构适配工作量大 |
| 风险 | ⭐⭐ | 高风险 |
| **预计工期** | **12天** | |

---

## 1.3 方案对比

### 功能对比

| 功能 | 方案A InCabin | 方案B mmwave_demo | 方案C 6432移植 |
|------|--------------|-------------------|---------------|
| 人存检测 | ✅ 已有 | ❌ 需开发 | ❌ 需开发 |
| 点云检测 | ✅ 已有 | ✅ 已有 | ⚠️ 需适配 |
| CNN分类 | ✅ 已有库 | ❌ 需集成 | ⚠️ 需重编译 |
| 姿态检测 | ❌ 需添加 | ❌ 需添加 | ✅ 已有逻辑 |
| 跌倒检测 | ❌ 需添加 | ❌ 需添加 | ✅ 已有逻辑 |

### 工作量对比

| 工作项 | 方案A | 方案B | 方案C |
|--------|-------|-------|-------|
| 架构适配 | 0天 | 0天 | 3天 |
| 人存检测 | 0天 | 2天 | 2天 |
| CNN集成 | 1天 | 3天 | 2天 |
| 姿态/跌倒 | 3天 | 3天 | 1天 |
| 配置适配 | 1.5天 | 1天 | 2天 |
| 联调测试 | 2天 | 2天 | 3天 |
| **总计** | **7.5天** | **11天** | **13天** |

### 风险对比

| 风险项 | 方案A | 方案B | 方案C |
|--------|-------|-------|-------|
| 编译失败 | 低 | 低 | 高 |
| 功能不达标 | 低 | 中 | 中 |
| 模型不兼容 | 低 | 中 | **高** |
| 架构问题 | 无 | 无 | **高** |
| 人存不可靠 | 低 | 中 | 中 |

---

## 1.4 推荐方案

### 🎯 强烈推荐：方案A（基于InCabin Demo扩展）

**推荐理由**：

| 序号 | 理由 |
|------|------|
| 1 | **人存检测开箱即用** - occupancyClassifier直接可用 |
| 2 | **CNN分类器已就绪** - 无需集成，直接调用 |
| 3 | **架构零适配** - 原生AWRL6844，无迁移风险 |
| 4 | **工期最短** - 7.5天（比方案C节省5.5天） |
| 5 | **风险最低** - 预编译固件可先验证硬件 |
| 6 | **功能最全** - 入侵检测等额外功能可选用 |

**实施思路**：

```
InCabin Demo 已有功能              需要添加的功能
────────────────────────          ────────────────────────
• 人存检测 ✅                       • 姿态分类逻辑(pose.c)
• 点云检测 ✅                       • 跌倒判断逻辑
• CNN分类器 ✅       ───合并───→    • 特征提取适配
• 入侵检测 ✅                       • TLV输出格式
• Capon 2D ✅                      • CLI配置命令
                                  
                     ↓
              
         AWRL6844雷达健康检测固件
         (人存 + 姿态 + 跌倒)
```

---

## 1.5 待确认事项

请确认以下问题：

| 序号 | 问题 | 选项 |
|------|------|------|
| 1 | 是否同意采用方案A？ | ✅ 同意 / ❌ 选择其他 |
| 2 | 功能范围：人存+姿态+跌倒，是否正确？ | ✅ 正确 / ❌ 需调整 |
| 3 | 呼吸检测是否作为后续研究课题？ | ✅ 是 / ❌ 当前必须实现 |
| 4 | 工期7.5天是否可接受？ | ✅ 可接受 / ❌ 需压缩 |

---

> 📌 **下一步**: 确认后进入 [AWRL6844雷达健康检测-02-方案确认](./AWRL6844雷达健康检测-02-方案确认.md)
> 📅 **更新日期**: 2026-01-05
