# 📋 AWRL6844雷达健康检测-实施目录大纲

> **版本**: v3.0 - 纯步骤版（无时间估算）
> **基于**: 标准mmwave_demo扩展方案
> **更新**: 2026-01-07

---

## 📊 实施总览

```
Phase 0 (架构适配)     Phase 1A (核心功能)      Phase 1B (优化)
──────────────────    ──────────────────       ──────────────
第1章 环境搭建         第4章 人存检测实现        第7章 杂波移除
第2章 标准Demo验证     第5章 姿态检测实现        第8章 多目标
第3章 架构演进规划 🔥  第6章 跌倒检测实现

Phase 2 (扩展研究)
─────────────────
第9章 区域划分
第10章 呼吸检测研究
第11章 综合测试
```

---

## Phase 0: 架构适配

### 第1章：环境搭建

**目标**：复制SDK基础工程，创建项目代码框架

**步骤**：

1. 从SDK复制mmwave_demo工程到项目目录
2. 在CCS中导入工程并重命名为AWRL6844_HealthDetect
3. 验证工程编译通过
4. 验证烧录和运行正常
5. 创建radar_config_file目录并复制配置文件
6. 阅读xWRL6432参考代码（pose.c/pose.h）
7. 更新项目README.md

---

### 第2章：标准Demo验证

**目标**：验证标准mmw_demo能正常工作，建立可靠基线

> ⚠️ **使用工程**：`project-code\mmw_demo_SDK_reference`（SDK标准Demo的参考副本）
> 💡 **作用**：仅用于验证开发环境是否正常，不做任何修改，作为参考基准

**验证内容**：

- [ ] 在CCS中导入 mmw_demo_SDK_reference
- [ ] 标准Demo编译通过
- [ ] 烧录成功
- [ ] 雷达配置加载成功
- [ ] CLI命令响应正常
- [ ] 点云数据输出正常

**测试场景**：

1. 静态环境 → 无点云或极少点云
2. 人员走动 → 有明显点云
3. 人员静止 → 点云稳定

**产出**：《标准Demo验证报告》

---

### 第3章：架构演进规划 🔥

**目标**：从标准mmw_demo架构演进到充分利用AWRL6844多核心资源

> 📚 **架构设计参考**：[附录C-InCabin架构学习参考](./AWRL6844雷达健康检测-附录C-InCabin架构学习参考.md)
> InCabin Demo展示了如何正确利用AWRL6844多核架构，虽然作为基础工程失败，但其架构设计思路值得深入学习。

> 📂 **项目目录说明**：
> - **mmw_demo_SDK_reference** - SDK标准Demo的参考副本，不修改，用于对比学习
> - **AWRL6844_HealthDetect** - 新项目目录，本章规划后创建，逐步按规划实现功能

**Phase 3A: DPC机制深入学习**

- 阅读SDK源码理解DPC工作原理
- 追踪完整数据流（ADC→DSS→R5F→TLV）
- 实验：修改DPC输出格式
- 产出：完整的目录结构规划文档

**Phase 3B: DSS算法扩展方案设计**

- 决定DSS代码组织方式
- 设计共享RAM数据结构
- 规划算法部署策略（MSS vs DSS）
- 决策CNN vs 规则分类器路线
- 产出：各模块接口定义

**关键决策**：

| 决策点   | 方案                          |
| -------- | ----------------------------- |
| 算法部署 | DSS做特征提取，R5F做决策      |
| DSP利用  | 点云特征计算、FFT分析         |
| CNN使用  | Phase 1用规则，Phase 2研究CNN |

**产出文档**：

- 《DPC机制学习笔记》
- 《数据流追踪报告》
- 《DSS算法扩展架构设计》
- 《共享RAM使用规范》
- 《AWRL6844_HealthDetect目录结构规划》

**规划的目标目录结构**（AWRL6844_HealthDetect）：

```
project-code/AWRL6844_HealthDetect/     ← 第3章规划后创建
├── src/
│   ├── common/
│   │   ├── data_path.h
│   │   └── shared_memory.h
│   ├── dss/
│   │   ├── feature_extract.c
│   │   └── dsp_utils.c
│   ├── mss/
│   │   ├── presence_detect.c
│   │   ├── pose_detect.c
│   │   ├── fall_detect.c
│   │   └── health_monitor.c
│   └── config/
│       ├── algorithm_params.h
│       └── zone_config.h

project-code/mmw_demo_SDK_reference/    ← 已存在，用于参考对比
└── (SDK标准mmw_demo工程，不修改)
```

---

## Phase 1A: 核心功能开发

### 第4章：人存检测实现

**目标**：实现简单稳定的人存检测

> ⚠️ **前置条件**：第3章已明确算法部署在MSS/R5F

**算法概要**：

| 版本   | 算法         | 特点          |
| ------ | ------------ | ------------- |
| 基础版 | 点云数量判断 | 简单阈值      |
| 改进版 | 运动检测增强 | 区分静止/运动 |
| 稳定版 | 滞后判断     | 防止误判      |

**实施步骤**：

1. 创建 presence_detect.h 和 presence_detect.c
2. 实现基础算法（点云数量判断）
3. 集成到主程序并输出TLV调试信息
4. 实现运动检测增强
5. 实现滞后判断
6. 参数调优测试
7. 验证稳定性

**测试验证**：

- 测试场景：空房间、静止人员、运动人员
- 验收标准：准确率 > 95%

---

### 第5章：姿态检测实现

**目标**：实现5类姿态检测（站/坐/躺/走/跌倒）

> ⚠️ **前置条件**：第3章已确定DSS特征提取 + MSS分类方案

**算法概要**：

**特征提取**（在DSS/C66x）：

- 质心坐标（X/Y/Z）
- XY平面分布范围
- Z轴分布范围
- 平均/最大速度

**规则分类器**（在MSS/R5F）：

| 姿态 | 判断依据             |
| ---- | -------------------- |
| 站立 | 高度高，XY分布小     |
| 坐   | 中等高度，XY分布中等 |
| 躺   | 高度低，XY分布大     |
| 走   | 有明显速度           |

**实施步骤**：

1. 创建 pose_detect.h 和 pose_detect.c
2. 实现点云特征提取函数（参考xWRL6432/pose.c）
3. 输出特征值调试
4. 实现站/坐/躺判断规则
5. 实现走判断规则
6. 集成测试
7. 实测收集数据
8. 调整阈值参数
9. 验证准确率

---

### 第6章：跌倒检测实现

**目标**：基于姿态变化的跌倒检测

> ⚠️ **前置条件**：第5章姿态检测已完成

**算法概要**：

**状态机流程**：

```

站立/走 → [高度快速下降] → 疑似跌倒 → [持续躺姿] → 确认跌倒 → 告警

```

**判断要素**：

- 快速高度下降（>0.5m）
- 姿态突变（站/走 → 躺）
- 持续时间确认（3秒）

**实施步骤**：

1. 创建 fall_detect.c
2. 实现姿态历史缓冲区
3. 实现状态机逻辑
4. 实现跌倒判断规则
5. 实现告警输出
6. 模拟跌倒场景测试
7. 调整阈值参数
8. 验证误报率

---

## Phase 1B: 优化功能

### 第7章：杂波移除优化

**目标**：优化MTI参数，减少静态杂波

**实施方式**：配置优化，无需代码开发

**步骤**：

1. 阅读TI官方调优指南：
   - AWRL6844_CPD_&_SBR_Point_Cloud_Tuning_Guide.md
   - Parameter_Tuning_Guide_for_Intrusion_Detection_Demo.md
   - 3D_people_tracking_detection_layer_tuning_guide.md
2. 基于 health_detect_base.cfg 创建优化版本
3. 调整 clutterRemoval 参数
4. 调整 CFAR阈值
5. 优化帧率/检测范围
6. 测试不同参数的效果
7. 选择最优配置

---

### 第8章：多目标处理

**目标**：支持多人场景

**算法概要**：

- 点云聚类（DBSCAN算法）
- 为每个聚类执行姿态检测

**实施步骤**：

1. 创建 clustering.h 和 clustering.c
2. 实现DBSCAN算法（参考TI 3D People Tracking Demo）
3. 集成聚类到主流程
4. 为每个聚类执行姿态检测
5. 测试多人场景
6. 优化聚类参数
7. 验证多目标准确性

**参考文档**：

- 3D_people_tracking_demo_implementation_guide.md
- Tracking_radar_targets_with_multiple_reflection_points.md

---

## Phase 2: 扩展研究

### 第9章：区域划分

**目标**：划分床区和活动区

**实施步骤**：

1. 设计区域配置数据结构
2. 实现CLI命令配置区域坐标
3. 实现点云位置判断逻辑
4. 在TLV中输出区域信息
5. 测试不同区域配置
6. 验证区域判断准确性

---

### 第10章：呼吸检测研究

**目标**：尝试呼吸检测（研究性功能）

> ⚠️ **高风险研究**：需要DSS深度FFT分析

**实施思路**：

1. 研究微多普勒信号提取方法
2. 在DSS实现FFT分析
3. 提取呼吸频率特征
4. 实现相位变化检测
5. 测试呼吸检测准确性
6. 评估可行性

**风险提示**：可能做不出来，作为可选研究

---

### 第11章：综合测试与验收

**目标**：完整系统测试

**测试内容**：

1. 人存检测准确率测试
   - 测试场景：空房间、单人、多人
   - 验收标准：准确率 > 95%
2. 姿态检测准确率测试
   - 测试姿态：站、坐、躺、走
   - 验收标准：准确率 > 85%
3. 跌倒检测响应时间测试
   - 检测延迟 < 2秒
   - 误报率 < 5%
4. 长时间稳定性测试
   - 连续运行24小时无崩溃
   - 内存无泄漏
5. 多人场景测试
   - 支持2-3人同时检测
6. 性能测试
   - 帧率稳定
   - CPU占用合理

**产出**：《系统验收报告》

---

## 📋 实施检查清单

### Phase 0 完成标准

- [ ] SDK工程成功复制并编译
- [ ] 标准Demo验证通过
- [ ] DPC机制理解文档完成
- [ ] DSS算法扩展架构设计完成
- [ ] 目录结构规划完成

### Phase 1A 完成标准

- [ ] 人存检测准确率 > 95%
- [ ] 姿态检测准确率 > 85%
- [ ] 跌倒检测功能验证通过

### Phase 1B 完成标准

- [ ] 杂波有效减少
- [ ] 多人场景支持完成

### Phase 2 完成标准

- [ ] 区域划分功能验证
- [ ] 呼吸检测可行性评估完成
- [ ] 综合测试报告完成

---

## 📚 参考文档

### SDK相关

- mmWave SDK安装路径：`C:\ti\MMWAVE_L_SDK_06_01_00_01\`
- 标准Demo路径：`examples\mmw_demo\`
- xWRL6432参考代码：`知识库/Pose_And_Fall_Detection/src/xWRL6432/`

### TI官方指南

- AWRL6844 EVM User Guide (SWRU630)
- Point Cloud Tuning Guide
- Parameter Tuning Guide for Intrusion Detection
- 3D People Tracking Implementation Guide

### 项目文档

- [00-能力评估报告](./AWRL6844雷达健康检测-00-能力评估报告.md)
- [01-方案讨论与分析](./AWRL6844雷达健康检测-01-方案讨论与分析.md)
- [02-方案确认](./AWRL6844雷达健康检测-02-方案确认.md)

---

> 📌 **实施原则**：按章节顺序实施，不可跳过
> 🔥 **关键章节**：第3章架构演进规划是整个项目的基石
> ✅ **验收标准**：每章完成后必须达到完成标准才能进入下一章

```

```
