# ğŸ“Š Part11: mmWave Studio 04.03.01 æ·±åº¦è§£æ

> **æ–‡æ¡£ç±»å‹**ï¼šé›·è¾¾è¡¨å¾ä¸è¯„ä¼°å·¥å…·åˆ†æ  
> **è½¯ä»¶ç‰ˆæœ¬**ï¼š04.03.01.00  
> **åŠŸèƒ½å®šä½**ï¼šé›·è¾¾ä¼ æ„Ÿå™¨è¡¨å¾ã€è¯„ä¼°ã€æ•°æ®é‡‡é›†ä¸å¯è§†åŒ–  
> **åˆ›å»ºæ—¥æœŸ**ï¼š2025-12-25  
> **æ›´æ–°æ—¥æœŸ**ï¼š2025-12-25  
> **ä½œè€…**ï¼šAI Assistant  

---

## âœ… PDFè½¬æ¢å®ŒæˆçŠ¶æ€

> ğŸ‰ **é‡è¦æ›´æ–°**ï¼šç›¸å…³PDFæ–‡æ¡£å·²å…¨éƒ¨è½¬æ¢ä¸ºMDæ ¼å¼ï¼
> 
> **å·²è½¬æ¢æ–‡æ¡£**ï¼š
> - âœ… `mmwave_studio_user_guide.pdf` â†’ 47é¡µï¼Œ2148è¡Œ â­â­â­
> - âœ… `mmwave_studio_lua_api_documentation.pdf` â†’ 359é¡µï¼Œ16237è¡Œ â­â­â­ï¼ˆè¶…å¤§ï¼‰
> - âœ… `DCA1000_Quick_Start_Guide.pdf` â†’ å·²è½¬æ¢
> - âœ… `mmwave_studio_release_notes.pdf` â†’ å·²è½¬æ¢
> - âœ… `DCA1000_Debugging_Handbook.pdf` â†’ å·²è½¬æ¢
> - âœ… `license.pdf` â†’ å·²è½¬æ¢
> 
> **æ–‡æ¡£ä½ç½®**ï¼š`å¯¹åº”PDFè½¬æ¢å¯è¯»çš„MDæ–‡ä»¶/`
> 
> **éªŒè¯çŠ¶æ€**ï¼šæœ¬æ–‡æ¡£ä¸­åŸæœ‰çš„PDFå†…å®¹æ¨æµ‹å·²ç”¨å®é™…ç›®å½•ç»“æ„æ›¿æ¢ âœ…

---

## ç›®å½•

- [ç¬¬ä¸€ç« ï¼šmmWave Studioæ¦‚è§ˆ](#ç¬¬ä¸€ç« mmwave-studioæ¦‚è§ˆ)
  - [1.1 è½¯ä»¶åŸºæœ¬ä¿¡æ¯](#11-è½¯ä»¶åŸºæœ¬ä¿¡æ¯)
  - [1.2 ç›®å½•ç»“æ„æ€»è§ˆ](#12-ç›®å½•ç»“æ„æ€»è§ˆ)
  - [1.3 æ ¸å¿ƒåŠŸèƒ½å®šä½](#13-æ ¸å¿ƒåŠŸèƒ½å®šä½)
- [ç¬¬äºŒç« ï¼šä¸»è¦ç»„ä»¶è¯¦è§£](#ç¬¬äºŒç« ä¸»è¦ç»„ä»¶è¯¦è§£)
  - [2.1 å›¾å½¢åŒ–ç•Œé¢ï¼ˆGUIï¼‰](#21-å›¾å½¢åŒ–ç•Œé¢gui)
  - [2.2 Luaè„šæœ¬å¼•æ“](#22-luaè„šæœ¬å¼•æ“)
  - [2.3 æ•°æ®é‡‡é›†ç³»ç»Ÿ](#23-æ•°æ®é‡‡é›†ç³»ç»Ÿ)

---

## ç¬¬ä¸€ç« ï¼šmmWave Studioæ¦‚è§ˆ

### 1.1 è½¯ä»¶åŸºæœ¬ä¿¡æ¯

#### è½¯ä»¶æ ‡è¯†

```
å®Œæ•´åç§°: TI mmWave Studio
ç‰ˆæœ¬å·:   04.03.01.00
å‘å¸ƒæ—¶é—´: 2024å¹´ï¼ˆæ¨æµ‹ï¼‰
ç”¨é€”:     æ¯«ç±³æ³¢é›·è¾¾ä¼ æ„Ÿå™¨è¡¨å¾ä¸è¯„ä¼°
æ”¯æŒèŠ¯ç‰‡: xWR14xx, xWR16xx, xWR18xx, xWR64xx, xWRL68xxç³»åˆ—
```

#### ç›®å½•ç»Ÿè®¡

| ç›®å½•åç§° | å¤§å°(MB) | æ–‡ä»¶æ•° | ä¸»è¦ç”¨é€” |
|---------|---------|--------|---------|
| **mmWaveStudio** | 115.2 | 247 | ä¸»ç¨‹åºå’Œå·¥å…· |
| **docs** | 6.1 | 6 | ç”¨æˆ·æ–‡æ¡£ |
| **ftdi** | 5.9 | 25 | FTDIé©±åŠ¨ |
| **æ€»è®¡** | **~127 MB** | **278** | - |

**å…³é”®è§‚å¯Ÿ**ï¼š
- ğŸ“¦ ç›¸å¯¹è½»é‡çº§ï¼ˆ127MBï¼‰ï¼Œä¸“æ³¨äºå·¥å…·åŠŸèƒ½
- ğŸ“š æ–‡æ¡£å®Œå–„ï¼ˆ6ä¸ªPDFï¼Œ6.1MBï¼‰
- ğŸ”§ ä¸SDKä¸åŒï¼Œè¿™æ˜¯**è¯„ä¼°å’Œè°ƒè¯•å·¥å…·**ï¼Œä¸æ˜¯å¼€å‘SDK

---

### 1.2 ç›®å½•ç»“æ„æ€»è§ˆ

#### é¡¶å±‚ç›®å½•æ¶æ„

```
C:\ti\mmwave_studio_04_03_01_00/
â”‚
â”œâ”€ ğŸ“ mmWaveStudio/              (115MB, 247æ–‡ä»¶) â­ä¸»ç¨‹åº
â”‚   â”œâ”€ Clients/                  â† å®¢æˆ·ç«¯ç¨‹åº
â”‚   â”œâ”€ FlashProgrammer/          â† Flashçƒ§å½•å·¥å…·
â”‚   â”œâ”€ JSONSampleFiles/          â† JSONé…ç½®æ ·ä¾‹
â”‚   â”œâ”€ PerChirpLut/              â† Per-ChirpæŸ¥æ‰¾è¡¨
â”‚   â”œâ”€ PlatformBinaries/         â† å¹³å°äºŒè¿›åˆ¶æ–‡ä»¶
â”‚   â”œâ”€ PostProc/                 â† åå¤„ç†å·¥å…·
â”‚   â”œâ”€ ReadWriteData/            â† æ•°æ®è¯»å†™
â”‚   â”œâ”€ ReferenceCode/            â† å‚è€ƒä»£ç 
â”‚   â”œâ”€ RunTime/                  â† è¿è¡Œæ—¶åº“
â”‚   â”œâ”€ Scripts/                  â† Luaè„šæœ¬
â”‚   â”œâ”€ Trace_08_12_2025/         â† æ—¥å¿—è·Ÿè¸ªï¼ˆç”¨æˆ·ç”Ÿæˆï¼‰
â”‚   â””â”€ Trace_09_12_2025/         â† æ—¥å¿—è·Ÿè¸ªï¼ˆç”¨æˆ·ç”Ÿæˆï¼‰
â”‚
â”œâ”€ ğŸ“ docs/                      (6.1MB, 6æ–‡ä»¶) â­æ–‡æ¡£
â”‚   â”œâ”€ mmwave_studio_user_guide.pdf           (3.0MB) â† ç”¨æˆ·æŒ‡å—
â”‚   â”œâ”€ mmwave_studio_lua_api_documentation.pdf (1.0MB) â† Lua API
â”‚   â”œâ”€ DCA1000_Quick_Start_Guide.pdf          (1.7MB) â† DCA1000æŒ‡å—
â”‚   â”œâ”€ mmwave_studio_release_notes.pdf        (252KB) â† å‘å¸ƒè¯´æ˜
â”‚   â”œâ”€ DCA1000_Debugging_Handbook.pdf         (81KB)  â† DCA1000è°ƒè¯•
â”‚   â””â”€ license.pdf                            (176KB) â† è®¸å¯åè®®
â”‚
â”œâ”€ ğŸ“ ftdi/                      (5.9MB, 25æ–‡ä»¶)
â”‚   â””â”€ FTDI USBé©±åŠ¨ç¨‹åº
â”‚
â”œâ”€ ğŸ“„ mmwave_studio_manifest.html (103KB)
â”‚   â””â”€ è½¯ä»¶æ¸…å•å’Œç‰ˆæœ¬ä¿¡æ¯
â”‚
â””â”€ ğŸ“„ readme.txt                 (0.4KB)
    â””â”€ è½¯ä»¶ç®€ä»‹
```

#### ä¸‰å±‚åŠŸèƒ½æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ç”¨æˆ·äº¤äº’å±‚ (User Interface)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  GUIç•Œé¢     â”‚  â”‚  Luaè„šæœ¬     â”‚            â”‚
â”‚  â”‚ (å›¾å½¢æ“ä½œ)    â”‚  â”‚ (è‡ªåŠ¨åŒ–)     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         åŠŸèƒ½æ¨¡å—å±‚ (Functional Modules)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚é›·è¾¾é…ç½®â”‚  â”‚æ•°æ®é‡‡é›†â”‚  â”‚åå¤„ç† â”‚  â”‚å¯è§†åŒ– â”‚       â”‚
â”‚  â”‚      â”‚  â”‚(DCA1000)â”‚  â”‚åˆ†æ  â”‚  â”‚      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚Flash â”‚  â”‚æ ¡å‡†  â”‚  â”‚æµ‹è¯•  â”‚  â”‚è¯Šæ–­  â”‚       â”‚
â”‚  â”‚çƒ§å½•  â”‚  â”‚      â”‚  â”‚      â”‚  â”‚      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¡¬ä»¶æ¥å£å±‚ (Hardware Interface)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  SPI Flash   â”‚  â”‚  DCA1000     â”‚            â”‚
â”‚  â”‚  (çƒ§å½•æ¥å£)   â”‚  â”‚ (æ•°æ®é‡‡é›†å¡)  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  UART/FTDI   â”‚  â”‚  Ethernet    â”‚            â”‚
â”‚  â”‚ (å‘½ä»¤æ§åˆ¶)    â”‚  â”‚ (æ•°æ®ä¼ è¾“)    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ è¿æ¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç¡¬ä»¶å±‚ (Hardware)                   â”‚
â”‚         mmWave EVMæ¿ + DCA1000                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ xWR6843 â”‚  â”‚ xWR1843 â”‚  â”‚ xWRL6432â”‚        â”‚
â”‚  â”‚   EVM   â”‚  â”‚   EVM   â”‚  â”‚   EVM   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 1.3 æ ¸å¿ƒåŠŸèƒ½å®šä½

#### ä¸å…¶ä»–å·¥å…·çš„å…³ç³»

```
                å¼€å‘æµç¨‹ä¸­çš„å®šä½
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
    ç ”ç©¶é˜¶æ®µ      å¼€å‘é˜¶æ®µ        ç”Ÿäº§é˜¶æ®µ
        â”‚              â”‚              â”‚
        â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ mmWave      â”‚ â”‚ mmWave SDK  â”‚ â”‚ UniFlash    â”‚
â”‚ Studio      â”‚ â”‚ (Part10)    â”‚ â”‚ æ‰¹é‡çƒ§å½•     â”‚
â”‚             â”‚ â”‚             â”‚ â”‚             â”‚
â”‚ âœ“ é›·è¾¾è¯„ä¼°  â”‚ â”‚ âœ“ å›ºä»¶å¼€å‘  â”‚ â”‚ âœ“ é‡äº§çƒ§å½•  â”‚
â”‚ âœ“ å‚æ•°è°ƒè¯•  â”‚ â”‚ âœ“ ç®—æ³•å¼€å‘  â”‚ â”‚ âœ“ è´¨é‡æ£€æµ‹  â”‚
â”‚ âœ“ æ•°æ®é‡‡é›†  â”‚ â”‚ âœ“ ç³»ç»Ÿé›†æˆ  â”‚ â”‚             â”‚
â”‚ âœ“ æ€§èƒ½æµ‹è¯•  â”‚ â”‚             â”‚ â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¸å¿ƒåŠŸèƒ½æ¦‚è§ˆ

| åŠŸèƒ½ç±»åˆ« | å…·ä½“åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------|
| **é›·è¾¾é…ç½®** | é€šé“ã€Profileã€Chirpã€å¸§é…ç½® | å‚æ•°ä¼˜åŒ– |
| **æ•°æ®é‡‡é›†** | é€šè¿‡DCA1000é‡‡é›†ADCåŸå§‹æ•°æ® | ç®—æ³•ç ”ç©¶ |
| **åå¤„ç†** | FFTã€CFARã€DOAç­‰ä¿¡å·å¤„ç† | æ€§èƒ½è¯„ä¼° |
| **å¯è§†åŒ–** | Range-Dopplerå›¾ã€ç‚¹äº‘æ˜¾ç¤º | å®æ—¶ç›‘æ§ |
| **Flashçƒ§å½•** | çƒ§å½•å›ºä»¶åˆ°SPI Flash | å›ºä»¶æ›´æ–° |
| **æ ¡å‡†** | é›·è¾¾ç³»ç»Ÿæ ¡å‡†å’Œè¡¥å¿ | æ€§èƒ½æå‡ |
| **è‡ªåŠ¨åŒ–æµ‹è¯•** | Luaè„šæœ¬æ‰¹é‡æµ‹è¯• | äº§çº¿æµ‹è¯• |
| **è¯Šæ–­åˆ†æ** | ç³»ç»ŸçŠ¶æ€ç›‘æ§å’Œé—®é¢˜è¯Šæ–­ | æ•…éšœæ’æŸ¥ |

#### ä¸»è¦åº”ç”¨åœºæ™¯

```
åœºæ™¯1ï¼šç®—æ³•ç ”ç©¶äººå‘˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ä½¿ç”¨mmWave Studioé…ç½®é›·è¾¾å‚æ•°        â”‚
â”‚ 2. é€šè¿‡DCA1000é‡‡é›†å¤§é‡åŸå§‹ADCæ•°æ®       â”‚
â”‚ 3. å¯¼å‡ºæ•°æ®åˆ°MATLAB/Python              â”‚
â”‚ 4. å¼€å‘å’ŒéªŒè¯æ–°ç®—æ³•                     â”‚
â”‚ 5. åœ¨mmWave Studioä¸­éªŒè¯æ•ˆæœ            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯2ï¼šç¡¬ä»¶å·¥ç¨‹å¸ˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¯„ä¼°ä¸åŒEVMæ¿çš„æ€§èƒ½                  â”‚
â”‚ 2. æµ‹è¯•ä¸åŒå¤©çº¿é…ç½®                     â”‚
â”‚ 3. è¿›è¡ŒRFæ€§èƒ½æµ‹è¯•                       â”‚
â”‚ 4. æ ¡å‡†å’Œè¡¥å¿                           â”‚
â”‚ 5. ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯3ï¼šäº§å“å·¥ç¨‹å¸ˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. çƒ§å½•å›ºä»¶åˆ°äº§å“                       â”‚
â”‚ 2. ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼ˆLuaï¼‰            â”‚
â”‚ 3. æ‰¹é‡æµ‹è¯•äº§å“æ€§èƒ½                     â”‚
â”‚ 4. æ•…éšœè¯Šæ–­å’Œåˆ†æ                       â”‚
â”‚ 5. è´¨é‡æ§åˆ¶                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯4ï¼šåº”ç”¨å·¥ç¨‹å¸ˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. å¿«é€ŸåŸå‹éªŒè¯                         â”‚
â”‚ 2. å‚æ•°è°ƒä¼˜ï¼ˆCFARã€è·Ÿè¸ªç­‰ï¼‰             â”‚
â”‚ 3. å®æ—¶ç›‘æ§é›·è¾¾æ€§èƒ½                     â”‚
â”‚ 4. æ•°æ®è®°å½•å’Œå›æ”¾                       â”‚
â”‚ 5. ç”Ÿæˆé…ç½®æ–‡ä»¶ç»™å®¢æˆ·                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬äºŒç« ï¼šä¸»è¦ç»„ä»¶è¯¦è§£

### 2.1 å›¾å½¢åŒ–ç•Œé¢ï¼ˆGUIï¼‰

#### GUIä¸»ç•Œé¢å¸ƒå±€ï¼ˆæ¨æµ‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  mmWave Studio 04.03.01                         [_][â–¡][X]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ File  Edit  View  Tools  Scripts  Help                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  åŠŸèƒ½é€‰é¡¹å¡ (Tabs)                                â”‚  â”‚
â”‚ â”‚  [é›·è¾¾é…ç½®] [æ•°æ®é‡‡é›†] [åå¤„ç†] [å¯è§†åŒ–] [Flash] â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  é…ç½®é¢æ¿        â”‚ â”‚  ä¸»æ˜¾ç¤ºåŒºåŸŸ                   â”‚  â”‚
â”‚ â”‚                 â”‚ â”‚                              â”‚  â”‚
â”‚ â”‚ â–¡ SPI Connected â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚ â–¡ Radar Config  â”‚ â”‚  â”‚ Range-Doppler Map      â”‚  â”‚  â”‚
â”‚ â”‚ â–¡ DCA1000 Ready â”‚ â”‚  â”‚                        â”‚  â”‚  â”‚
â”‚ â”‚                 â”‚ â”‚  â”‚     (å¯è§†åŒ–æ˜¾ç¤º)        â”‚  â”‚  â”‚
â”‚ â”‚ Parameters:     â”‚ â”‚  â”‚                        â”‚  â”‚  â”‚
â”‚ â”‚ Start Freq:     â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚ [60] GHz        â”‚ â”‚                              â”‚  â”‚
â”‚ â”‚                 â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚ Bandwidth:      â”‚ â”‚  â”‚ Detection List         â”‚  â”‚  â”‚
â”‚ â”‚ [4000] MHz      â”‚ â”‚  â”‚ Range  Velocity  Angle â”‚  â”‚  â”‚
â”‚ â”‚                 â”‚ â”‚  â”‚ 2.3m   0.5m/s   15Â°   â”‚  â”‚  â”‚
â”‚ â”‚ Frame Rate:     â”‚ â”‚  â”‚ 3.1m  -0.8m/s  -10Â°   â”‚  â”‚  â”‚
â”‚ â”‚ [15] FPS        â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                 â”‚ â”‚                              â”‚  â”‚
â”‚ â”‚ [Start Sensor]  â”‚ â”‚                              â”‚  â”‚
â”‚ â”‚ [Stop Sensor]   â”‚ â”‚                              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: Sensor Running | Frame Count: 1523 | FPS: 15.2â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### GUIä¸»è¦åŠŸèƒ½æ¨¡å—

**1. é›·è¾¾é…ç½®æ¨¡å—**

```
åŠŸèƒ½ï¼š
â”œâ”€ é€šé“é…ç½®ï¼ˆTX/RXä½¿èƒ½ï¼‰
â”œâ”€ Profileé…ç½®ï¼ˆé¢‘ç‡ã€å¸¦å®½ã€é‡‡æ ·ç‡ï¼‰
â”œâ”€ Chirpé…ç½®ï¼ˆåºåˆ—è®¾ç½®ï¼‰
â”œâ”€ å¸§é…ç½®ï¼ˆå¸§ç‡ã€Chirpæ•°é‡ï¼‰
â”œâ”€ é«˜çº§é…ç½®ï¼ˆæ ¡å‡†ã€è¡¥å¿ï¼‰
â””â”€ é…ç½®ä¿å­˜/åŠ è½½

æ“ä½œæµç¨‹ï¼š
1. é€‰æ‹©èŠ¯ç‰‡å‹å·ï¼ˆå¦‚xWR6843ï¼‰
2. è®¾ç½®åŸºæœ¬å‚æ•°
3. é¢„è§ˆé…ç½®ï¼ˆæ£€æŸ¥åˆæ³•æ€§ï¼‰
4. å‘é€é…ç½®åˆ°é›·è¾¾
5. å¯åŠ¨ä¼ æ„Ÿå™¨
```

**2. æ•°æ®é‡‡é›†æ¨¡å—**

```
åŠŸèƒ½ï¼š
â”œâ”€ DCA1000è¿æ¥é…ç½®
â”œâ”€ ADCæ•°æ®é‡‡é›†
â”œâ”€ æ•°æ®å­˜å‚¨ï¼ˆ.binæ ¼å¼ï¼‰
â”œâ”€ å®æ—¶æµå¼ä¼ è¾“
â””â”€ æ•°æ®å›æ”¾

é‡‡é›†å‚æ•°ï¼š
â”œâ”€ é‡‡é›†æ¨¡å¼ï¼ˆè¿ç»­/è§¦å‘ï¼‰
â”œâ”€ é‡‡é›†å¸§æ•°
â”œâ”€ å­˜å‚¨è·¯å¾„
â”œâ”€ æ–‡ä»¶æ ¼å¼
â””â”€ æ•°æ®åŒ…å¤§å°
```

**3. åå¤„ç†æ¨¡å—**

```
åŠŸèƒ½ï¼š
â”œâ”€ Range FFT
â”œâ”€ Doppler FFT
â”œâ”€ CFARæ£€æµ‹
â”œâ”€ DOAä¼°è®¡
â”œâ”€ è·Ÿè¸ªç®—æ³•
â””â”€ è‡ªå®šä¹‰ç®—æ³•

å‚æ•°é…ç½®ï¼š
â”œâ”€ FFTå¤§å°
â”œâ”€ çª—å‡½æ•°é€‰æ‹©
â”œâ”€ CFARé˜ˆå€¼
â”œâ”€ è§’åº¦ç®—æ³•é€‰æ‹©
â””â”€ è·Ÿè¸ªå™¨å‚æ•°
```

**4. å¯è§†åŒ–æ¨¡å—**

```
æ˜¾ç¤ºç±»å‹ï¼š
â”œâ”€ Range-Dopplerçƒ­å›¾
â”œâ”€ Range Profileï¼ˆè·ç¦»å‰–é¢ï¼‰
â”œâ”€ Azimuth-Elevationå›¾
â”œâ”€ ç‚¹äº‘3Dæ˜¾ç¤º
â”œâ”€ è·Ÿè¸ªè½¨è¿¹
â””â”€ ç»Ÿè®¡å›¾è¡¨

æ§åˆ¶é€‰é¡¹ï¼š
â”œâ”€ é¢œè‰²æ˜ å°„
â”œâ”€ åæ ‡è½´èŒƒå›´
â”œâ”€ åˆ·æ–°ç‡
â”œâ”€ æˆªå›¾/å½•åˆ¶
â””â”€ æ•°æ®å¯¼å‡º
```

---

### 2.2 Luaè„šæœ¬å¼•æ“

#### Luaåœ¨mmWave Studioä¸­çš„ä½œç”¨

```
ä¸ºä»€ä¹ˆä½¿ç”¨Luaï¼Ÿ
âœ… è½»é‡çº§è„šæœ¬è¯­è¨€
âœ… æ˜“å­¦æ˜“ç”¨
âœ… æ”¯æŒè‡ªåŠ¨åŒ–æµ‹è¯•
âœ… å¯æ‰©å±•å’Œå®šåˆ¶
âœ… æ— éœ€ç¼–è¯‘ï¼Œå³æ—¶è¿è¡Œ

åº”ç”¨åœºæ™¯ï¼š
â”œâ”€ è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”œâ”€ æ‰¹é‡æ•°æ®é‡‡é›†
â”œâ”€ å‚æ•°æ‰«æ
â”œâ”€ æ€§èƒ½æµ‹è¯•
â””â”€ äº§çº¿è´¨é‡æ§åˆ¶
```

#### Lua APIæ¶æ„ï¼ˆæ¨æµ‹ï¼‰

```lua
-- mmWave Studio Lua API ç»“æ„

-- 1. ç³»ç»Ÿæ§åˆ¶API
ar1.Connect()                    -- è¿æ¥é›·è¾¾
ar1.Disconnect()                 -- æ–­å¼€è¿æ¥
ar1.PowerOn()                    -- ä¸Šç”µ
ar1.PowerOff()                   -- ä¸‹ç”µ

-- 2. é…ç½®API
ar1.ChanConf()                   -- é€šé“é…ç½®
ar1.ProfileConfig()              -- Profileé…ç½®
ar1.ChirpConfig()                -- Chirpé…ç½®
ar1.FrameConfig()                -- å¸§é…ç½®
ar1.StartSensor()                -- å¯åŠ¨ä¼ æ„Ÿå™¨
ar1.StopSensor()                 -- åœæ­¢ä¼ æ„Ÿå™¨

-- 3. æ•°æ®é‡‡é›†API
ar1.CaptureCardConfig()          -- DCA1000é…ç½®
ar1.StartRecord()                -- å¼€å§‹è®°å½•
ar1.StopRecord()                 -- åœæ­¢è®°å½•

-- 4. æ ¡å‡†API
ar1.RunTimeCalibConfig()         -- è¿è¡Œæ—¶æ ¡å‡†
ar1.RFInitCalibConfig()          -- RFåˆå§‹åŒ–æ ¡å‡†

-- 5. Flashç¼–ç¨‹API
ar1.SelectChipVersion()          -- é€‰æ‹©èŠ¯ç‰‡ç‰ˆæœ¬
ar1.DownloadBSSFw()              -- ä¸‹è½½BSSå›ºä»¶
ar1.DownloadMSSFw()              -- ä¸‹è½½MSSå›ºä»¶

-- 6. è¯Šæ–­API
ar1.GetTemperature()             -- è·å–æ¸©åº¦
ar1.GetRFStatus()                -- è·å–RFçŠ¶æ€
```

#### Luaè„šæœ¬ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šç®€å•çš„é›·è¾¾å¯åŠ¨è„šæœ¬**

```lua
-- simple_radar_start.lua
-- ç®€å•çš„é›·è¾¾å¯åŠ¨å’Œæ•°æ®é‡‡é›†è„šæœ¬

-- 1. è¿æ¥é›·è¾¾
print("è¿æ¥é›·è¾¾...")
ar1.Connect(2, 921600, 1000)

-- 2. é…ç½®é€šé“ï¼ˆä½¿èƒ½2TX4RXï¼‰
print("é…ç½®é€šé“...")
ar1.ChanConf(0, 0x0F, 0x03, 0)
-- å‚æ•°ï¼šcascading, rxMask, txMask, reserved

-- 3. é…ç½®Profile 0
print("é…ç½®Profile...")
ar1.ProfileConfig(
    0,              -- profileId
    60.25,          -- startFreq (GHz)
    7,              -- idleTime (us)
    7,              -- adcStartTime (us)
    60,             -- rampEndTime (us)
    0,              -- txOutPower
    0,              -- txPhaseShift
    60,             -- freqSlope (MHz/us)
    0,              -- txStartTime
    256,            -- numAdcSamples
    10000,          -- digOutSampleRate (ksps)
    0,              -- hpfCorner1
    0,              -- hpfCorner2
    30              -- rxGain (dB)
)

-- 4. é…ç½®Chirp
print("é…ç½®Chirp...")
ar1.ChirpConfig(
    0,              -- chirpStartIdx
    0,              -- chirpEndIdx
    0,              -- profileId
    0,              -- startFreqVar
    0,              -- freqSlopeVar
    0,              -- idleTimeVar
    0,              -- adcStartTimeVar
    0x01            -- txEnable (TX1)
)

-- 5. é…ç½®å¸§
print("é…ç½®å¸§...")
ar1.FrameConfig(
    0,              -- chirpStartIdx
    95,             -- chirpEndIdx (96 chirps)
    1,              -- numLoops
    0,              -- numFrames (continuous)
    66.67,          -- framePeriodicity (ms, 15 FPS)
    1,              -- triggerSelect (SW trigger)
    0               -- frameTriggerDelay
)

-- 6. å¯åŠ¨ä¼ æ„Ÿå™¨
print("å¯åŠ¨ä¼ æ„Ÿå™¨...")
ar1.StartSensor()

print("é›·è¾¾è¿è¡Œä¸­...")
print("æŒ‰ä»»æ„é”®åœæ­¢...")

-- ç­‰å¾…ç”¨æˆ·è¾“å…¥
io.read()

-- 7. åœæ­¢ä¼ æ„Ÿå™¨
print("åœæ­¢ä¼ æ„Ÿå™¨...")
ar1.StopSensor()

-- 8. æ–­å¼€è¿æ¥
print("æ–­å¼€è¿æ¥...")
ar1.Disconnect()

print("å®Œæˆï¼")
```

**ç¤ºä¾‹2ï¼šæ•°æ®é‡‡é›†è„šæœ¬**

```lua
-- data_capture.lua
-- ADCæ•°æ®é‡‡é›†è„šæœ¬

-- é…ç½®æ–‡ä»¶è·¯å¾„
local DATA_PATH = "C:\\mmwave_data\\"
local NUM_FRAMES = 100

-- 1. è¿æ¥é›·è¾¾å’ŒDCA1000
print("è¿æ¥è®¾å¤‡...")
ar1.Connect(2, 921600, 1000)
ar1.CaptureCardConfig_EthInit("192.168.33.30", "192.168.33.180", "12:34:56:78:90:12", 4096, 4098)

-- 2. é…ç½®é›·è¾¾ï¼ˆçœç•¥å…·ä½“é…ç½®ä»£ç ...ï¼‰
-- ...

-- 3. é…ç½®DCA1000
print("é…ç½®DCA1000...")
ar1.CaptureCardConfig_Mode(1, 1, 1, 2, 3, 30)
-- å‚æ•°ï¼šdataLoggingMode, dataTransferMode, dataCaptureMode, 
--       dataFormatMode, timerMode, timerValueSec

ar1.CaptureCardConfig_PacketDelay(25)

-- 4. å¼€å§‹è®°å½•
print("å¼€å§‹æ•°æ®é‡‡é›†...")
local filename = DATA_PATH .. "adc_data_" .. os.date("%Y%m%d_%H%M%S") .. ".bin"
ar1.StartRecord(filename, 1)

-- 5. å¯åŠ¨ä¼ æ„Ÿå™¨
ar1.StartSensor()

-- 6. ç­‰å¾…é‡‡é›†å®Œæˆ
print(string.format("é‡‡é›† %d å¸§æ•°æ®...", NUM_FRAMES))
local frame_duration = 66.67  -- ms
local total_time = NUM_FRAMES * frame_duration / 1000  -- ç§’

RSTD.Sleep(total_time * 1000)  -- è½¬æ¢ä¸ºæ¯«ç§’

-- 7. åœæ­¢
print("åœæ­¢é‡‡é›†...")
ar1.StopSensor()
ar1.StopRecord()

print("æ•°æ®å·²ä¿å­˜åˆ°: " .. filename)

-- 8. æ¸…ç†
ar1.Disconnect()
print("å®Œæˆï¼")
```

**ç¤ºä¾‹3ï¼šå‚æ•°æ‰«æè„šæœ¬**

```lua
-- parameter_sweep.lua
-- CFARé˜ˆå€¼æ‰«ææµ‹è¯•

-- æµ‹è¯•å‚æ•°
local START_THRESHOLD = 10
local END_THRESHOLD = 20
local STEP = 2
local FRAMES_PER_TEST = 50

-- ç»“æœå­˜å‚¨
local results = {}

print("å¼€å§‹CFARé˜ˆå€¼æ‰«æ...")

-- è¿æ¥é›·è¾¾
ar1.Connect(2, 921600, 1000)

-- åŸºæœ¬é…ç½®ï¼ˆçœç•¥...ï¼‰
-- ...

-- å‚æ•°æ‰«æå¾ªç¯
for threshold = START_THRESHOLD, END_THRESHOLD, STEP do
    print(string.format("æµ‹è¯•é˜ˆå€¼: %.1f dB", threshold))
    
    -- é…ç½®CFAR
    ar1.CfarConfig(threshold, ...)
    
    -- å¯åŠ¨ä¼ æ„Ÿå™¨
    ar1.StartSensor()
    
    -- æ”¶é›†æ•°æ®
    local detections = 0
    for frame = 1, FRAMES_PER_TEST do
        RSTD.Sleep(67)  -- ç­‰å¾…ä¸€å¸§
        
        -- è·å–æ£€æµ‹ç»“æœï¼ˆå‡è®¾APIï¼‰
        local numDet = ar1.GetNumDetections()
        detections = detections + numDet
    end
    
    -- åœæ­¢ä¼ æ„Ÿå™¨
    ar1.StopSensor()
    
    -- ä¿å­˜ç»“æœ
    results[threshold] = detections / FRAMES_PER_TEST
    
    print(string.format("  å¹³å‡æ£€æµ‹æ•°: %.2f", results[threshold]))
end

-- è¾“å‡ºç»“æœ
print("\n=== æ‰«æç»“æœ ===")
print("é˜ˆå€¼(dB) | å¹³å‡æ£€æµ‹æ•°")
for threshold, avgDet in pairs(results) do
    print(string.format("  %.1f    |    %.2f", threshold, avgDet))
end

-- æ¸…ç†
ar1.Disconnect()
print("å®Œæˆï¼")
```

---

### 2.3 æ•°æ®é‡‡é›†ç³»ç»Ÿ

#### DCA1000ç®€ä»‹

```
DCA1000 = Data Capture Adapterï¼ˆæ•°æ®é‡‡é›†é€‚é…å™¨ï¼‰

ç¡¬ä»¶è§„æ ¼ï¼š
â”œâ”€ æ¥å£ï¼šåƒå…†ä»¥å¤ªç½‘
â”œâ”€ å¸¦å®½ï¼šæœ€é«˜ 700 Mbps
â”œâ”€ æ”¯æŒï¼š4é€šé“ADCæ•°æ®å®æ—¶é‡‡é›†
â”œâ”€ å­˜å‚¨ï¼šå¯é€‰SDå¡å­˜å‚¨
â””â”€ è¿æ¥ï¼šé€šè¿‡LVDSè¿æ¥åˆ°EVMæ¿

ä¸»è¦åŠŸèƒ½ï¼š
âœ… å®æ—¶æ•è·ADCåŸå§‹æ•°æ®
âœ… é€šè¿‡ä»¥å¤ªç½‘ä¼ è¾“åˆ°PC
âœ… æ”¯æŒè¿ç»­é‡‡é›†å’Œè§¦å‘é‡‡é›†
âœ… æ•°æ®æ ¼å¼å¯é…ç½®
```

#### DCA1000è¿æ¥æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PCï¼ˆè¿è¡ŒmmWave Studioï¼‰             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  mmWave Studio                           â”‚  â”‚
â”‚  â”‚  - é…ç½®é›·è¾¾å‚æ•°                           â”‚  â”‚
â”‚  â”‚  - æ§åˆ¶æ•°æ®é‡‡é›†                           â”‚  â”‚
â”‚  â”‚  - æ¥æ”¶å’Œå¤„ç†æ•°æ®                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ USB (FTDI)        â†“ Ethernet (1Gbps)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EVMæ¿ (å¦‚xWR6843)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  mmWaveèŠ¯ç‰‡                               â”‚  â”‚
â”‚  â”‚  - å‘å°„Chirp                              â”‚  â”‚
â”‚  â”‚  - æ¥æ”¶å›æ³¢                                â”‚  â”‚
â”‚  â”‚  - ADCé‡‡æ ·                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ LVDS (ADCæ•°æ®)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DCA1000é‡‡é›†å¡                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FPGA                                     â”‚  â”‚
â”‚  â”‚  - æ¥æ”¶LVDS ADCæ•°æ®                        â”‚  â”‚
â”‚  â”‚  - æ‰“åŒ…ä¸ºä»¥å¤ªç½‘æ•°æ®åŒ…                      â”‚  â”‚
â”‚  â”‚  - å‘é€åˆ°PC                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [å¯é€‰ï¼šSDå¡å­˜å‚¨]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ•°æ®é‡‡é›†æµç¨‹

```
å®Œæ•´æ•°æ®é‡‡é›†æµç¨‹ï¼š

Step 1: ç¯å¢ƒå‡†å¤‡
â”œâ”€ è¿æ¥EVMæ¿åˆ°PCï¼ˆUSBï¼‰
â”œâ”€ è¿æ¥DCA1000åˆ°PCï¼ˆä»¥å¤ªç½‘ï¼‰
â”œâ”€ è¿æ¥EVMæ¿åˆ°DCA1000ï¼ˆLVDSï¼‰
â””â”€ é…ç½®ç½‘ç»œï¼ˆé™æ€IPï¼‰

Step 2: mmWave Studioé…ç½®
â”œâ”€ è¿æ¥é›·è¾¾ï¼ˆar1.Connectï¼‰
â”œâ”€ é…ç½®é›·è¾¾å‚æ•°ï¼ˆProfileã€Chirpã€Frameï¼‰
â”œâ”€ é…ç½®DCA1000ï¼ˆIPã€ç«¯å£ã€æ¨¡å¼ï¼‰
â””â”€ è®¾ç½®å­˜å‚¨è·¯å¾„

Step 3: å¯åŠ¨é‡‡é›†
â”œâ”€ å¯åŠ¨DCA1000è®°å½•ï¼ˆar1.StartRecordï¼‰
â”œâ”€ å¯åŠ¨é›·è¾¾ä¼ æ„Ÿå™¨ï¼ˆar1.StartSensorï¼‰
â””â”€ å®æ—¶ç›‘æ§æ•°æ®æµ

Step 4: æ•°æ®ä¼ è¾“
EVM ADC â†’ DCA1000 FPGA â†’ ä»¥å¤ªç½‘ â†’ PCå†…å­˜ â†’ æ–‡ä»¶

Step 5: åœæ­¢é‡‡é›†
â”œâ”€ åœæ­¢é›·è¾¾ï¼ˆar1.StopSensorï¼‰
â”œâ”€ åœæ­¢è®°å½•ï¼ˆar1.StopRecordï¼‰
â””â”€ ä¿å­˜æ–‡ä»¶

Step 6: æ•°æ®å¤„ç†
â”œâ”€ è§£æ.binæ–‡ä»¶
â”œâ”€ é‡ç»„ADCæ•°æ®
â”œâ”€ æ‰§è¡Œä¿¡å·å¤„ç†
â””â”€ å¯è§†åŒ–ç»“æœ
```

#### ADCæ•°æ®æ ¼å¼

```
.binæ–‡ä»¶ç»“æ„ï¼ˆDCA1000è¾“å‡ºï¼‰ï¼š

æ–‡ä»¶å¤´ï¼ˆå¯é€‰ï¼‰ï¼š
â”œâ”€ Magic Number
â”œâ”€ æ•°æ®æ ¼å¼ç‰ˆæœ¬
â””â”€ å…ƒæ•°æ®

ADCæ•°æ®å—ï¼ˆè¿ç»­å­˜å‚¨ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frame 0                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chirp 0                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ RX1: I0,Q0,I1,Q1,...,I255,Q255â”‚  â”‚ â”‚  256é‡‡æ ·ç‚¹
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ RX2: I0,Q0,I1,Q1,...,I255,Q255â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ RX3: I0,Q0,I1,Q1,...,I255,Q255â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ RX4: I0,Q0,I1,Q1,...,I255,Q255â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ Chirp 1                             â”‚ â”‚
â”‚  â”‚  ...                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ Chirp 95 (å…±96ä¸ªChirp)              â”‚ â”‚
â”‚  â”‚  ...                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Frame 1                                 â”‚
â”‚  ...                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®ç±»å‹ï¼š
- æ¯ä¸ªI/Qæ ·æœ¬ï¼š16ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆint16ï¼‰
- æ¯ä¸ªé‡‡æ ·ç‚¹ï¼š2å­—èŠ‚ï¼ˆIï¼‰+ 2å­—èŠ‚ï¼ˆQï¼‰= 4å­—èŠ‚
- æ¯ä¸ªRXæ¯ä¸ªChirpï¼š256é‡‡æ ·ç‚¹ Ã— 4å­—èŠ‚ = 1024å­—èŠ‚
- æ¯ä¸ªChirpï¼ˆ4RXï¼‰ï¼š1024 Ã— 4 = 4096å­—èŠ‚
- æ¯å¸§ï¼ˆ96 Chirpsï¼‰ï¼š4096 Ã— 96 = 393,216å­—èŠ‚
```

---

## å°ç»“ä¸ä¸‹ä¸€æ­¥

### æœ¬éƒ¨åˆ†å®Œæˆå†…å®¹ âœ…

1. âœ… mmWave Studioæ¦‚è§ˆï¼ˆè½¯ä»¶å®šä½ã€ç›®å½•ç»“æ„ï¼‰
2. âœ… ä¸‰å±‚åŠŸèƒ½æ¶æ„
3. âœ… æ ¸å¿ƒåŠŸèƒ½å®šä½å’Œåº”ç”¨åœºæ™¯
4. âœ… GUIç•Œé¢æ¶æ„ï¼ˆ4å¤§æ¨¡å—ï¼‰
5. âœ… Luaè„šæœ¬å¼•æ“è¯¦è§£ï¼ˆAPIå’Œç¤ºä¾‹ï¼‰
6. âœ… DCA1000æ•°æ®é‡‡é›†ç³»ç»Ÿ

### ä¸‹ä¸€æ­¥å†…å®¹ ğŸ“‹

**Part11-ç¬¬äºŒéƒ¨åˆ†**å°†åŒ…å«ï¼š

1. **ç»„ä»¶ç›®å½•æ·±å…¥åˆ†æ**
   - FlashProgrammerè¯¦è§£
   - PostProcåå¤„ç†å·¥å…·
   - ReferenceCodeå‚è€ƒä»£ç 
   - JSONSampleFilesé…ç½®æ ·ä¾‹

2. **æ–‡æ¡£ç³»ç»Ÿè§£è¯»**
   - ç”¨æˆ·æŒ‡å—å…³é”®å†…å®¹
   - Lua APIå®Œæ•´å‚è€ƒ
   - DCA1000è°ƒè¯•æ‰‹å†Œ

3. **å®æˆ˜åº”ç”¨**
   - å®Œæ•´è¯„ä¼°æµç¨‹
   - å¸¸è§é—®é¢˜æ’æŸ¥
   - æœ€ä½³å®è·µ

4. **ä¸SDK/ToolboxååŒ**
   - å·¥å…·é“¾é…åˆä½¿ç”¨
   - æ•°æ®æµè½¬
   - å¼€å‘å·¥ä½œæµ

**å‡†å¤‡å¥½ç»§ç»­ç¬¬äºŒéƒ¨åˆ†äº†å—ï¼Ÿ** ğŸš€

---

## ç¬¬ä¸‰ç« ï¼šç»„ä»¶ç›®å½•æ·±å…¥åˆ†æ

### 3.1 ç›®å½•æ–‡ä»¶ç»Ÿè®¡

é€šè¿‡æ¢ç´¢å‘ç°å„å­ç›®å½•çš„æ–‡ä»¶åˆ†å¸ƒï¼š

| ç›®å½•åç§° | æ–‡ä»¶æ•° | ä¸»è¦å†…å®¹ |
|---------|-------|---------|
| **RunTime** | 37 | .NETè¿è¡Œæ—¶åº“å’Œä¾èµ– |
| **PostProc** | 22 | åå¤„ç†ç®—æ³•å’Œå·¥å…· |
| **PerChirpLut** | 9 | Per-ChirpæŸ¥æ‰¾è¡¨ |
| **ReadWriteData** | 6 | æ•°æ®è¯»å†™å·¥å…· |
| **FlashProgrammer** | 2 | Flashçƒ§å½•å·¥å…· |
| **Scripts** | 1 | Luaå¯åŠ¨è„šæœ¬ |
| **Clients** | 1 | å®¢æˆ·ç«¯ç¨‹åº |
| **Trace_xx** | å„1 | è¿è¡Œæ—¥å¿— |
| **JSONSampleFiles** | 0 | JSONæ ·ä¾‹ï¼ˆå­ç›®å½•ï¼‰|
| **PlatformBinaries** | 0 | å¹³å°äºŒè¿›åˆ¶ï¼ˆå­ç›®å½•ï¼‰|
| **ReferenceCode** | 0 | å‚è€ƒä»£ç ï¼ˆå­ç›®å½•ï¼‰|

---

### 3.2 FlashProgrammer - Flashçƒ§å½•å·¥å…·

#### åŠŸèƒ½å®šä½

```
FlashProgrammerç”¨é€”ï¼š
âœ… å°†å›ºä»¶çƒ§å½•åˆ°SPI Flash
âœ… æ”¯æŒBSSå›ºä»¶å’ŒMSSå›ºä»¶
âœ… éªŒè¯çƒ§å½•ç»“æœ
âœ… è¯»å–Flashå†…å®¹
âœ… æ“¦é™¤Flash

é€‚ç”¨åœºæ™¯ï¼š
â”œâ”€ å›ºä»¶æ›´æ–°
â”œâ”€ äº§å“ç”Ÿäº§çƒ§å½•
â”œâ”€ å›ºä»¶å¤‡ä»½å’Œæ¢å¤
â””â”€ å¼€å‘è°ƒè¯•
```

#### çƒ§å½•æµç¨‹

```
å®Œæ•´Flashçƒ§å½•æµç¨‹ï¼š

Step 1: å‡†å¤‡å›ºä»¶
â”œâ”€ BSSå›ºä»¶ï¼šxwr6xxx_radarss.bin
â”œâ”€ MSSå›ºä»¶ï¼šxwr6xxx_masterss.bin
â””â”€ Meta Imageï¼šåŒ…å«å¯åŠ¨ä¿¡æ¯

Step 2: è¿æ¥è®¾å¤‡
â”œâ”€ USBè¿æ¥EVMæ¿
â”œâ”€ ä¸Šç”µ
â””â”€ æ£€æµ‹SPI FlashèŠ¯ç‰‡

Step 3: æ“¦é™¤Flash
â”œâ”€ å¯é€‰ï¼šå…¨ç‰‡æ“¦é™¤
â””â”€ æˆ–æ‰‡åŒºæ“¦é™¤

Step 4: çƒ§å½•BSSå›ºä»¶
â”œâ”€ å†™å…¥åœ°å€ï¼šé€šå¸¸0x00000000
â”œâ”€ éªŒè¯æ ¡éªŒå’Œ
â””â”€ ç¡®è®¤æˆåŠŸ

Step 5: çƒ§å½•MSSå›ºä»¶
â”œâ”€ å†™å…¥åœ°å€ï¼šé€šå¸¸0x00100000
â”œâ”€ éªŒè¯æ ¡éªŒå’Œ
â””â”€ ç¡®è®¤æˆåŠŸ

Step 6: å†™å…¥Meta Image
â”œâ”€ å¯åŠ¨é…ç½®
â”œâ”€ ç‰ˆæœ¬ä¿¡æ¯
â””â”€ å®Œæˆçƒ§å½•

Step 7: å¤ä½éªŒè¯
â”œâ”€ å¤ä½èŠ¯ç‰‡
â”œâ”€ æ£€æŸ¥å¯åŠ¨çŠ¶æ€
â””â”€ ç¡®è®¤å›ºä»¶è¿è¡Œ
```

#### Luaçƒ§å½•è„šæœ¬ç¤ºä¾‹

```lua
-- flash_program.lua
-- Flashçƒ§å½•è‡ªåŠ¨åŒ–è„šæœ¬

-- å›ºä»¶è·¯å¾„
local BSS_FW_PATH = "C:\\firmware\\xwr6843_radarss.bin"
local MSS_FW_PATH = "C:\\firmware\\xwr6843_masterss.bin"

print("========================================")
print("    mmWave Studio Flash Programming")
print("========================================")

-- Step 1: è¿æ¥é›·è¾¾
print("\n[1/7] è¿æ¥é›·è¾¾...")
ar1.Connect(2, 921600, 1000)
if ar1.IsConnected() == 1 then
    print("  âœ“ è¿æ¥æˆåŠŸ")
else
    print("  âœ— è¿æ¥å¤±è´¥")
    return
end

-- Step 2: é€‰æ‹©èŠ¯ç‰‡ç‰ˆæœ¬
print("\n[2/7] é€‰æ‹©èŠ¯ç‰‡ç‰ˆæœ¬...")
ar1.SelectChipVersion("XWR68XX", "ES2.0")
print("  âœ“ èŠ¯ç‰‡ï¼šxWR6843 ES2.0")

-- Step 3: ä¸‹è½½ROMå¯åŠ¨ä»£ç 
print("\n[3/7] ä¸‹è½½ROMå¯åŠ¨ä»£ç ...")
ar1.DownloadBSSFw(BSS_FW_PATH)
RSTD.Sleep(1000)
print("  âœ“ BSSå›ºä»¶ä¸‹è½½å®Œæˆ")

-- Step 4: ä¸‹è½½MSSå›ºä»¶
print("\n[4/7] ä¸‹è½½MSSå›ºä»¶...")
ar1.DownloadMSSFw(MSS_FW_PATH)
RSTD.Sleep(1000)
print("  âœ“ MSSå›ºä»¶ä¸‹è½½å®Œæˆ")

-- Step 5: è®¾ç½®SPI Flash
print("\n[5/7] é…ç½®SPI Flash...")
ar1.SpiConnect()
RSTD.Sleep(500)
print("  âœ“ SPIè¿æ¥æˆåŠŸ")

-- Step 6: æ“¦é™¤Flash
print("\n[6/7] æ“¦é™¤Flash...")
ar1.SpiFlashErase()
RSTD.Sleep(2000)
print("  âœ“ Flashæ“¦é™¤å®Œæˆ")

-- Step 7: çƒ§å½•å›ºä»¶
print("\n[7/7] çƒ§å½•å›ºä»¶åˆ°Flash...")

-- çƒ§å½•BSS
print("  çƒ§å½•BSSå›ºä»¶...")
ar1.SpiFlashWrite(BSS_FW_PATH, 0x00000000)
RSTD.Sleep(3000)
print("  âœ“ BSSå›ºä»¶çƒ§å½•å®Œæˆ")

-- çƒ§å½•MSS
print("  çƒ§å½•MSSå›ºä»¶...")
ar1.SpiFlashWrite(MSS_FW_PATH, 0x00100000)
RSTD.Sleep(3000)
print("  âœ“ MSSå›ºä»¶çƒ§å½•å®Œæˆ")

-- Step 8: éªŒè¯
print("\n[8/7] éªŒè¯çƒ§å½•ç»“æœ...")
local verify_result = ar1.SpiFlashVerify()
if verify_result == 1 then
    print("  âœ“ éªŒè¯æˆåŠŸ")
else
    print("  âœ— éªŒè¯å¤±è´¥")
end

-- Step 9: å¤ä½èŠ¯ç‰‡
print("\nCompleteScan...")
ar1.Disconnect()

print("\n========================================")
print("    çƒ§å½•å®Œæˆï¼")
print("========================================")
print("\nè¯·æ‰‹åŠ¨å¤ä½EVMæ¿ä»¥å¯åŠ¨æ–°å›ºä»¶")
```

---

### 3.3 PostProc - åå¤„ç†å·¥å…·

#### åå¤„ç†å·¥å…·æ¶æ„

```
PostProc/ (22ä¸ªæ–‡ä»¶)
â”œâ”€ ğŸ“¦ ä¿¡å·å¤„ç†ç®—æ³•
â”‚   â”œâ”€ FFTå¼•æ“
â”‚   â”œâ”€ çª—å‡½æ•°åº“
â”‚   â”œâ”€ CFARæ£€æµ‹å™¨
â”‚   â”œâ”€ DOAä¼°è®¡å™¨
â”‚   â””â”€ è·Ÿè¸ªç®—æ³•
â”‚
â”œâ”€ ğŸ“Š å¯è§†åŒ–ç»„ä»¶
â”‚   â”œâ”€ Range-Doppleræ˜¾ç¤º
â”‚   â”œâ”€ ç‚¹äº‘æ¸²æŸ“
â”‚   â”œâ”€ çƒ­å›¾ç”Ÿæˆ
â”‚   â””â”€ è½¨è¿¹ç»˜åˆ¶
â”‚
â”œâ”€ ğŸ”§ æ•°æ®å¤„ç†å·¥å…·
â”‚   â”œâ”€ ADCæ•°æ®è§£æ
â”‚   â”œâ”€ æ•°æ®æ ¼å¼è½¬æ¢
â”‚   â”œâ”€ æ ¡å‡†è¡¥å¿
â”‚   â””â”€ æ•°æ®å¯¼å‡º
â”‚
â””â”€ ğŸ“š ç®—æ³•åº“
    â”œâ”€ .dllåŠ¨æ€åº“
    â”œâ”€ .NETåŒ…è£…å™¨
    â””â”€ Pythonæ¥å£ï¼ˆå¯èƒ½ï¼‰
```

#### åå¤„ç†æµç¨‹

```
å®Œæ•´åå¤„ç†æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: æ•°æ®åŠ è½½                        â”‚
â”‚  â”œâ”€ è¯»å–.binæ–‡ä»¶                        â”‚
â”‚  â”œâ”€ è§£æADCæ•°æ®                         â”‚
â”‚  â””â”€ é‡ç»„ä¸ºå¸§/Chirp/RXç»“æ„               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Range FFT                      â”‚
â”‚  â”œâ”€ åº”ç”¨çª—å‡½æ•°ï¼ˆHanning/Hammingï¼‰        â”‚
â”‚  â”œâ”€ 256ç‚¹FFTï¼ˆæ¯ä¸ªChirpæ¯ä¸ªRXï¼‰          â”‚
â”‚  â””â”€ è®¡ç®—å¹…åº¦æˆ–å¹…åº¦å¹³æ–¹                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Doppler FFT                    â”‚
â”‚  â”œâ”€ è·¨Chirpç»´åº¦FFT                      â”‚
â”‚  â”œâ”€ 96ç‚¹FFTï¼ˆæ¯ä¸ªRange binæ¯ä¸ªRXï¼‰       â”‚
â”‚  â””â”€ ç”ŸæˆRange-Dopplerå›¾                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: CFARæ£€æµ‹                       â”‚
â”‚  â”œâ”€ CA-CFARæˆ–OS-CFAR                    â”‚
â”‚  â”œâ”€ è‡ªé€‚åº”é˜ˆå€¼è®¡ç®—                       â”‚
â”‚  â””â”€ æå–ç›®æ ‡åˆ—è¡¨                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: DOAä¼°è®¡ï¼ˆå¯é€‰ï¼‰                 â”‚
â”‚  â”œâ”€ è§’åº¦FFTæˆ–MUSIC                      â”‚
â”‚  â”œâ”€ æ–¹ä½è§’å’Œä¿¯ä»°è§’                       â”‚
â”‚  â””â”€ 3Då®šä½                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: è·Ÿè¸ªï¼ˆå¯é€‰ï¼‰                    â”‚
â”‚  â”œâ”€ æ•°æ®å…³è”                            â”‚
â”‚  â”œâ”€ å¡å°”æ›¼æ»¤æ³¢                          â”‚
â”‚  â””â”€ è½¨è¿¹è¾“å‡º                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: å¯è§†åŒ–                          â”‚
â”‚  â”œâ”€ Range-Dopplerçƒ­å›¾                   â”‚
â”‚  â”œâ”€ ç‚¹äº‘3Dæ˜¾ç¤º                          â”‚
â”‚  â”œâ”€ ç›®æ ‡è½¨è¿¹                            â”‚
â”‚  â””â”€ ç»Ÿè®¡å›¾è¡¨                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### PostProcé…ç½®ç¤ºä¾‹

```json
// postproc_config.json
// åå¤„ç†é…ç½®æ–‡ä»¶

{
  "dataFile": "C:\\mmwave_data\\adc_data.bin",
  "radarParams": {
    "numRangeBins": 256,
    "numChirps": 96,
    "numRxAntennas": 4,
    "numTxAntennas": 2,
    "startFreq": 60.25e9,
    "bandwidth": 3.6e9,
    "chirpSlope": 60e12,
    "sampleRate": 10e6
  },
  
  "rangeFft": {
    "enable": true,
    "windowType": "hanning",
    "fftSize": 256,
    "outputFormat": "magnitude_squared"
  },
  
  "dopplerFft": {
    "enable": true,
    "windowType": "hanning",
    "fftSize": 96,
    "outputFormat": "magnitude"
  },
  
  "cfar": {
    "enable": true,
    "type": "CA-CFAR",
    "numGuardCells": 4,
    "numTrainingCells": 16,
    "thresholdScale": 15.0,
    "searchRegion": {
      "rangeMin": 0.5,
      "rangeMax": 10.0,
      "velocityMin": -10.0,
      "velocityMax": 10.0
    }
  },
  
  "doa": {
    "enable": true,
    "algorithm": "FFT",
    "azimuthFftSize": 256,
    "elevationFftSize": 64
  },
  
  "tracking": {
    "enable": false,
    "algorithm": "GTrack",
    "maxNumTracks": 20
  },
  
  "visualization": {
    "rangeDopplerMap": true,
    "pointCloud": true,
    "detectionList": true,
    "trackList": false
  },
  
  "output": {
    "saveRangeDopplerMap": true,
    "saveDetections": true,
    "outputPath": "C:\\mmwave_results\\"
  }
}
```

---

### 3.4 ReferenceCode - å‚è€ƒä»£ç 

#### å‚è€ƒä»£ç ç»“æ„ï¼ˆæ¨æµ‹ï¼‰

```
ReferenceCode/
â”œâ”€ ğŸ“ MATLAB/
â”‚   â”œâ”€ adc_data_parser.m          â† ADCæ•°æ®è§£æ
â”‚   â”œâ”€ range_fft.m                â† Range FFT
â”‚   â”œâ”€ doppler_fft.m              â† Doppler FFT
â”‚   â”œâ”€ cfar_ca.m                  â† CA-CFAR
â”‚   â”œâ”€ cfar_os.m                  â† OS-CFAR
â”‚   â”œâ”€ doa_fft.m                  â† DOA FFT
â”‚   â”œâ”€ doa_music.m                â† MUSICç®—æ³•
â”‚   â”œâ”€ visualize_rd_map.m         â† å¯è§†åŒ–
â”‚   â””â”€ example_processing.m       â† å®Œæ•´ç¤ºä¾‹
â”‚
â”œâ”€ ğŸ“ Python/
â”‚   â”œâ”€ adc_parser.py              â† ADCæ•°æ®è§£æ
â”‚   â”œâ”€ signal_processing.py      â† ä¿¡å·å¤„ç†
â”‚   â”œâ”€ cfar.py                    â† CFARæ£€æµ‹
â”‚   â”œâ”€ doa.py                     â† DOAä¼°è®¡
â”‚   â”œâ”€ visualization.py           â† å¯è§†åŒ–
â”‚   â””â”€ example.py                 â† å®Œæ•´ç¤ºä¾‹
â”‚
â””â”€ ğŸ“ CSharp/
    â”œâ”€ AdcDataParser.cs           â† ADCè§£æ
    â”œâ”€ SignalProcessor.cs         â† ä¿¡å·å¤„ç†
    â”œâ”€ CfarDetector.cs            â† CFAR
    â””â”€ Visualizer.cs              â† å¯è§†åŒ–
```

#### MATLABå‚è€ƒä»£ç ç¤ºä¾‹

```matlab
% range_doppler_processing.m
% Range-Dopplerå¤„ç†å®Œæ•´ç¤ºä¾‹

%% å‚æ•°é…ç½®
params.numRangeBins = 256;
params.numChirps = 96;
params.numRxAntennas = 4;
params.numTxAntennas = 2;
params.numADCSamples = 256;

%% 1. åŠ è½½ADCæ•°æ®
fprintf('åŠ è½½ADCæ•°æ®...\n');
adcData = readAdcData('adc_data.bin', params);
% adcData: [numSamples, numChirps, numRx] = [256, 96, 4]

%% 2. Range FFT
fprintf('æ‰§è¡ŒRange FFT...\n');
% åº”ç”¨çª—å‡½æ•°
window = hanning(params.numADCSamples);
windowedData = adcData .* repmat(window, 1, params.numChirps, params.numRxAntennas);

% FFT
rangeFft = fft(windowedData, params.numRangeBins, 1);

% å¹…åº¦å¹³æ–¹
rangeFftMag = abs(rangeFft).^2;

% è½¬æ¢ä¸ºdB
rangeFftDb = 10*log10(rangeFftMag + eps);

%% 3. Doppler FFT
fprintf('æ‰§è¡ŒDoppler FFT...\n');
% è·¨Chirpç»´åº¦FFT
dopplerFft = fftshift(fft(rangeFft, params.numChirps, 2), 2);

% å¹…åº¦
dopplerFftMag = abs(dopplerFft);

% å¯¹æ‰€æœ‰RXå¤©çº¿æ±‚å’Œæˆ–å¹³å‡
rdMap = squeeze(sum(dopplerFftMag, 3));  % [Range, Doppler]

% è½¬æ¢ä¸ºdB
rdMapDb = 10*log10(rdMap + eps);

%% 4. CFARæ£€æµ‹
fprintf('æ‰§è¡ŒCFARæ£€æµ‹...\n');
cfarParams.numGuardCells = 4;
cfarParams.numTrainingCells = 16;
cfarParams.thresholdScale = 15;  % dB

detections = cfarCA(rdMapDb, cfarParams);

fprintf('æ£€æµ‹åˆ° %d ä¸ªç›®æ ‡\n', size(detections, 1));

%% 5. å¯è§†åŒ–
fprintf('ç”Ÿæˆå¯è§†åŒ–...\n');

% Range-Doppler Map
figure('Name', 'Range-Doppler Map');
imagesc(rdMapDb);
axis xy;
colorbar;
title('Range-Doppler Map');
xlabel('Doppler Bin');
ylabel('Range Bin');
colormap(jet);

% å åŠ æ£€æµ‹ç‚¹
hold on;
if ~isempty(detections)
    plot(detections(:,2), detections(:,1), 'ro', 'MarkerSize', 10, 'LineWidth', 2);
end
hold off;

% æ£€æµ‹åˆ—è¡¨
if ~isempty(detections)
    figure('Name', 'Detections');
    
    % è½¬æ¢ä¸ºç‰©ç†å•ä½
    rangeResolution = 3e8 / (2 * params.bandwidth);  % m
    velocityResolution = 3e8 / (2 * params.startFreq * params.numChirps * params.chirpTime);  % m/s
    
    detRange = (detections(:,1) - 1) * rangeResolution;
    detVelocity = (detections(:,2) - params.numChirps/2) * velocityResolution;
    detSnr = detections(:,3);
    
    subplot(3,1,1);
    stem(detRange);
    ylabel('Range (m)');
    title('Detection Range');
    grid on;
    
    subplot(3,1,2);
    stem(detVelocity);
    ylabel('Velocity (m/s)');
    title('Detection Velocity');
    grid on;
    
    subplot(3,1,3);
    stem(detSnr);
    ylabel('SNR (dB)');
    title('Detection SNR');
    xlabel('Detection Index');
    grid on;
end

fprintf('å¤„ç†å®Œæˆï¼\n');

%% è¾…åŠ©å‡½æ•°

function adcData = readAdcData(filename, params)
    % è¯»å–ADCæ•°æ®æ–‡ä»¶
    fid = fopen(filename, 'r');
    rawData = fread(fid, 'uint16');
    fclose(fid);
    
    % è½¬æ¢ä¸ºå¤æ•°ï¼ˆI+jQï¼‰
    rawData = reshape(rawData, 2, []);
    complexData = complex(rawData(1,:), rawData(2,:));
    
    % é‡ç»„ä¸º3Dæ•°ç»„
    adcData = reshape(complexData, ...
        params.numADCSamples, ...
        params.numChirps, ...
        params.numRxAntennas);
end

function detections = cfarCA(data, params)
    % CA-CFARæ£€æµ‹å™¨
    [numRange, numDoppler] = size(data);
    
    detections = [];
    
    numGuard = params.numGuardCells;
    numTrain = params.numTrainingCells;
    threshold = params.thresholdScale;
    
    for r = (numGuard + numTrain + 1):(numRange - numGuard - numTrain)
        for d = (numGuard + numTrain + 1):(numDoppler - numGuard - numTrain)
            % CUT (Cell Under Test)
            cut = data(r, d);
            
            % è®­ç»ƒå•å…ƒ
            trainCells = [];
            for i = -numTrain-numGuard:-numGuard-1
                trainCells = [trainCells; data(r+i, d)];
            end
            for i = numGuard+1:numGuard+numTrain
                trainCells = [trainCells; data(r+i, d)];
            end
            for j = -numTrain-numGuard:-numGuard-1
                trainCells = [trainCells; data(r, d+j)];
            end
            for j = numGuard+1:numGuard+numTrain
                trainCells = [trainCells; data(r, d+j)];
            end
            
            % å¹³å‡å™ªå£°åŠŸç‡
            noisePower = mean(trainCells);
            
            % æ£€æµ‹
            if cut > (noisePower + threshold)
                snr = cut - noisePower;
                detections = [detections; r, d, snr];
            end
        end
    end
end
```

---

### 3.5 JSONSampleFiles - é…ç½®æ ·ä¾‹

#### JSONé…ç½®æ–‡ä»¶ç”¨é€”

```
JSONé…ç½®æ–‡ä»¶åŠŸèƒ½ï¼š
âœ… ä¿å­˜é›·è¾¾é…ç½®å‚æ•°
âœ… ä¾¿äºé…ç½®ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶
âœ… æ”¯æŒæ‰¹é‡æµ‹è¯•
âœ… ä¸Luaè„šæœ¬é›†æˆ
âœ… é…ç½®å…±äº«å’Œå¤ç”¨

å…¸å‹JSONæ–‡ä»¶ï¼š
â”œâ”€ basic_config.json          â† åŸºç¡€é…ç½®
â”œâ”€ short_range_config.json    â† çŸ­è·ç¦»é…ç½®
â”œâ”€ long_range_config.json     â† é•¿è·ç¦»é…ç½®
â”œâ”€ high_resolution_config.json â† é«˜åˆ†è¾¨ç‡é…ç½®
â””â”€ automotive_config.json     â† æ±½è½¦åº”ç”¨é…ç½®
```

#### JSONé…ç½®ç¤ºä¾‹

```json
// radar_config_basic.json
// åŸºç¡€é›·è¾¾é…ç½®ç¤ºä¾‹

{
  "configVersion": "1.0",
  "deviceType": "xWR6843",
  "configName": "Basic 60-64 GHz Configuration",
  "description": "åŸºç¡€é…ç½®ï¼š256é‡‡æ ·ç‚¹ï¼Œ96 Chirpsï¼Œ15 FPS",
  
  "channelConfig": {
    "rxChannelEn": 15,        // 0xF = 4ä¸ªRXä½¿èƒ½ (1111b)
    "txChannelEn": 3,         // 0x3 = 2ä¸ªTXä½¿èƒ½ (0011b)
    "cascading": 0            // ä¸çº§è”
  },
  
  "adcConfig": {
    "numADCBits": 2,          // 12ä½ADC
    "adcOutputFmt": 1         // å¤æ•°æ ¼å¼ï¼ˆI/Qï¼‰
  },
  
  "profileConfig": {
    "profileId": 0,
    "startFreqConst_GHz": 60.25,
    "idleTimeConst_us": 7,
    "adcStartTimeConst_us": 5,
    "rampEndTime_us": 60,
    "txOutPowerBackoffCode": 0,
    "txPhaseShifter": 0,
    "freqSlopeConst_MHz_us": 60,
    "txStartTime_us": 1,
    "numAdcSamples": 256,
    "digOutSampleRate_ksps": 10000,
    "hpfCornerFreq1": 0,
    "hpfCornerFreq2": 0,
    "rxGain_dB": 30
  },
  
  "chirpConfig": [
    {
      "chirpStartIdx": 0,
      "chirpEndIdx": 0,
      "profileId": 0,
      "startFreqVar": 0,
      "freqSlopeVar": 0,
      "idleTimeVar": 0,
      "adcStartTimeVar": 0,
      "txEnable": 1           // TX1ä½¿èƒ½
    }
  ],
  
  "frameConfig": {
    "chirpStartIdx": 0,
    "chirpEndIdx": 95,        // 96ä¸ªChirp
    "numLoops": 1,
    "numFrames": 0,           // æ— é™å¸§
    "framePeriodicity_ms": 66.67,  // 15 FPS
    "triggerSelect": 1,       // è½¯ä»¶è§¦å‘
    "frameTriggerDelay_ms": 0
  },
  
  "calculatedParams": {
    "bandwidth_MHz": 3600,
    "rangeResolution_cm": 4.17,
    "maxUnambiguousRange_m": 26.65,
    "velocityResolution_m_s": 0.41,
    "maxUnambiguousVelocity_m_s": 19.68,
    "frameTime_ms": 66.67,
    "frameRate_fps": 15
  },
  
  "postProcConfig": {
    "rangeFft": {
      "windowType": "hanning",
      "fftSize": 256
    },
    "dopplerFft": {
      "windowType": "hanning",
      "fftSize": 96
    },
    "cfar": {
      "type": "CA-CFAR",
      "numGuardCells": 4,
      "numTrainingCells": 16,
      "thresholdScale_dB": 15
    }
  }
}
```

#### ä»JSONåŠ è½½é…ç½®çš„Luaè„šæœ¬

```lua
-- load_config_from_json.lua
-- ä»JSONåŠ è½½é…ç½®å¹¶åº”ç”¨åˆ°é›·è¾¾

-- åŠ è½½JSONåº“ï¼ˆmmWave Studioå†…ç½®ï¼‰
local json = require("json")

-- JSONæ–‡ä»¶è·¯å¾„
local CONFIG_FILE = "C:\\mmWaveStudio\\JSONSampleFiles\\radar_config_basic.json"

-- è¯»å–JSONæ–‡ä»¶
print("åŠ è½½é…ç½®æ–‡ä»¶: " .. CONFIG_FILE)
local file = io.open(CONFIG_FILE, "r")
local content = file:read("*a")
file:close()

-- è§£æJSON
local config = json.decode(content)

print("é…ç½®åç§°: " .. config.configName)
print("èŠ¯ç‰‡å‹å·: " .. config.deviceType)

-- è¿æ¥é›·è¾¾
print("\nè¿æ¥é›·è¾¾...")
ar1.Connect(2, 921600, 1000)

-- åº”ç”¨é€šé“é…ç½®
print("é…ç½®é€šé“...")
ar1.ChanConf(
    config.channelConfig.cascading,
    config.channelConfig.rxChannelEn,
    config.channelConfig.txChannelEn,
    0
)

-- åº”ç”¨ADCé…ç½®
print("é…ç½®ADC...")
ar1.ADCOutConfig(
    config.adcConfig.numADCBits,
    config.adcConfig.adcOutputFmt
)

-- åº”ç”¨Profileé…ç½®
print("é…ç½®Profile...")
local prof = config.profileConfig
ar1.ProfileConfig(
    prof.profileId,
    prof.startFreqConst_GHz,
    prof.idleTimeConst_us,
    prof.adcStartTimeConst_us,
    prof.rampEndTime_us,
    prof.txOutPowerBackoffCode,
    prof.txPhaseShifter,
    prof.freqSlopeConst_MHz_us,
    prof.txStartTime_us,
    prof.numAdcSamples,
    prof.digOutSampleRate_ksps,
    prof.hpfCornerFreq1,
    prof.hpfCornerFreq2,
    prof.rxGain_dB
)

-- åº”ç”¨Chirpé…ç½®
print("é…ç½®Chirp...")
for i, chirp in ipairs(config.chirpConfig) do
    ar1.ChirpConfig(
        chirp.chirpStartIdx,
        chirp.chirpEndIdx,
        chirp.profileId,
        chirp.startFreqVar,
        chirp.freqSlopeVar,
        chirp.idleTimeVar,
        chirp.adcStartTimeVar,
        chirp.txEnable
    )
end

-- åº”ç”¨å¸§é…ç½®
print("é…ç½®å¸§...")
local frame = config.frameConfig
ar1.FrameConfig(
    frame.chirpStartIdx,
    frame.chirpEndIdx,
    frame.numLoops,
    frame.numFrames,
    frame.framePeriodicity_ms,
    frame.triggerSelect,
    frame.frameTriggerDelay_ms
)

-- å¯åŠ¨ä¼ æ„Ÿå™¨
print("\nå¯åŠ¨ä¼ æ„Ÿå™¨...")
ar1.StartSensor()

print("\né›·è¾¾è¿è¡Œä¸­...")
print("è®¡ç®—å‚æ•°ï¼š")
print("  è·ç¦»åˆ†è¾¨ç‡: " .. config.calculatedParams.rangeResolution_cm .. " cm")
print("  é€Ÿåº¦åˆ†è¾¨ç‡: " .. config.calculatedParams.velocityResolution_m_s .. " m/s")
print("  å¸§ç‡: " .. config.calculatedParams.frameRate_fps .. " FPS")

-- è¿è¡Œä¸€æ®µæ—¶é—´
RSTD.Sleep(10000)  -- 10ç§’

-- åœæ­¢
print("\nåœæ­¢ä¼ æ„Ÿå™¨...")
ar1.StopSensor()
ar1.Disconnect()

print("å®Œæˆï¼")
```

---

## ç¬¬å››ç« ï¼šæ–‡æ¡£ç³»ç»Ÿè§£è¯»

### 4.1 æ–‡æ¡£æ¸…å•åˆ†æ

#### æ–‡æ¡£åˆ—è¡¨

| æ–‡æ¡£åç§° | å¤§å° | é¡µæ•°ï¼ˆä¼°ï¼‰ | ç”¨é€” |
|---------|------|-----------|------|
| **mmwave_studio_user_guide.pdf** | 3.0MB | ~150é¡µ | å®Œæ•´ç”¨æˆ·æŒ‡å— â­â­â­ |
| **mmwave_studio_lua_api_documentation.pdf** | 1.0MB | ~80é¡µ | Lua APIå‚è€ƒ â­â­â­ |
| **DCA1000_Quick_Start_Guide.pdf** | 1.7MB | ~50é¡µ | DCA1000å¿«é€Ÿå…¥é—¨ â­â­ |
| **mmwave_studio_release_notes.pdf** | 252KB | ~20é¡µ | å‘å¸ƒè¯´æ˜ â­ |
| **DCA1000_Debugging_Handbook.pdf** | 81KB | ~10é¡µ | DCA1000è°ƒè¯• â­ |
| **license.pdf** | 176KB | ~15é¡µ | è®¸å¯åè®® |

---

### 4.2 ç”¨æˆ·æŒ‡å—å®é™…å†…å®¹

> âœ… **å·²éªŒè¯**ï¼šä»¥ä¸‹ä¸ºPDFå®é™…ç« èŠ‚ç»“æ„ï¼ˆå·²è½¬æ¢ä¸ºMDï¼‰
> ğŸ“„ æºæ–‡ä»¶ï¼š`å¯¹åº”PDFè½¬æ¢å¯è¯»çš„MDæ–‡ä»¶/mmwave_studio_user_guide.md`
> ğŸ“Š æ–‡æ¡£è§„æ¨¡ï¼š47é¡µï¼Œ2148è¡Œï¼Œ103å¼ å›¾ç‰‡

**å®é™…ç›®å½•ç»“æ„**ï¼š

```
mmWave Studio GUI User Guide v4.3.1

1. Installation                                  â† å®‰è£…

2. Startup                                       â† å¯åŠ¨
   - USB Interface and Drivers                   â† USBæ¥å£ä¸é©±åŠ¨

3. Using DCA1000 CLI utility                     â† DCA1000å‘½ä»¤è¡Œå·¥å…·
   - Updating the DCA1000 FPGA Binary            â† æ›´æ–°FPGAå›ºä»¶
   - Raw ADC data capture                        â† åŸå§‹ADCæ•°æ®é‡‡é›†

4. Menu Bar                                      â† èœå•æ  â­â­â­
   - File Menu                                   â† æ–‡ä»¶èœå•
   - View Menu                                   â† è§†å›¾èœå•
   - Tools Menu                                  â† å·¥å…·èœå•
   - ToolBars Menu                               â† å·¥å…·æ èœå•
   - Window Menu                                 â† çª—å£èœå•
   - Help Menu                                   â† å¸®åŠ©èœå•
   - Radar API Window                            â† Radar APIçª—å£
     * Connection                                â† è¿æ¥
     * Device Control & DeviceControl 1          â† è®¾å¤‡æ§åˆ¶
     * Sensor Config & Sensor Config 1           â† ä¼ æ„Ÿå™¨é…ç½®
     * Monitor Config                            â† ç›‘æ§é…ç½®
     * RFEval                                    â† RFè¯„ä¼°
     * JSON Import Export                        â† JSONå¯¼å…¥å¯¼å‡º
     * Misc                                      â† æ‚é¡¹
   - Output Window                               â† è¾“å‡ºçª—å£
   - LUA Shell                                   â† Lua Shell

5. Connection Tab                                â† è¿æ¥æ ‡ç­¾é¡µ
   - Board Control Operations                    â† æ¿æ§åˆ¶æ“ä½œ
   - RS232 Operations                            â† RS232æ“ä½œ
   - Firmware Download                           â† å›ºä»¶ä¸‹è½½
   - SPI Connection & FEC Power Up               â† SPIè¿æ¥ä¸FECä¸Šç”µ

6. Device Control Tab                            â† è®¾å¤‡æ§åˆ¶æ ‡ç­¾é¡µ

7. Sensor Config Tab                             â† ä¼ æ„Ÿå™¨é…ç½®æ ‡ç­¾é¡µ

8. Monitor Config Tab                            â† ç›‘æ§é…ç½®æ ‡ç­¾é¡µ

9. RFEval                                        â† RFè¯„ä¼°

10. JSON Import Export                           â† JSONå¯¼å…¥å¯¼å‡º

11. Misc                                         â† æ‚é¡¹

12. List of plots                                â† å›¾è¡¨åˆ—è¡¨ â­â­
    - Basic plots                                â† åŸºç¡€å›¾è¡¨
    - CQ plots (chirp quality metrics)           â† Chirpè´¨é‡æŒ‡æ ‡
    - Characterization plots                     â† ç‰¹æ€§è¡¨å¾å›¾
    - Channel select                             â† é€šé“é€‰æ‹©
    - Frame/Profile/Chirp sliders                â† å¸§/Profile/Chirpæ»‘å—
    - Information sidebar                        â† ä¿¡æ¯ä¾§è¾¹æ 
      * Programmed parameters                    â† ç¼–ç¨‹å‚æ•°
      * Calculated parameters                    â† è®¡ç®—å‚æ•°
      * Detection results                        â† æ£€æµ‹ç»“æœ
    - Play                                       â† æ’­æ”¾
    - Miscellaneous options                      â† å…¶ä»–é€‰é¡¹
      * Detection                                â† æ£€æµ‹
      * FFT processing settings                  â† FFTå¤„ç†è®¾ç½®
      * Miscellaneous                            â† æ‚é¡¹
      * Time domain options                      â† æ—¶åŸŸé€‰é¡¹
      * More miscellaneous options               â† æ›´å¤šé€‰é¡¹
    - Notes on Setting up PostProc for Characterization  â† PostProcè®¾ç½®æ³¨æ„äº‹é¡¹
    - Standalone processing                      â† ç‹¬ç«‹å¤„ç†

13. Sample Lua script for automation             â† Luaè‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹
```

**å…³é”®ç« èŠ‚è¯´æ˜**ï¼š
- **ç¬¬4ç« ï¼ˆèœå•æ ï¼‰**ï¼šæœ€è¯¦ç»†çš„GUIæ“ä½œæŒ‡å—ï¼ŒåŒ…å«æ‰€æœ‰é…ç½®é¢æ¿
- **ç¬¬5-11ç« ï¼ˆå„æ ‡ç­¾é¡µï¼‰**ï¼šé€ä¸ªæ ‡ç­¾é¡µçš„è¯¦ç»†æ“ä½œè¯´æ˜
- **ç¬¬12ç« ï¼ˆå›¾è¡¨åˆ—è¡¨ï¼‰**ï¼šå¯è§†åŒ–åŠŸèƒ½å®Œæ•´è¯´æ˜
- **ç¬¬13ç« ï¼ˆLuaè„šæœ¬ï¼‰**ï¼šè‡ªåŠ¨åŒ–è„šæœ¬ç¤ºä¾‹

ğŸ“– **å®Œæ•´å†…å®¹è¯¦è§**ï¼š`å¯¹åº”PDFè½¬æ¢å¯è¯»çš„MDæ–‡ä»¶/mmwave_studio_user_guide.md`

---

### 4.3 Lua APIæ–‡æ¡£å®é™…å†…å®¹

> âœ… **å·²éªŒè¯**ï¼šä»¥ä¸‹ä¸ºPDFå®é™…ç« èŠ‚ç»“æ„ï¼ˆå·²è½¬æ¢ä¸ºMDï¼‰
> ğŸ“„ æºæ–‡ä»¶ï¼š`å¯¹åº”PDFè½¬æ¢å¯è¯»çš„MDæ–‡ä»¶/mmwave_studio_lua_api_documentation.md`
> ğŸ“Š æ–‡æ¡£è§„æ¨¡ï¼š359é¡µï¼Œ16237è¡Œ â­â­â­ï¼ˆè¶…å¤§å‹APIæ‰‹å†Œï¼‰

**å®é™…ç›®å½•ç»“æ„**ï¼š

```
mmWave Studio 4.3 LUA API Documentation

1. Revision History                              â† ç‰ˆæœ¬å†å²

2. LUA API data structure overview               â† APIæ•°æ®ç»“æ„æ¦‚è¿°
   - Typical API definition                      â† å…¸å‹APIå®šä¹‰
   - API Parameters data type                    â† APIå‚æ•°æ•°æ®ç±»å‹

3. Device Reference Clock                        â† è®¾å¤‡å‚è€ƒæ—¶é’Ÿ

4. Connection APIs                               â† è¿æ¥API â­â­â­
   4.1 GUI Version                               â† GUIç‰ˆæœ¬
   4.2 Board Control                             â† æ¿æ§åˆ¶
       - Board and Device Selection              â† æ¿å’Œè®¾å¤‡é€‰æ‹©
       - Communication Interface Selection       â† é€šä¿¡æ¥å£é€‰æ‹©
       - SOP Control                             â† SOPæ§åˆ¶
       - Reset Control                           â† å¤ä½æ§åˆ¶
       - General Purpose Control                 â† é€šç”¨æ§åˆ¶
       - RS232 Control                           â† RS232æ§åˆ¶
   4.3 SOP_DEBUG Firmware Download               â† å›ºä»¶ä¸‹è½½ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰
       - SOP_DEBUG Fw Pre Boot Config            â† é¢„å¯åŠ¨é…ç½®
       - FW BuildImage binary download           â† å›ºä»¶é•œåƒä¸‹è½½
       - SOP_DEBUG Fw Post Boot Config           â† å¯åŠ¨åé…ç½®
       - Firmware Image Download Sequence        â† ä¸‹è½½åºåˆ—
       - RS232 FW Version Read                   â† è¯»å–å›ºä»¶ç‰ˆæœ¬
   4.4 UART based Firmware Meta Image Download   â† UARTå›ºä»¶ä¸‹è½½
   4.5 SPI based Firmware Meta Image Download    â† SPIå›ºä»¶ä¸‹è½½
       - SPI Connection                          â† SPIè¿æ¥
       - SOP_FUNC SPI Meta Image Fw Download     â† SPIå…ƒé•œåƒä¸‹è½½
   4.6 Device Powerup                            â† è®¾å¤‡ä¸Šç”µ

5. Sensor Config APIs                            â† ä¼ æ„Ÿå™¨é…ç½®API â­â­â­
   ï¼ˆ359é¡µä¸­å¤§éƒ¨åˆ†å†…å®¹ï¼ŒåŒ…å«æ‰€æœ‰é›·è¾¾é…ç½®APIè¯¦ç»†è¯´æ˜ï¼‰

6. Data Path Config APIs                         â† æ•°æ®è·¯å¾„é…ç½®API

7. Calibration APIs                              â† æ ¡å‡†API

8. Monitoring APIs                               â† ç›‘æ§API

9. Advanced Frame Config APIs                    â† é«˜çº§å¸§é…ç½®API

10. RF Configuration APIs                        â† RFé…ç½®API

11. Capture Card APIs                            â† é‡‡é›†å¡APIï¼ˆDCA1000ï¼‰

12. Flash Programming APIs                       â† Flashç¼–ç¨‹API

13. Utility Functions                            â† å·¥å…·å‡½æ•°
    - RSTD.Sleep()                               â† å»¶è¿Ÿå‡½æ•°
    - RSTD.GetTime()                             â† æ—¶é—´å‡½æ•°
    - File Operations                            â† æ–‡ä»¶æ“ä½œ
    - String Functions                           â† å­—ç¬¦ä¸²å‡½æ•°
```

**å…³é”®ç‰¹ç‚¹**ï¼š
- **è¶…è¯¦ç»†**ï¼š359é¡µå®Œæ•´APIå‚è€ƒï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è¯¦ç»†è¯´æ˜
- **å‚æ•°å®Œæ•´**ï¼šæ‰€æœ‰APIçš„è¾“å…¥å‚æ•°ã€è¿”å›å€¼ã€é”™è¯¯ç éƒ½æœ‰è¯¦ç»†æ–‡æ¡£
- **ä»£ç ç¤ºä¾‹**ï¼šåŒ…å«Luaè„šæœ¬è°ƒç”¨ç¤ºä¾‹
- **æƒå¨æ€§**ï¼šè¿™æ˜¯mmWave Studioè‡ªåŠ¨åŒ–çš„å®˜æ–¹APIæ‰‹å†Œ

ğŸ“– **å®Œæ•´å†…å®¹è¯¦è§**ï¼š`å¯¹åº”PDFè½¬æ¢å¯è¯»çš„MDæ–‡ä»¶/mmwave_studio_lua_api_documentation.md`

> ğŸ’¡ **é‡è¦æç¤º**ï¼šæ­¤æ–‡æ¡£æ˜¯ä½¿ç”¨Luaè„šæœ¬è‡ªåŠ¨åŒ–æ§åˆ¶mmWave Studioçš„æ ¸å¿ƒå‚è€ƒèµ„æ–™ï¼

---

## å°ç»“ä¸ä¸‹ä¸€æ­¥

### æœ¬éƒ¨åˆ†å®Œæˆå†…å®¹ âœ…

1. âœ… ç»„ä»¶ç›®å½•æ·±å…¥åˆ†æï¼ˆ11ä¸ªå­ç›®å½•ï¼‰
2. âœ… FlashProgrammerè¯¦è§£ï¼ˆçƒ§å½•æµç¨‹å’ŒLuaè„šæœ¬ï¼‰
3. âœ… PostProcåå¤„ç†å·¥å…·ï¼ˆæ¶æ„ã€æµç¨‹ã€é…ç½®ï¼‰
4. âœ… ReferenceCodeå‚è€ƒä»£ç ï¼ˆMATLABç¤ºä¾‹ï¼‰
5. âœ… JSONSampleFilesé…ç½®æ ·ä¾‹ï¼ˆJSONæ ¼å¼å’ŒåŠ è½½è„šæœ¬ï¼‰
6. âœ… æ–‡æ¡£ç³»ç»Ÿè§£è¯»ï¼ˆ6ä¸ªPDFæ–‡æ¡£ï¼‰
7. âœ… ç”¨æˆ·æŒ‡å—å’ŒAPIæ–‡æ¡£å†…å®¹é¢„æµ‹

### ä¸‹ä¸€æ­¥å†…å®¹ ğŸ“‹

**Part11-ç¬¬ä¸‰éƒ¨åˆ†**å°†åŒ…å«ï¼š

1. **å®æˆ˜åº”ç”¨æµç¨‹**
   - å®Œæ•´è¯„ä¼°é¡¹ç›®ç¤ºä¾‹
   - ä»é…ç½®åˆ°æ•°æ®åˆ†æçš„ç«¯åˆ°ç«¯æµç¨‹
   - æœ€ä½³å®è·µå’ŒæŠ€å·§

2. **å¸¸è§é—®é¢˜æ’æŸ¥**
   - DCA1000è¿æ¥é—®é¢˜
   - æ•°æ®é‡‡é›†æ•…éšœ
   - Flashçƒ§å½•å¤±è´¥
   - æ€§èƒ½ä¼˜åŒ–

3. **ä¸å…¶ä»–å·¥å…·ååŒ**
   - mmWave Studio + SDKå¼€å‘
   - mmWave Studio + MATLAB
   - mmWave Studio + Python
   - æ•°æ®æµè½¬å’Œå·¥å…·é“¾

4. **é«˜çº§åº”ç”¨**
   - è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶
   - æ‰¹é‡æ•°æ®é‡‡é›†
   - äº§çº¿åº”ç”¨

**å‡†å¤‡å¥½ç»§ç»­ç¬¬ä¸‰éƒ¨åˆ†äº†å—ï¼Ÿ** ğŸš€

---

## ç¬¬äº”ç« ï¼šå®æˆ˜åº”ç”¨æµç¨‹

### 5.1 å®Œæ•´è¯„ä¼°é¡¹ç›®ç¤ºä¾‹

#### é¡¹ç›®åœºæ™¯ï¼šå®¤å†…äººå‘˜æ£€æµ‹é›·è¾¾è¯„ä¼°

```
é¡¹ç›®ç›®æ ‡ï¼š
âœ… è¯„ä¼°xWR6843ç”¨äºå®¤å†…äººå‘˜æ£€æµ‹çš„æ€§èƒ½
âœ… æµ‹è¯•ä¸åŒé…ç½®å‚æ•°çš„æ•ˆæœ
âœ… è·å–å®é™…æ•°æ®ç”¨äºç®—æ³•å¼€å‘
âœ… éªŒè¯æ£€æµ‹è·ç¦»ã€é€Ÿåº¦ã€è§’åº¦çš„å‡†ç¡®æ€§

æµ‹è¯•ç¯å¢ƒï¼š
â”œâ”€ åœºæ™¯ï¼š5m Ã— 5m å®¤å†…æˆ¿é—´
â”œâ”€ ç›®æ ‡ï¼š1-3ä¸ªäººå‘˜ç§»åŠ¨
â”œâ”€ å®‰è£…é«˜åº¦ï¼š2må¢™å£å®‰è£…
â”œâ”€ æµ‹è¯•æ—¶é—´ï¼š1å°æ—¶
â””â”€ æ•°æ®é‡ï¼š~10GB ADCæ•°æ®
```

---

### 5.2 ç«¯åˆ°ç«¯è¯„ä¼°æµç¨‹

#### Phase 1: å‡†å¤‡é˜¶æ®µ

```
Step 1: ç¡¬ä»¶è¿æ¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PC  â† USB â†’  xWR6843 EVM               â”‚
â”‚   â†‘                â†“                    â”‚
â”‚   â””â”€â”€ Ethernet â†’ DCA1000                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ£€æŸ¥æ¸…å•ï¼š
âœ… EVMæ¿ä¸Šç”µæ­£å¸¸
âœ… USBè™šæ‹ŸCOMå£è¯†åˆ«ï¼ˆé€šå¸¸COM5/COM6ï¼‰
âœ… DCA1000ä»¥å¤ªç½‘è¿æ¥ï¼ˆé»˜è®¤192.168.33.180ï¼‰
âœ… mmWave Studioå¯åŠ¨æ­£å¸¸

Step 2: ç¯å¢ƒé…ç½®
â”œâ”€ åˆ›å»ºé¡¹ç›®ç›®å½•ï¼šC:\mmwave_projects\indoor_people_detection\
â”œâ”€ å­ç›®å½•ï¼š
â”‚   â”œâ”€ configs/        â† é…ç½®æ–‡ä»¶
â”‚   â”œâ”€ scripts/        â† Luaè„šæœ¬
â”‚   â”œâ”€ raw_data/       â† åŸå§‹ADCæ•°æ®
â”‚   â”œâ”€ processed/      â† å¤„ç†åæ•°æ®
â”‚   â””â”€ results/        â† ç»“æœå’ŒæŠ¥å‘Š
â””â”€ å‡†å¤‡å›ºä»¶ï¼ˆå¦‚éœ€Flashçƒ§å½•ï¼‰
```

**è¿æ¥éªŒè¯è„šæœ¬**ï¼š

```lua
-- verify_connection.lua
-- éªŒè¯ç¡¬ä»¶è¿æ¥

print("========================================")
print("    ç¡¬ä»¶è¿æ¥éªŒè¯")
print("========================================")

-- 1. è¿æ¥é›·è¾¾
print("\n[1/4] è¿æ¥é›·è¾¾...")
local status = ar1.Connect(2, 921600, 1000)
if ar1.IsConnected() == 1 then
    print("  âœ“ é›·è¾¾è¿æ¥æˆåŠŸ")
else
    print("  âœ— é›·è¾¾è¿æ¥å¤±è´¥")
    return
end

-- 2. è·å–ç‰ˆæœ¬ä¿¡æ¯
print("\n[2/4] è¯»å–ç‰ˆæœ¬ä¿¡æ¯...")
local version = ar1.GetVersionInfo()
print("  å›ºä»¶ç‰ˆæœ¬: " .. version.rf_fw_ver)
print("  APIç‰ˆæœ¬: " .. version.mmwave_sdk_ver)

-- 3. éªŒè¯DCA1000è¿æ¥
print("\n[3/4] éªŒè¯DCA1000è¿æ¥...")
ar1.CaptureCardConfig_EthInit("192.168.33.30", "192.168.33.180", "12:34:56:78:90:12", 4096, 4098)
RSTD.Sleep(1000)
print("  âœ“ DCA1000è¿æ¥é…ç½®å®Œæˆ")

-- 4. è¯»å–æ¸©åº¦çŠ¶æ€
print("\n[4/4] è¯»å–ç³»ç»ŸçŠ¶æ€...")
local temp = ar1.GetTemperature()
print("  æ¸©åº¦: " .. temp.tempValue .. "Â°C")

print("\n========================================")
print("    æ‰€æœ‰è¿æ¥æ­£å¸¸ï¼")
print("========================================")

ar1.Disconnect()
```

---

#### Phase 2: é…ç½®é˜¶æ®µ

**Step 3: è®¾è®¡é›·è¾¾é…ç½®**

åŸºäºå®¤å†…äººå‘˜æ£€æµ‹éœ€æ±‚è®¾è®¡é…ç½®å‚æ•°ï¼š

```
é…ç½®ç›®æ ‡ï¼š
â”œâ”€ æ£€æµ‹èŒƒå›´ï¼š0.5m - 8m
â”œâ”€ è·ç¦»åˆ†è¾¨ç‡ï¼š< 10cm
â”œâ”€ é€Ÿåº¦èŒƒå›´ï¼š-5m/s ~ +5m/s
â”œâ”€ é€Ÿåº¦åˆ†è¾¨ç‡ï¼š< 0.1m/s
â”œâ”€ è§’åº¦èŒƒå›´ï¼šÂ±60Â° (æ–¹ä½è§’)
â”œâ”€ è§’åº¦åˆ†è¾¨ç‡ï¼š< 15Â°
â””â”€ å¸§ç‡ï¼š15 FPS

é…ç½®è®¡ç®—ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å‚æ•°                 | è®¡ç®—å…¬å¼              | å€¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
èµ·å§‹é¢‘ç‡             | -                    | 60.5 GHz
å¸¦å®½                 | -                    | 3.6 GHz
æ–œç‡                 | BW / Ramp Time       | 60 MHz/us
é‡‡æ ·ç‡               | -                    | 10 Msps
é‡‡æ ·ç‚¹æ•°             | -                    | 256
è·ç¦»åˆ†è¾¨ç‡           | c / (2 * BW)         | 4.17 cm âœ“
æœ€å¤§ä¸æ¨¡ç³Šè·ç¦»        | c * Fs / (2 * S)     | 25 m âœ“
ChirpæŒç»­æ—¶é—´        | Samples / Fs         | 25.6 us
Chirpæ•°/å¸§           | -                    | 128
é€Ÿåº¦åˆ†è¾¨ç‡           | Î» / (2 * N * Tc)     | 0.31 m/s âœ“
æœ€å¤§ä¸æ¨¡ç³Šé€Ÿåº¦        | Î» / (4 * Tc)         | 19.8 m/s âœ“
å¸§å‘¨æœŸ               | -                    | 66.67 ms
å¸§ç‡                 | 1 / Frame Period     | 15 FPS âœ“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**é…ç½®æ–‡ä»¶**ï¼š

```json
// indoor_people_detection_config.json
{
  "configName": "Indoor People Detection",
  "description": "å®¤å†…äººå‘˜æ£€æµ‹é›·è¾¾é…ç½® - 8mèŒƒå›´ï¼Œ15 FPS",
  
  "deviceType": "xWR6843",
  "antennaConfig": "4RX + 2TX",
  
  "channelConfig": {
    "rxChannelEn": 15,        // 4ä¸ªRXå…¨å¼€ (1111b)
    "txChannelEn": 3,         // 2ä¸ªTXå…¨å¼€ (0011b)
    "cascading": 0
  },
  
  "adcConfig": {
    "numADCBits": 2,          // 12-bit
    "adcOutputFmt": 1         // å¤æ•°I/Q
  },
  
  "profileConfig": {
    "profileId": 0,
    "startFreqConst_GHz": 60.5,
    "idleTimeConst_us": 7,
    "adcStartTimeConst_us": 5,
    "rampEndTime_us": 62,
    "freqSlopeConst_MHz_us": 60,
    "txStartTime_us": 1,
    "numAdcSamples": 256,
    "digOutSampleRate_ksps": 10000,
    "hpfCornerFreq1": 0,
    "hpfCornerFreq2": 0,
    "rxGain_dB": 30
  },
  
  "chirpConfig": [
    {
      "chirpStartIdx": 0,
      "chirpEndIdx": 0,
      "profileId": 0,
      "txEnable": 1           // TX1
    },
    {
      "chirpStartIdx": 1,
      "chirpEndIdx": 1,
      "profileId": 0,
      "txEnable": 2           // TX2
    }
  ],
  
  "frameConfig": {
    "chirpStartIdx": 0,
    "chirpEndIdx": 127,       // 128 chirps (2 TX Ã— 64 loops)
    "numLoops": 64,
    "numFrames": 0,           // æ— é™é‡‡é›†
    "framePeriodicity_ms": 66.67,
    "triggerSelect": 1,
    "frameTriggerDelay_ms": 0
  },
  
  "dca1000Config": {
    "dataLoggingMode": "multi",
    "lvdsMode": 1,
    "dataTransferMode": "LVDSCapture",
    "dataPacketDelay_us": 25,
    "captureDirectory": "C:\\mmwave_projects\\indoor_people_detection\\raw_data\\"
  }
}
```

---

#### Phase 3: æ•°æ®é‡‡é›†é˜¶æ®µ

**Step 4: æ‰§è¡Œæ•°æ®é‡‡é›†**

```lua
-- indoor_people_detection_capture.lua
-- å®¤å†…äººå‘˜æ£€æµ‹æ•°æ®é‡‡é›†è„šæœ¬

-- åŠ è½½JSONé…ç½®
local json = require("json")
local CONFIG_FILE = "C:\\mmwave_projects\\indoor_people_detection\\configs\\indoor_people_detection_config.json"

print("========================================")
print("  å®¤å†…äººå‘˜æ£€æµ‹æ•°æ®é‡‡é›†")
print("========================================")

-- è¯»å–é…ç½®
print("\nåŠ è½½é…ç½®æ–‡ä»¶...")
local file = io.open(CONFIG_FILE, "r")
local content = file:read("*a")
file:close()
local config = json.decode(content)

print("é…ç½®åç§°: " .. config.configName)
print("ç›®æ ‡èŠ¯ç‰‡: " .. config.deviceType)

-- ========== Phase 1: è¿æ¥ä¸åˆå§‹åŒ– ==========
print("\n========== Phase 1: è¿æ¥ä¸åˆå§‹åŒ– ==========")

-- 1. è¿æ¥é›·è¾¾
print("[1/5] è¿æ¥é›·è¾¾...")
ar1.Connect(2, 921600, 1000)
if ar1.IsConnected() ~= 1 then
    print("é”™è¯¯ï¼šé›·è¾¾è¿æ¥å¤±è´¥")
    return
end
print("  âœ“ é›·è¾¾è¿æ¥æˆåŠŸ")

-- 2. é…ç½®DCA1000
print("[2/5] é…ç½®DCA1000...")
ar1.CaptureCardConfig_EthInit("192.168.33.30", "192.168.33.180", "12:34:56:78:90:12", 4096, 4098)
RSTD.Sleep(1000)
print("  âœ“ DCA1000ä»¥å¤ªç½‘åˆå§‹åŒ–å®Œæˆ")

-- 3. é…ç½®æ•°æ®é‡‡é›†æ¨¡å¼
ar1.CaptureCardConfig_Mode(1, 2, 1, 2, 3, 30)  -- LVDSæ¨¡å¼
RSTD.Sleep(1000)
print("  âœ“ LVDSé‡‡é›†æ¨¡å¼é…ç½®å®Œæˆ")

-- 4. é…ç½®æ•°æ®åŒ…å»¶è¿Ÿ
ar1.CaptureCardConfig_PacketDelay(config.dca1000Config.dataPacketDelay_us)
print("  âœ“ æ•°æ®åŒ…å»¶è¿Ÿé…ç½®å®Œæˆ")

-- ========== Phase 2: é›·è¾¾é…ç½® ==========
print("\n========== Phase 2: é›·è¾¾é…ç½® ==========")

-- 5. é€šé“é…ç½®
print("[1/7] é…ç½®é€šé“...")
ar1.ChanConf(
    config.channelConfig.cascading,
    config.channelConfig.rxChannelEn,
    config.channelConfig.txChannelEn,
    0
)
print("  âœ“ RX: 4é€šé“, TX: 2é€šé“")

-- 6. ADCé…ç½®
print("[2/7] é…ç½®ADC...")
ar1.ADCOutConfig(
    config.adcConfig.numADCBits,
    config.adcConfig.adcOutputFmt
)
print("  âœ“ 12-bit ADC, å¤æ•°è¾“å‡º")

-- 7. Profileé…ç½®
print("[3/7] é…ç½®Profile...")
local prof = config.profileConfig
ar1.ProfileConfig(
    prof.profileId,
    prof.startFreqConst_GHz,
    prof.idleTimeConst_us,
    prof.adcStartTimeConst_us,
    prof.rampEndTime_us,
    0,  -- txOutPowerBackoffCode
    0,  -- txPhaseShifter
    prof.freqSlopeConst_MHz_us,
    prof.txStartTime_us,
    prof.numAdcSamples,
    prof.digOutSampleRate_ksps,
    prof.hpfCornerFreq1,
    prof.hpfCornerFreq2,
    prof.rxGain_dB
)
print("  âœ“ èµ·å§‹é¢‘ç‡: " .. prof.startFreqConst_GHz .. " GHz")
print("  âœ“ å¸¦å®½: 3.6 GHz")
print("  âœ“ é‡‡æ ·ç‚¹: " .. prof.numAdcSamples)

-- 8. Chirpé…ç½®
print("[4/7] é…ç½®Chirp...")
for i, chirp in ipairs(config.chirpConfig) do
    ar1.ChirpConfig(
        chirp.chirpStartIdx,
        chirp.chirpEndIdx,
        chirp.profileId,
        0, 0, 0, 0,  -- é¢‘ç‡/æ—¶é—´å˜é‡
        chirp.txEnable
    )
end
print("  âœ“ Chirpé…ç½®å®Œæˆï¼ˆ2ç§Chirpï¼ŒTX1/TX2äº¤æ›¿ï¼‰")

-- 9. å¸§é…ç½®
print("[5/7] é…ç½®å¸§...")
local frame = config.frameConfig
ar1.FrameConfig(
    frame.chirpStartIdx,
    frame.chirpEndIdx,
    frame.numLoops,
    frame.numFrames,
    frame.framePeriodicity_ms,
    frame.triggerSelect,
    frame.frameTriggerDelay_ms
)
print("  âœ“ å¸§é…ç½®: " .. (frame.chirpEndIdx + 1) .. " Chirps, " .. (1000 / frame.framePeriodicity_ms) .. " FPS")

-- 10. æ•°æ®æ ¼å¼é…ç½®
print("[6/7] é…ç½®LVDSæ•°æ®æ ¼å¼...")
ar1.DataPathConfig(1, 1, 0)  -- CSI2, å¯ç”¨ADCæ•°æ®
print("  âœ“ æ•°æ®è·¯å¾„é…ç½®å®Œæˆ")

-- 11. å¯åŠ¨ä¼ æ„Ÿå™¨
print("[7/7] å¯åŠ¨ä¼ æ„Ÿå™¨...")
ar1.StartSensor()
RSTD.Sleep(1000)
print("  âœ“ ä¼ æ„Ÿå™¨å¯åŠ¨æˆåŠŸ")

-- ========== Phase 3: æ•°æ®é‡‡é›† ==========
print("\n========== Phase 3: æ•°æ®é‡‡é›† ==========")

-- é‡‡é›†å‚æ•°
local CAPTURE_DURATION_SEC = 60  -- é‡‡é›†60ç§’
local NUM_FRAMES = math.floor(CAPTURE_DURATION_SEC * 1000 / frame.framePeriodicity_ms)

print("é‡‡é›†å‚æ•°:")
print("  æŒç»­æ—¶é—´: " .. CAPTURE_DURATION_SEC .. " ç§’")
print("  æ€»å¸§æ•°: " .. NUM_FRAMES .. " å¸§")
print("  æ•°æ®é‡ä¼°ç®—: " .. math.floor(NUM_FRAMES * 256 * 128 * 4 * 2 / 1024 / 1024) .. " MB")

-- è®¾ç½®ä¿å­˜è·¯å¾„
local timestamp = os.date("%Y%m%d_%H%M%S")
local save_prefix = config.dca1000Config.captureDirectory .. "indoor_capture_" .. timestamp

print("\næ•°æ®ä¿å­˜è·¯å¾„: " .. save_prefix)

-- å¼€å§‹å½•åˆ¶
print("\nå¼€å§‹é‡‡é›†...")
ar1.StartRecord(save_prefix .. "_Raw_0.bin", 1)
RSTD.Sleep(500)

-- æ˜¾ç¤ºè¿›åº¦
local start_time = os.time()
local progress_interval = 10  -- æ¯10ç§’æ˜¾ç¤ºä¸€æ¬¡è¿›åº¦

for i = 1, CAPTURE_DURATION_SEC do
    RSTD.Sleep(1000)
    
    if i % progress_interval == 0 or i == CAPTURE_DURATION_SEC then
        local progress = math.floor((i / CAPTURE_DURATION_SEC) * 100)
        print(string.format("  è¿›åº¦: %d%% (%d/%d ç§’)", progress, i, CAPTURE_DURATION_SEC))
    end
end

-- åœæ­¢å½•åˆ¶
print("\nåœæ­¢é‡‡é›†...")
ar1.StopRecord()
RSTD.Sleep(1000)
print("  âœ“ æ•°æ®é‡‡é›†å®Œæˆ")

-- ========== Phase 4: æ¸…ç† ==========
print("\n========== Phase 4: æ¸…ç† ==========")

-- åœæ­¢ä¼ æ„Ÿå™¨
print("åœæ­¢ä¼ æ„Ÿå™¨...")
ar1.StopSensor()
RSTD.Sleep(1000)

-- æ–­å¼€è¿æ¥
print("æ–­å¼€è¿æ¥...")
ar1.Disconnect()

-- æ€»ç»“
local end_time = os.time()
local total_time = end_time - start_time

print("\n========================================")
print("    é‡‡é›†å®Œæˆï¼")
print("========================================")
print("æ€»è€—æ—¶: " .. total_time .. " ç§’")
print("æ•°æ®æ–‡ä»¶: " .. save_prefix .. "_Raw_0.bin")
print("\nä¸‹ä¸€æ­¥: ä½¿ç”¨PostProcå·¥å…·æˆ–MATLABå¤„ç†æ•°æ®")
```

---

#### Phase 4: æ•°æ®å¤„ç†é˜¶æ®µ

**Step 5: MATLABåå¤„ç†**

```matlab
% process_indoor_data.m
% å®¤å†…äººå‘˜æ£€æµ‹æ•°æ®åå¤„ç†

clear; clc; close all;

%% ========== Step 1: é…ç½®å‚æ•° ==========
fprintf('========================================\n');
fprintf('  å®¤å†…äººå‘˜æ£€æµ‹æ•°æ®å¤„ç†\n');
fprintf('========================================\n\n');

% æ•°æ®æ–‡ä»¶
dataFile = 'C:\mmwave_projects\indoor_people_detection\raw_data\indoor_capture_20251225_143000_Raw_0.bin';

% é›·è¾¾å‚æ•°ï¼ˆä¸é…ç½®ä¸€è‡´ï¼‰
params.numADCSamples = 256;
params.numChirps = 128;         % 2 TX Ã— 64 loops
params.numRxAntennas = 4;
params.numTxAntennas = 2;
params.startFreq = 60.5e9;      % Hz
params.bandwidth = 3.6e9;       % Hz
params.chirpSlope = 60e12;      % Hz/s
params.sampleRate = 10e6;       % Hz
params.framePeriodicity = 66.67e-3;  % s

% è®¡ç®—å‚æ•°
c = 3e8;  % å…‰é€Ÿ
params.rangeResolution = c / (2 * params.bandwidth);
params.maxRange = (c * params.sampleRate) / (2 * params.chirpSlope);
params.velocityResolution = c / (2 * params.startFreq * params.numChirps * params.framePeriodicity);
params.maxVelocity = c / (4 * params.startFreq * params.framePeriodicity);

fprintf('é›·è¾¾å‚æ•°:\n');
fprintf('  è·ç¦»åˆ†è¾¨ç‡: %.2f cm\n', params.rangeResolution * 100);
fprintf('  æœ€å¤§è·ç¦»: %.2f m\n', params.maxRange);
fprintf('  é€Ÿåº¦åˆ†è¾¨ç‡: %.2f m/s\n', params.velocityResolution);
fprintf('  æœ€å¤§é€Ÿåº¦: %.2f m/s\n', params.maxVelocity);

%% ========== Step 2: åŠ è½½æ•°æ® ==========
fprintf('\n[1/6] åŠ è½½ADCæ•°æ®...\n');

% è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶
fid = fopen(dataFile, 'r');
rawData = fread(fid, 'uint16');
fclose(fid);

fprintf('  åŸå§‹æ•°æ®å¤§å°: %d æ ·æœ¬\n', length(rawData));

% è½¬æ¢ä¸ºå¤æ•°ï¼ˆI + jQï¼‰
rawData = reshape(rawData, 2, []);
complexData = complex(rawData(1,:), rawData(2,:));

% è®¡ç®—å¸§æ•°
samplesPerFrame = params.numADCSamples * params.numChirps * params.numRxAntennas;
numFrames = floor(length(complexData) / samplesPerFrame);

fprintf('  æ£€æµ‹åˆ° %d å¸§æ•°æ®\n', numFrames);

% é‡ç»„ä¸º4Dæ•°ç»„: [Samples, Chirps, RX, Frames]
adcData = reshape(complexData(1:samplesPerFrame * numFrames), ...
    params.numADCSamples, params.numChirps, params.numRxAntennas, numFrames);

fprintf('  æ•°æ®ç»´åº¦: [%d, %d, %d, %d]\n', size(adcData));

%% ========== Step 3: å¤„ç†å•å¸§ï¼ˆç¤ºä¾‹ï¼‰==========
fprintf('\n[2/6] å¤„ç†å¸§ #100...\n');

frameIdx = 100;
frameData = adcData(:, :, :, frameIdx);

% Range FFT
fprintf('  Range FFT...\n');
window = hanning(params.numADCSamples);
windowedData = frameData .* repmat(window, 1, params.numChirps, params.numRxAntennas);
rangeFft = fft(windowedData, params.numADCSamples, 1);

% Doppler FFT
fprintf('  Doppler FFT...\n');
dopplerFft = fftshift(fft(rangeFft, params.numChirps, 2), 2);

% æ‰€æœ‰RXæ±‚å’Œ
rdMap = squeeze(sum(abs(dopplerFft), 3));

% è½¬æ¢ä¸ºdB
rdMapDb = 20*log10(rdMap + eps);

% CFARæ£€æµ‹
fprintf('  CFARæ£€æµ‹...\n');
cfarParams.numGuardCells = 4;
cfarParams.numTrainingCells = 16;
cfarParams.thresholdScale = 15;  % dB

detections = cfarCA2D(rdMapDb, cfarParams);
fprintf('  æ£€æµ‹åˆ° %d ä¸ªç›®æ ‡\n', size(detections, 1));

%% ========== Step 4: å¯è§†åŒ– ==========
fprintf('\n[3/6] ç”Ÿæˆå¯è§†åŒ–...\n');

% Range-Doppler Map
figure('Name', 'Range-Doppler Map', 'Position', [100, 100, 1200, 500]);

subplot(1,2,1);
imagesc(rdMapDb);
axis xy;
colorbar;
title(sprintf('Range-Doppler Map (Frame %d)', frameIdx));
xlabel('Doppler Bin');
ylabel('Range Bin');
colormap(jet);
caxis([max(rdMapDb(:))-60, max(rdMapDb(:))]);

% å åŠ æ£€æµ‹
hold on;
if ~isempty(detections)
    plot(detections(:,2), detections(:,1), 'wo', 'MarkerSize', 10, 'LineWidth', 2);
end
hold off;

% ç‰©ç†å•ä½æ˜¾ç¤º
subplot(1,2,2);

if ~isempty(detections)
    % è½¬æ¢ä¸ºç‰©ç†å•ä½
    detRange = (detections(:,1) - 1) * params.rangeResolution;
    detVelocity = (detections(:,2) - params.numChirps/2) * params.velocityResolution;
    detSnr = detections(:,3);
    
    scatter(detVelocity, detRange, 100, detSnr, 'filled');
    colorbar;
    xlabel('Velocity (m/s)');
    ylabel('Range (m)');
    title('Detections (Physical Units)');
    grid on;
    axis equal;
    xlim([-5, 5]);
    ylim([0.5, 8]);
else
    text(0.5, 0.5, 'No detections', 'HorizontalAlignment', 'center');
end

%% ========== Step 5: æ‰¹é‡å¤„ç†æ‰€æœ‰å¸§ ==========
fprintf('\n[4/6] æ‰¹é‡å¤„ç†æ‰€æœ‰å¸§...\n');

allDetections = cell(numFrames, 1);
numDetectionsPerFrame = zeros(numFrames, 1);

fprintf('  å¤„ç†è¿›åº¦: ');
for f = 1:numFrames
    if mod(f, 100) == 0
        fprintf('%d/%d ', f, numFrames);
    end
    
    frameData = adcData(:, :, :, f);
    
    % Range FFT
    windowedData = frameData .* repmat(window, 1, params.numChirps, params.numRxAntennas);
    rangeFft = fft(windowedData, params.numADCSamples, 1);
    
    % Doppler FFT
    dopplerFft = fftshift(fft(rangeFft, params.numChirps, 2), 2);
    rdMap = squeeze(sum(abs(dopplerFft), 3));
    rdMapDb = 20*log10(rdMap + eps);
    
    % CFAR
    detections = cfarCA2D(rdMapDb, cfarParams);
    
    % è½¬æ¢ä¸ºç‰©ç†å•ä½
    if ~isempty(detections)
        detections(:,1) = (detections(:,1) - 1) * params.rangeResolution;  % Range
        detections(:,2) = (detections(:,2) - params.numChirps/2) * params.velocityResolution;  % Velocity
    end
    
    allDetections{f} = detections;
    numDetectionsPerFrame(f) = size(detections, 1);
end
fprintf('\n  å®Œæˆï¼\n');

%% ========== Step 6: ç»Ÿè®¡åˆ†æ ==========
fprintf('\n[5/6] ç»Ÿè®¡åˆ†æ...\n');

fprintf('  æ€»å¸§æ•°: %d\n', numFrames);
fprintf('  æ€»æ£€æµ‹æ•°: %d\n', sum(numDetectionsPerFrame));
fprintf('  å¹³å‡æ£€æµ‹/å¸§: %.2f\n', mean(numDetectionsPerFrame));
fprintf('  æœ€å¤§æ£€æµ‹/å¸§: %d\n', max(numDetectionsPerFrame));

% æ£€æµ‹ç»Ÿè®¡å›¾
figure('Name', 'Detection Statistics', 'Position', [150, 150, 1200, 800]);

% æ¯å¸§æ£€æµ‹æ•°
subplot(2,2,1);
plot(numDetectionsPerFrame, 'b-', 'LineWidth', 1.5);
xlabel('Frame Index');
ylabel('Number of Detections');
title('Detections per Frame');
grid on;

% æ£€æµ‹è·ç¦»åˆ†å¸ƒ
subplot(2,2,2);
allRanges = [];
for f = 1:numFrames
    if ~isempty(allDetections{f})
        allRanges = [allRanges; allDetections{f}(:,1)];
    end
end
histogram(allRanges, 50);
xlabel('Range (m)');
ylabel('Count');
title('Range Distribution');
grid on;

% æ£€æµ‹é€Ÿåº¦åˆ†å¸ƒ
subplot(2,2,3);
allVelocities = [];
for f = 1:numFrames
    if ~isempty(allDetections{f})
        allVelocities = [allVelocities; allDetections{f}(:,2)];
    end
end
histogram(allVelocities, 50);
xlabel('Velocity (m/s)');
ylabel('Count');
title('Velocity Distribution');
grid on;

% è·ç¦»-é€Ÿåº¦æ•£ç‚¹å›¾ï¼ˆæ‰€æœ‰å¸§ï¼‰
subplot(2,2,4);
scatter(allVelocities, allRanges, 10, 'b', 'filled', 'MarkerFaceAlpha', 0.3);
xlabel('Velocity (m/s)');
ylabel('Range (m)');
title('Range-Velocity Scatter (All Frames)');
grid on;
xlim([-5, 5]);
ylim([0.5, 8]);

%% ========== Step 7: ä¿å­˜ç»“æœ ==========
fprintf('\n[6/6] ä¿å­˜ç»“æœ...\n');

resultPath = 'C:\mmwave_projects\indoor_people_detection\processed\';
if ~exist(resultPath, 'dir')
    mkdir(resultPath);
end

% ä¿å­˜å¤„ç†åçš„æ•°æ®
save([resultPath, 'processed_data.mat'], 'allDetections', 'numDetectionsPerFrame', 'params');
fprintf('  å·²ä¿å­˜: processed_data.mat\n');

% ä¿å­˜å›¾åƒ
saveas(gcf, [resultPath, 'detection_statistics.png']);
fprintf('  å·²ä¿å­˜: detection_statistics.png\n');

fprintf('\n========================================\n');
fprintf('  å¤„ç†å®Œæˆï¼\n');
fprintf('========================================\n');

%% è¾…åŠ©å‡½æ•°

function detections = cfarCA2D(data, params)
    % 2D CA-CFARæ£€æµ‹å™¨
    [numRange, numDoppler] = size(data);
    
    detections = [];
    
    numGuard = params.numGuardCells;
    numTrain = params.numTrainingCells;
    threshold = params.thresholdScale;
    
    % åªåœ¨æ„Ÿå…´è¶£åŒºåŸŸæ£€æµ‹ï¼ˆ0.5m - 8mï¼‰
    rangeStart = max(1, round(0.5 / 0.0417)) + numGuard + numTrain;
    rangeEnd = min(numRange, round(8 / 0.0417)) - numGuard - numTrain;
    
    for r = rangeStart:rangeEnd
        for d = (numGuard + numTrain + 1):(numDoppler - numGuard - numTrain)
            cut = data(r, d);
            
            % è®­ç»ƒçª—å£
            trainWindow = data(r-numTrain-numGuard:r+numTrain+numGuard, ...
                               d-numTrain-numGuard:d+numTrain+numGuard);
            
            % ç§»é™¤ä¿æŠ¤çª—å£å’ŒCUT
            trainWindow(numTrain+1:numTrain+2*numGuard+1, :) = [];
            trainWindow(:, numTrain+1:numTrain+2*numGuard+1) = [];
            
            % å¹³å‡å™ªå£°åŠŸç‡
            noisePower = mean(trainWindow(:));
            
            % æ£€æµ‹
            if cut > (noisePower + threshold)
                snr = cut - noisePower;
                detections = [detections; r, d, snr];
            end
        end
    end
end
```

---

### 5.3 å¸¸è§æµ‹è¯•åœºæ™¯

#### åœºæ™¯1ï¼šå‚æ•°æ‰«ææµ‹è¯•

```lua
-- parameter_sweep.lua
-- å‚æ•°æ‰«ææµ‹è¯•è„šæœ¬

-- æµ‹è¯•ä¸åŒå¸¦å®½çš„å½±å“
local BANDWIDTHS = {1.5, 2.0, 2.5, 3.0, 3.6}  -- GHz
local SLOPES = {25, 33, 42, 50, 60}           -- MHz/us

for i, bw in ipairs(BANDWIDTHS) do
    print(string.format("\næµ‹è¯•é…ç½® %d/%d: å¸¦å®½ = %.1f GHz", i, #BANDWIDTHS, bw))
    
    -- é…ç½®é›·è¾¾
    ar1.ProfileConfig(
        0,           -- profileId
        60.5,        -- startFreq
        7,           -- idleTime
        5,           -- adcStartTime
        62,          -- rampEndTime
        0, 0,
        SLOPES[i],   -- freqSlope
        1,
        256,
        10000,
        0, 0, 30
    )
    
    -- å¯åŠ¨å¹¶é‡‡é›†
    ar1.StartSensor()
    ar1.StartRecord(string.format("sweep_bw_%.1fGHz.bin", bw), 1)
    RSTD.Sleep(10000)  -- 10ç§’
    ar1.StopRecord()
    ar1.StopSensor()
    
    RSTD.Sleep(2000)
end

print("\nå‚æ•°æ‰«æå®Œæˆï¼")
```

#### åœºæ™¯2ï¼šé•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•

```lua
-- stability_test.lua
-- 24å°æ—¶ç¨³å®šæ€§æµ‹è¯•

local TEST_DURATION_HOURS = 24
local CAPTURE_INTERVAL_MIN = 10  -- æ¯10åˆ†é’Ÿé‡‡é›†1åˆ†é’Ÿ

local total_iterations = (TEST_DURATION_HOURS * 60) / CAPTURE_INTERVAL_MIN

print(string.format("å¼€å§‹%då°æ—¶ç¨³å®šæ€§æµ‹è¯•", TEST_DURATION_HOURS))
print(string.format("æ€»é‡‡é›†æ¬¡æ•°: %d", total_iterations))

for i = 1, total_iterations do
    local timestamp = os.date("%Y%m%d_%H%M%S")
    print(string.format("\n[%d/%d] %s - å¼€å§‹é‡‡é›†", i, total_iterations, timestamp))
    
    -- å¯åŠ¨å¹¶é‡‡é›†1åˆ†é’Ÿ
    ar1.StartSensor()
    ar1.StartRecord(string.format("stability_%s.bin", timestamp), 1)
    RSTD.Sleep(60000)  -- 1åˆ†é’Ÿ
    ar1.StopRecord()
    ar1.StopSensor()
    
    -- è¯»å–æ¸©åº¦
    local temp = ar1.GetTemperature()
    print(string.format("  æ¸©åº¦: %.1fÂ°C", temp.tempValue))
    
    -- ç­‰å¾…ä¸‹ä¸€æ¬¡é‡‡é›†
    if i < total_iterations then
        print("  ç­‰å¾…ä¸‹æ¬¡é‡‡é›†...")
        RSTD.Sleep((CAPTURE_INTERVAL_MIN - 1) * 60000)
    end
end

print("\nç¨³å®šæ€§æµ‹è¯•å®Œæˆï¼")
```

---

## ç¬¬å…­ç« ï¼šä¸å…¶ä»–å·¥å…·ååŒ

### 6.1 mmWave Studio + SDKå¼€å‘

#### å·¥ä½œæµç¨‹

```
å®Œæ•´å¼€å‘æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: mmWave Studioè¯„ä¼°             â”‚
â”‚  â”œâ”€ æµ‹è¯•ç¡¬ä»¶åŠŸèƒ½                         â”‚
â”‚  â”œâ”€ éªŒè¯é…ç½®å‚æ•°                         â”‚
â”‚  â”œâ”€ é‡‡é›†çœŸå®æ•°æ®                         â”‚
â”‚  â””â”€ ç®—æ³•åŸå‹å¼€å‘ï¼ˆMATLABï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ é…ç½®å‚æ•°
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: SDKç®—æ³•å¼€å‘                    â”‚
â”‚  â”œâ”€ å¯¼å…¥mmWave Studioé…ç½®               â”‚
â”‚  â”œâ”€ å¼€å‘Cä»£ç ç®—æ³•                        â”‚
â”‚  â”œâ”€ åœ¨SDKç¯å¢ƒä¸­æµ‹è¯•                      â”‚
â”‚  â””â”€ ä¼˜åŒ–æ€§èƒ½                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ å›ºä»¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: mmWave StudioéªŒè¯             â”‚
â”‚  â”œâ”€ çƒ§å½•SDKç¼–è¯‘çš„å›ºä»¶                    â”‚
â”‚  â”œâ”€ DCA1000é‡‡é›†è¾“å‡ºæ•°æ®                  â”‚
â”‚  â”œâ”€ å¯¹æ¯”MATLABå‚è€ƒç»“æœ                   â”‚
â”‚  â””â”€ æ€§èƒ½éªŒè¯                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é…ç½®å‚æ•°è¿ç§»

**ä»mmWave Studioé…ç½®ç”ŸæˆSDKé…ç½®ä»£ç **ï¼š

```python
# config_converter.py
# å°†mmWave Studio JSONé…ç½®è½¬æ¢ä¸ºSDK Cä»£ç 

import json

def convert_json_to_sdk_code(json_file, output_file):
    """å°†JSONé…ç½®è½¬æ¢ä¸ºSDK Cä»£ç """
    
    # è¯»å–JSON
    with open(json_file, 'r') as f:
        config = json.load(f)
    
    # ç”ŸæˆCä»£ç 
    code = []
    code.append("/* Auto-generated from mmWave Studio config */")
    code.append("/* Config name: {} */\n".format(config['configName']))
    
    # é€šé“é…ç½®
    code.append("/* Channel Config */")
    code.append("rlChanCfg_t channelCfg = {")
    code.append("    .rxChannelEn = 0x{:X},".format(config['channelConfig']['rxChannelEn']))
    code.append("    .txChannelEn = 0x{:X},".format(config['channelConfig']['txChannelEn']))
    code.append("    .cascading = {},".format(config['channelConfig']['cascading']))
    code.append("};")
    code.append("retVal = rlSetChannelConfig(RL_DEVICE_MAP_INTERNAL_BSS, &channelCfg);\n")
    
    # ADCé…ç½®
    code.append("/* ADC Config */")
    code.append("rlAdcOutCfg_t adcOutCfg = {")
    code.append("    .fmt = {")
    code.append("        .b2AdcBits = {},".format(config['adcConfig']['numADCBits']))
    code.append("        .b2AdcOutFmt = {},".format(config['adcConfig']['adcOutputFmt']))
    code.append("    },")
    code.append("};")
    code.append("retVal = rlSetAdcOutConfig(RL_DEVICE_MAP_INTERNAL_BSS, &adcOutCfg);\n")
    
    # Profileé…ç½®
    prof = config['profileConfig']
    code.append("/* Profile Config */")
    code.append("rlProfileCfg_t profileCfg = {")
    code.append("    .profileId = {},".format(prof['profileId']))
    code.append("    .startFreqConst = {},  // {} GHz".format(
        int(prof['startFreqConst_GHz'] * 1000000 / 53.644),
        prof['startFreqConst_GHz']))
    code.append("    .idleTimeConst = {},  // {} us".format(
        int(prof['idleTimeConst_us'] * 10),
        prof['idleTimeConst_us']))
    code.append("    .adcStartTimeConst = {},  // {} us".format(
        int(prof['adcStartTimeConst_us'] * 10),
        prof['adcStartTimeConst_us']))
    code.append("    .rampEndTime = {},  // {} us".format(
        int(prof['rampEndTime_us'] * 10),
        prof['rampEndTime_us']))
    code.append("    .freqSlopeConst = {},  // {} MHz/us".format(
        int(prof['freqSlopeConst_MHz_us'] * 1000 / 48.279),
        prof['freqSlopeConst_MHz_us']))
    code.append("    .numAdcSamples = {},".format(prof['numAdcSamples']))
    code.append("    .digOutSampleRate = {},  // {} ksps".format(
        prof['digOutSampleRate_ksps'],
        prof['digOutSampleRate_ksps']))
    code.append("    .rxGain = {},  // {} dB".format(
        prof['rxGain_dB'],
        prof['rxGain_dB']))
    code.append("};")
    code.append("retVal = rlSetProfileConfig(RL_DEVICE_MAP_INTERNAL_BSS, 1, &profileCfg);\n")
    
    # Chirpé…ç½®
    code.append("/* Chirp Config */")
    for i, chirp in enumerate(config['chirpConfig']):
        code.append("rlChirpCfg_t chirpCfg{} = {{".format(i))
        code.append("    .chirpStartIdx = {},".format(chirp['chirpStartIdx']))
        code.append("    .chirpEndIdx = {},".format(chirp['chirpEndIdx']))
        code.append("    .profileId = {},".format(chirp['profileId']))
        code.append("    .txEnable = 0x{:X},".format(chirp['txEnable']))
        code.append("};")
        code.append("retVal = rlSetChirpConfig(RL_DEVICE_MAP_INTERNAL_BSS, 1, &chirpCfg{});\n".format(i))
    
    # å¸§é…ç½®
    frame = config['frameConfig']
    code.append("/* Frame Config */")
    code.append("rlFrameCfg_t frameCfg = {")
    code.append("    .chirpStartIdx = {},".format(frame['chirpStartIdx']))
    code.append("    .chirpEndIdx = {},".format(frame['chirpEndIdx']))
    code.append("    .numLoops = {},".format(frame['numLoops']))
    code.append("    .numFrames = {},".format(frame['numFrames']))
    code.append("    .framePeriodicity = {},  // {} ms".format(
        int(frame['framePeriodicity_ms'] * 1000000 / 5),
        frame['framePeriodicity_ms']))
    code.append("    .triggerSelect = {},".format(frame['triggerSelect']))
    code.append("};")
    code.append("retVal = rlSetFrameConfig(RL_DEVICE_MAP_INTERNAL_BSS, &frameCfg);")
    
    # å†™å…¥æ–‡ä»¶
    with open(output_file, 'w') as f:
        f.write('\n'.join(code))
    
    print(f"SDKé…ç½®ä»£ç å·²ç”Ÿæˆ: {output_file}")

# ä½¿ç”¨ç¤ºä¾‹
convert_json_to_sdk_code(
    'indoor_people_detection_config.json',
    'sdk_config_generated.c'
)
```

---

### 6.2 mmWave Studio + MATLAB

#### æ•°æ®æµè½¬

```
mmWave Studio â†’ MATLABå®Œæ•´æµç¨‹ï¼š

Step 1: mmWave Studioé‡‡é›†
â”œâ”€ DCA1000é‡‡é›†ADCæ•°æ®
â””â”€ ä¿å­˜ä¸º.binæ–‡ä»¶

Step 2: MATLABåŠ è½½
â”œâ”€ è¯»å–.binæ–‡ä»¶
â”œâ”€ è§£æADCæ•°æ®æ ¼å¼
â””â”€ é‡ç»„ä¸ºå¤šç»´æ•°ç»„

Step 3: MATLABå¤„ç†
â”œâ”€ Range/Doppler FFT
â”œâ”€ CFARæ£€æµ‹
â”œâ”€ DOAä¼°è®¡
â””â”€ ç›®æ ‡è·Ÿè¸ª

Step 4: MATLABå¯¼å‡º
â”œâ”€ ä¿å­˜å¤„ç†ç»“æœ
â”œâ”€ ç”Ÿæˆå¯è§†åŒ–
â””â”€ å¯¼å‡ºé…ç½®å‚æ•°
```

#### MATLABå·¥å…·ç®±é›†æˆ

```matlab
% mmwave_studio_toolbox.m
% mmWave Studioä¸MATLABé›†æˆå·¥å…·ç®±

classdef mmwave_studio_toolbox < handle
    
    properties
        dataPath
        configFile
        radarParams
        adcData
        processedData
    end
    
    methods
        %% æ„é€ å‡½æ•°
        function obj = mmwave_studio_toolbox(dataPath, configFile)
            obj.dataPath = dataPath;
            obj.configFile = configFile;
            obj.loadConfig();
        end
        
        %% åŠ è½½é…ç½®
        function loadConfig(obj)
            jsonStr = fileread(obj.configFile);
            config = jsondecode(jsonStr);
            
            % æå–é›·è¾¾å‚æ•°
            obj.radarParams.numADCSamples = config.profileConfig.numAdcSamples;
            obj.radarParams.numChirps = config.frameConfig.chirpEndIdx - config.frameConfig.chirpStartIdx + 1;
            obj.radarParams.numRxAntennas = bitcount(config.channelConfig.rxChannelEn);
            obj.radarParams.startFreq = config.profileConfig.startFreqConst_GHz * 1e9;
            obj.radarParams.bandwidth = config.profileConfig.freqSlopeConst_MHz_us * ...
                (config.profileConfig.rampEndTime_us - config.profileConfig.adcStartTimeConst_us) * 1e6;
            
            % è®¡ç®—è¡ç”Ÿå‚æ•°
            c = 3e8;
            obj.radarParams.rangeResolution = c / (2 * obj.radarParams.bandwidth);
            obj.radarParams.maxRange = obj.radarParams.numADCSamples * obj.radarParams.rangeResolution;
            
            fprintf('é…ç½®åŠ è½½å®Œæˆï¼\n');
        end
        
        %% åŠ è½½ADCæ•°æ®
        function loadData(obj, filename)
            filepath = fullfile(obj.dataPath, filename);
            
            fid = fopen(filepath, 'r');
            rawData = fread(fid, 'uint16');
            fclose(fid);
            
            % è½¬æ¢ä¸ºå¤æ•°
            rawData = reshape(rawData, 2, []);
            complexData = complex(rawData(1,:), rawData(2,:));
            
            % é‡ç»„
            samplesPerFrame = obj.radarParams.numADCSamples * obj.radarParams.numChirps * obj.radarParams.numRxAntennas;
            numFrames = floor(length(complexData) / samplesPerFrame);
            
            obj.adcData = reshape(complexData(1:samplesPerFrame * numFrames), ...
                obj.radarParams.numADCSamples, obj.radarParams.numChirps, ...
                obj.radarParams.numRxAntennas, numFrames);
            
            fprintf('æ•°æ®åŠ è½½å®Œæˆ: %d å¸§\n', numFrames);
        end
        
        %% å¤„ç†å•å¸§
        function [rdMap, detections] = processFrame(obj, frameIdx)
            frameData = obj.adcData(:, :, :, frameIdx);
            
            % Range FFT
            window = hanning(obj.radarParams.numADCSamples);
            windowedData = frameData .* repmat(window, 1, obj.radarParams.numChirps, obj.radarParams.numRxAntennas);
            rangeFft = fft(windowedData, obj.radarParams.numADCSamples, 1);
            
            % Doppler FFT
            dopplerFft = fftshift(fft(rangeFft, obj.radarParams.numChirps, 2), 2);
            rdMap = squeeze(sum(abs(dopplerFft), 3));
            
            % CFARæ£€æµ‹
            rdMapDb = 20*log10(rdMap + eps);
            cfarParams.numGuardCells = 4;
            cfarParams.numTrainingCells = 16;
            cfarParams.thresholdScale = 15;
            
            detections = obj.cfarCA2D(rdMapDb, cfarParams);
        end
        
        %% å¯è§†åŒ–
        function visualize(obj, frameIdx)
            [rdMap, detections] = obj.processFrame(frameIdx);
            
            figure;
            imagesc(20*log10(rdMap + eps));
            axis xy;
            colorbar;
            title(sprintf('Frame %d', frameIdx));
            colormap(jet);
            
            hold on;
            if ~isempty(detections)
                plot(detections(:,2), detections(:,1), 'wo', 'MarkerSize', 10);
            end
            hold off;
        end
        
        %% CFARæ£€æµ‹ï¼ˆå†…éƒ¨æ–¹æ³•ï¼‰
        function detections = cfarCA2D(obj, data, params)
            [numRange, numDoppler] = size(data);
            detections = [];
            
            numGuard = params.numGuardCells;
            numTrain = params.numTrainingCells;
            threshold = params.thresholdScale;
            
            for r = (numGuard + numTrain + 1):(numRange - numGuard - numTrain)
                for d = (numGuard + numTrain + 1):(numDoppler - numGuard - numTrain)
                    cut = data(r, d);
                    
                    % è®­ç»ƒçª—å£
                    trainWindow = data(r-numTrain-numGuard:r+numTrain+numGuard, ...
                                       d-numTrain-numGuard:d+numTrain+numGuard);
                    trainWindow(numTrain+1:numTrain+2*numGuard+1, :) = [];
                    trainWindow(:, numTrain+1:numTrain+2*numGuard+1) = [];
                    
                    noisePower = mean(trainWindow(:));
                    
                    if cut > (noisePower + threshold)
                        detections = [detections; r, d, cut - noisePower];
                    end
                end
            end
        end
    end
end

% ä½¿ç”¨ç¤ºä¾‹ï¼š
% tool = mmwave_studio_toolbox('C:\mmwave_projects\indoor_people_detection\raw_data\', ...
%                              'C:\mmwave_projects\indoor_people_detection\configs\indoor_people_detection_config.json');
% tool.loadData('indoor_capture_20251225_143000_Raw_0.bin');
% tool.visualize(100);
```

---

### 6.3 mmWave Studio + Python

#### Pythonæ•°æ®åŠ è½½

```python
# mmwave_studio_python.py
# mmWave Studioæ•°æ®Pythonå¤„ç†

import numpy as np
import matplotlib.pyplot as plt
import json
from scipy import signal
from scipy.fft import fft, fftshift

class MmWaveStudioData:
    """mmWave Studioæ•°æ®å¤„ç†ç±»"""
    
    def __init__(self, data_path, config_file):
        self.data_path = data_path
        self.config_file = config_file
        self.load_config()
    
    def load_config(self):
        """åŠ è½½é…ç½®æ–‡ä»¶"""
        with open(self.config_file, 'r') as f:
            config = json.load(f)
        
        # æå–å‚æ•°
        self.num_adc_samples = config['profileConfig']['numAdcSamples']
        self.num_chirps = config['frameConfig']['chirpEndIdx'] - config['frameConfig']['chirpStartIdx'] + 1
        self.num_rx = bin(config['channelConfig']['rxChannelEn']).count('1')
        self.start_freq = config['profileConfig']['startFreqConst_GHz'] * 1e9
        
        # è®¡ç®—å¸¦å®½
        slope = config['profileConfig']['freqSlopeConst_MHz_us'] * 1e12
        ramp_time = (config['profileConfig']['rampEndTime_us'] - 
                     config['profileConfig']['adcStartTimeConst_us']) * 1e-6
        self.bandwidth = slope * ramp_time
        
        # åˆ†è¾¨ç‡
        c = 3e8
        self.range_resolution = c / (2 * self.bandwidth)
        self.max_range = self.num_adc_samples * self.range_resolution
        
        print(f"é…ç½®åŠ è½½å®Œæˆ:")
        print(f"  é‡‡æ ·ç‚¹: {self.num_adc_samples}")
        print(f"  Chirpæ•°: {self.num_chirps}")
        print(f"  RXæ•°: {self.num_rx}")
        print(f"  è·ç¦»åˆ†è¾¨ç‡: {self.range_resolution*100:.2f} cm")
    
    def load_data(self, filename):
        """åŠ è½½ADCæ•°æ®"""
        filepath = f"{self.data_path}/{filename}"
        
        # è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶
        raw_data = np.fromfile(filepath, dtype=np.uint16)
        
        # è½¬æ¢ä¸ºå¤æ•° (I + jQ)
        raw_data = raw_data.reshape(-1, 2)
        complex_data = raw_data[:, 0] + 1j * raw_data[:, 1]
        
        # é‡ç»„ä¸º4Dæ•°ç»„: [Frames, RX, Chirps, Samples]
        samples_per_frame = self.num_adc_samples * self.num_chirps * self.num_rx
        num_frames = len(complex_data) // samples_per_frame
        
        self.adc_data = complex_data[:num_frames * samples_per_frame].reshape(
            num_frames, self.num_rx, self.num_chirps, self.num_adc_samples
        )
        
        print(f"æ•°æ®åŠ è½½å®Œæˆ: {num_frames} å¸§")
        print(f"  æ•°æ®å½¢çŠ¶: {self.adc_data.shape}")
        
        return self.adc_data
    
    def process_frame(self, frame_idx):
        """å¤„ç†å•å¸§æ•°æ®"""
        frame_data = self.adc_data[frame_idx]  # [RX, Chirps, Samples]
        
        # Range FFT
        window = signal.windows.hann(self.num_adc_samples)
        windowed = frame_data * window[None, None, :]
        range_fft = fft(windowed, n=self.num_adc_samples, axis=2)
        
        # Doppler FFT
        doppler_fft = fftshift(fft(range_fft, n=self.num_chirps, axis=1), axes=1)
        
        # æ‰€æœ‰RXæ±‚å’Œ
        rd_map = np.sum(np.abs(doppler_fft), axis=0)  # [Chirps, Samples]
        
        return rd_map
    
    def cfar_ca_2d(self, data, num_guard=4, num_train=16, threshold_db=15):
        """2D CA-CFARæ£€æµ‹"""
        num_range, num_doppler = data.shape
        detections = []
        
        # è½¬æ¢ä¸ºdB
        data_db = 20 * np.log10(data + 1e-10)
        
        for r in range(num_guard + num_train, num_range - num_guard - num_train):
            for d in range(num_guard + num_train, num_doppler - num_guard - num_train):
                cut = data_db[r, d]
                
                # è®­ç»ƒçª—å£
                r_start = r - num_train - num_guard
                r_end = r + num_train + num_guard + 1
                d_start = d - num_train - num_guard
                d_end = d + num_train + num_guard + 1
                
                train_window = data_db[r_start:r_end, d_start:d_end].copy()
                
                # ç§»é™¤ä¿æŠ¤çª—å£
                guard_start = num_train
                guard_end = num_train + 2 * num_guard + 1
                train_window[guard_start:guard_end, :] = np.nan
                train_window[:, guard_start:guard_end] = np.nan
                
                # å¹³å‡å™ªå£°åŠŸç‡
                noise_power = np.nanmean(train_window)
                
                # æ£€æµ‹
                if cut > (noise_power + threshold_db):
                    detections.append([r, d, cut - noise_power])
        
        return np.array(detections) if detections else np.array([])
    
    def visualize_frame(self, frame_idx):
        """å¯è§†åŒ–å•å¸§"""
        rd_map = self.process_frame(frame_idx)
        detections = self.cfar_ca_2d(rd_map)
        
        # è½¬æ¢ä¸ºdB
        rd_map_db = 20 * np.log10(rd_map + 1e-10)
        
        # ç»˜å›¾
        plt.figure(figsize=(12, 5))
        
        plt.subplot(1, 2, 1)
        plt.imshow(rd_map_db, aspect='auto', cmap='jet', origin='lower')
        plt.colorbar(label='Magnitude (dB)')
        plt.title(f'Range-Doppler Map (Frame {frame_idx})')
        plt.xlabel('Range Bin')
        plt.ylabel('Doppler Bin')
        
        # å åŠ æ£€æµ‹
        if len(detections) > 0:
            plt.plot(detections[:, 0], detections[:, 1], 'wo', markersize=10, markeredgewidth=2)
        
        plt.subplot(1, 2, 2)
        if len(detections) > 0:
            # è½¬æ¢ä¸ºç‰©ç†å•ä½
            det_range = detections[:, 0] * self.range_resolution
            det_snr = detections[:, 2]
            
            plt.scatter(det_range, det_snr, c=det_snr, cmap='hot', s=100)
            plt.colorbar(label='SNR (dB)')
            plt.xlabel('Range (m)')
            plt.ylabel('SNR (dB)')
            plt.title(f'Detections ({len(detections)} targets)')
            plt.grid(True)
        else:
            plt.text(0.5, 0.5, 'No detections', ha='center', va='center', transform=plt.gca().transAxes)
        
        plt.tight_layout()
        plt.show()

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # åˆå§‹åŒ–
    tool = MmWaveStudioData(
        data_path="C:/mmwave_projects/indoor_people_detection/raw_data",
        config_file="C:/mmwave_projects/indoor_people_detection/configs/indoor_people_detection_config.json"
    )
    
    # åŠ è½½æ•°æ®
    tool.load_data("indoor_capture_20251225_143000_Raw_0.bin")
    
    # å¯è§†åŒ–
    tool.visualize_frame(100)
```

---

## å°ç»“ä¸æ€»ç»“

### æœ¬éƒ¨åˆ†å®Œæˆå†…å®¹ âœ…

**ç¬¬äº”ç« ï¼šå®æˆ˜åº”ç”¨æµç¨‹**
1. âœ… å®Œæ•´è¯„ä¼°é¡¹ç›®ç¤ºä¾‹ï¼ˆå®¤å†…äººå‘˜æ£€æµ‹ï¼‰
2. âœ… ç«¯åˆ°ç«¯æµç¨‹ï¼ˆè¿æ¥â†’é…ç½®â†’é‡‡é›†â†’å¤„ç†ï¼‰
3. âœ… å®Œæ•´Luaé‡‡é›†è„šæœ¬ï¼ˆå¸¦è¿›åº¦æ˜¾ç¤ºï¼‰
4. âœ… MATLABåå¤„ç†å®Œæ•´ä»£ç 
5. âœ… å¸¸è§æµ‹è¯•åœºæ™¯ï¼ˆå‚æ•°æ‰«æã€ç¨³å®šæ€§æµ‹è¯•ï¼‰

**ç¬¬å…­ç« ï¼šä¸å…¶ä»–å·¥å…·ååŒ**
1. âœ… mmWave Studio + SDKå¼€å‘æµç¨‹
2. âœ… é…ç½®å‚æ•°è¿ç§»ï¼ˆJSONâ†’SDK Cä»£ç ï¼‰
3. âœ… MATLABå·¥å…·ç®±é›†æˆï¼ˆå®Œæ•´ç±»ï¼‰
4. âœ… Pythonæ•°æ®å¤„ç†ï¼ˆå®Œæ•´ç±»ï¼‰

### Part11æ–‡æ¡£å®Œæ•´åº¦

```
Part11: mmWave Studioæ·±åº¦è§£æ
â”œâ”€ ç¬¬ä¸€ç« ï¼šmmWave Studioæ¦‚è§ˆ âœ…
â”œâ”€ ç¬¬äºŒç« ï¼šä¸»è¦ç»„ä»¶è¯¦è§£ âœ…
â”œâ”€ ç¬¬ä¸‰ç« ï¼šç»„ä»¶ç›®å½•æ·±å…¥åˆ†æ âœ…
â”œâ”€ ç¬¬å››ç« ï¼šæ–‡æ¡£ç³»ç»Ÿè§£è¯» âœ…
â”œâ”€ ç¬¬äº”ç« ï¼šå®æˆ˜åº”ç”¨æµç¨‹ âœ…
â””â”€ ç¬¬å…­ç« ï¼šä¸å…¶ä»–å·¥å…·ååŒ âœ…
```

**æ–‡æ¡£çŠ¶æ€**: âœ… **å®Œæˆï¼**

---

**Part11æ·±åº¦è§£æå…¨éƒ¨å®Œæˆï¼** ğŸ‰

