---
trigger: always_on
description: "目录结构和清洁度要求"
---

# 目录管理规范

## 🔴 严格目录控制

### 核心原则
- **只能**创建架构模板（09号规则）定义的目录
- **禁止**随意新增目录或改变目录结构
- **禁止**创建未经定义的目录

### 允许的目录操作
✅ 创建09-项目结构与配置.md中列出的目录
✅ 在允许的目录下创建子目录（需符合规范）
✅ 按照09-项目结构与配置.md中的项目特定目录

### 禁止的目录操作
❌ 创建模板外的新目录
❌ 随意改变目录结构
❌ 创建临时目录
❌ 创建未命名目录

---

## 根目录清洁度

### 允许的根目录项
- `.git`, `.vscode`, `.windsurf`
- `项目文档/`
- `README.md`, `.gitignore`
- 代码目录（如 `backend/`, `frontend/`）
- `temp/` - 临时文件目录（可随时增删）

### 禁止的根目录项
- ❌ 任何`.md`文件（除README.md）
- ❌ 临时文件、测试文件
- ❌ 未命名或编号的目录
- ❌ 随意创建的目录

---

## .windsurf/rules 目录管理

### 允许的文件
- 编号规则文件（`NN-中文名称.md`）
- `README.md`

### 严禁的文件
- ❌ 带日期前缀的文档（`YYYY-MM-DD-*.md`）
- ❌ 包含"分析"、"报告"、"检查"的文件
- ❌ 临时文档、草稿文件
- ❌ 非规则文件

### 违规文档的正确位置
- 分析报告  `项目文档/`
- 临时文档  `项目文档/`
- 测试记录  `tests/test_reports/`

---

## 目录层级控制

- **最大深度**: 5层
- 超过5层需要重构
- 避免深层嵌套

**示例**（5层）：
```
project/
 level1/
     level2/
         level3/
             level4/
                 level5/   最多到这里
```

---



## 🔴 AI创建目录前强制检查

**在执行New-Item创建目录或mkdir命令之前**，AI必须检查：

 **Step 1**: 检查目录路径
   - 这是在项目根目录吗？
   - 这是在哪个子目录下？

 **Step 2**: 查询09规则模板
   - 这个目录在09-项目结构与配置.md中定义了吗？
   - 父目录允许创建子目录吗？

 **Step 3**: 确认必要性
   - 这个目录真的必要吗？
   - 可以使用现有目录吗？

 **Step 4**: 命名规范
   - 目录名称清晰明确吗？
   - 符合项目命名规范吗？

**如果发现要创建的目录不在09模板中**：
1. ⏸️ 立即停止
2. 💬 询问用户："这个目录不在项目模板中，确定要创建吗？"
3. ❌ 如果不确定，拒绝创建

**AI违规记录**：
- 如果创建了未定义的目录  立即删除

## 创建目录前的检查

### 必须确认
1. ✅ 目录在架构模板中定义？
2. ✅ 命名符合规范？
3. ✅ 位置正确？
4. ✅ 没有重复？

### 如果不确定
- 查看 `09-项目结构与配置.md`
- 查看 `09-项目结构与配置.md`
- 如果模板没有，**禁止创建**

---

## 自检清单

操作后检查：
1. [ ] 根目录无多余文件
2. [ ] .windsurf/rules 仅包含规则
3. [ ] 临时文档放正确位置
4. [ ] 目录层级5层
5. [ ] 所有目录都在模板定义中
6. [ ] 目录命名符合规范

---

## 违规处理

### 发现违规目录
1. 立即识别
2. 确定正确位置
3. 移动或删除
4. 更新相关文档

### 常见违规
- 在根目录创建临时目录
- 在rules/目录创建非规则文件
- 创建模板外的新目录
- 目录层级过深

---

**严格控制目录结构是保持项目整洁的关键！** 🎯