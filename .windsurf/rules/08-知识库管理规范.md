---
trigger: always_on
description: "知识库文件夹的严格管理规范"
---

# 知识库管理规范

**规则类型**: 🔴 强制规则  
**强制级别**: 🔴 严格执行  
**适用范围**: 所有项目

---

## 🎯 核心原则

### 知识库定位
**知识库** = 项目的只读参考资料库
- 📚 存放项目原始文件
- 📚 存放参考文档
- 📚 存放源代码参考
- 🔒 绝对只读，禁止修改

---

## �� 必需要求

### 1. 目录必须存在
- ✅ **每个项目根目录**下必须有 `知识库/` 目录
- ✅ 如果不存在，项目负责人必须创建
- ❌ AI不能主动创建知识库目录

### 2. 标准位置
```
项目根目录/
 知识库/               必须存在
    README.md        知识库索引
    [参考资料]/      子目录
 项目文档/
 .windsurf/
 README.md
```

---



## 🔴 AI文件操作前强制检查

**在对任何文件执行write_to_file、edit、multi_edit、run_command之前**：

AI必须检查文件路径：
- [ ] 路径中是否包含知识库/或knowledge_base/？
- [ ] 如果是  🔒 这是只读目录！必须拒绝操作！
- [ ] 操作类型是什么？
  - 读取（read_file, list_dir, grep_search） ✅ 允许
  - 修改（write, edit, delete, move） ❌ 禁止

**如果发现自己正要修改知识库文件**：
1. ⏸️ 立即停止操作
2. 💬 提示用户："知识库是只读的，无法修改"
3. 🔄 建议："如需更新，请联系项目负责人"

**AI违规记录**：
- 如果不小心修改了知识库  立即撤销
- 删除创建的文件，或恢复修改

## 🔒 严格权限控制

### ✅ 允许的操作

#### 1. 读取操作（无限制）
- ✅ 读取任何知识库文件
- ✅ 查看文件内容
- ✅ 引用和参考
- ✅ 复制内容到项目文档
- ✅ 在代码中引用知识库内容

#### 2. 查询操作（无限制）
- ✅ 列出目录结构
- ✅ 搜索文件
- ✅ 查看文件元信息

### ❌ 禁止的操作

#### 1. 修改操作（绝对禁止）
- ❌ **禁止**修改任何现有文件
- ❌ **禁止**删除任何文件
- ❌ **禁止**重命名任何文件
- ❌ **禁止**移动任何文件

#### 2. 创建操作（绝对禁止）
- ❌ **禁止**创建新文件
- ❌ **禁止**创建新目录
- ❌ **禁止**上传文件
- ❌ **禁止**复制文件到知识库

---

## 🚫 违规处理

### 如果AI尝试修改知识库

**立即中止操作**并提示：

```
❌ 错误：尝试修改知识库文件

知识库是只读参考资料，禁止任何修改操作。

如果需要：
1. 📖 阅读和参考  可以
2. 📋 复制到项目文档  可以
3. ✏️ 修改知识库文件  禁止
4. ➕ 创建新文件  禁止

如需更新知识库，请联系项目负责人。
```

---

## 📋 使用场景

### ✅ 正确的使用方式

#### 场景1：参考源代码
```markdown
需求：查看原项目的数据库设计

正确做法：
1. 读取 知识库/源项目/db/schema.sql
2. 参考其设计思路
3. 在当前项目中实现新的设计
4. 不修改知识库文件
```

#### 场景2：引用技术文档
```markdown
需求：了解API设计规范

正确做法：
1. 读取 知识库/docs/api-spec.md
2. 理解规范要求
3. 在项目文档中创建实现笔记
4. 不修改知识库文件
```

#### 场景3：对照参考数据
```markdown
需求：对照原始数据进行验证

正确做法：
1. 读取 知识库/data/reference.json
2. 与当前实现对照
3. 在项目文档中记录对照结果
4. 不修改知识库文件
```

### ❌ 错误的使用方式

#### 错误1：直接修改
```markdown
❌ 错误做法：
1. 发现知识库文件有错误
2. 直接修改知识库文件
3. 保存修改

✅ 正确做法：
1. 发现问题
2. 在项目文档中记录问题
3. 通知项目负责人
4. 等待负责人更新知识库
```

#### 错误2：添加新文件
```markdown
❌ 错误做法：
1. 获得新的参考资料
2. 直接添加到知识库

✅ 正确做法：
1. 暂时放在 项目文档/临时文件/
2. 通知项目负责人
3. 由负责人决定是否添加到知识库
```

---

## 🎯 知识库更新流程

### 谁可以更新？
- ✅ 项目负责人
- ✅ 经授权的团队成员
- ❌ AI（绝对禁止）

### 更新流程
```markdown
1. 项目负责人准备新的参考资料
2. 手动添加/修改知识库文件
3. 更新 知识库/README.md 索引
4. 通知团队知识库已更新
5. AI自动可以访问新内容
```

---

## 📚 知识库内容建议

### 推荐存放的内容

#### 1. 源参考文件
```
知识库/
 源项目名称/
    README.md        源项目说明
    db/             数据库文件
    docs/           技术文档
    schema/         数据结构
    specs/          规格说明
```

#### 2. 技术参考文档
```
知识库/
 技术规范/
    API设计规范.md
    数据库设计规范.md
    编码规范.md
```

#### 3. 业务参考资料
```
知识库/
 业务资料/
    需求文档.md
    业务流程.md
    数据字典.md
```

### 不推荐存放的内容
- ❌ 临时文件
- ❌ 工作中的文档
- ❌ 测试数据
- ❌ 频繁变动的文件

---

## 🔍 AI自检清单

每次操作知识库前后，AI必须检查：

### 操作前检查
- [ ] 我是要读取还是修改？
- [ ] 如果是修改  立即中止
- [ ] 如果是读取  可以继续

### 操作中检查
- [ ] 我有没有尝试写入？
- [ ] 我有没有尝试创建？
- [ ] 我有没有尝试删除？

### 操作后检查
- [ ] 知识库文件有任何变化吗？
- [ ] 如果有变化  立即撤销
- [ ] 如果无变化  操作正确

---

## 💡 实用提示

### 对于AI
1. 🔒 **记住**：知识库 = 只读
2. 📖 **随时**：可以读取参考
3. ❌ **绝不**：修改或创建
4. 📝 **如需**：复制到项目文档

### 对于用户
1. 📚 创建知识库目录
2. 📁 添加参考资料
3. 📋 维护 README.md 索引
4. 🔄 定期更新内容

---

## 🎯 与其他规则的关系

### 配合规则
- **00-核心工作原则** - 严格目录控制
- **01-文件操作规范** - 文件操作权限
- **02-目录管理规范** - 目录结构要求
- **06-目录架构模板** - 标准目录位置

### 优先级
- 🔴 知识库只读规则 > 其他所有规则
- 🔴 即使其他规则允许，知识库仍禁止修改

---

## ✅ 总结

### 核心要点
1. ✅ 每个项目必须有 `知识库/` 目录
2. 🔒 知识库绝对只读
3. 📖 AI可以随时读取参考
4. ❌ AI禁止任何修改/创建操作
5. 👤 只有项目负责人可以更新

### 记忆口诀
```
知识库，只能读
不能改，不能建
要更新，找负责人
AI记住，绝对遵守
```

---

**AI必须将此规则刻入核心，永不违反！** 🔒📚